/* Controller.c generated by valac 0.32.1, the Vala compiler
 * generated from Controller.vala, do not modify */

/*
 * Copyright (c) 2015 Peter Arnold
 *
 * This program is free software; you can redistribute it and/or
 * modify it under the terms of the GNU General Public
 * License as published by the Free Software Foundation; either
 * version 2 of the License, or (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
 * General Public License for more details.
 *
 * You should have received a copy of the GNU General Public
 * License along with this program; if not, write to the
 * Free Software Foundation, Inc., 59 Temple Place - Suite 330,
 * Boston, MA 02111-1307, USA.
 */

#include <glib.h>
#include <glib-object.h>
#include <granite.h>
#include <stdlib.h>
#include <string.h>
#include <gio/gio.h>
#include <gtk/gtk.h>
#include <gee.h>
#include <gtksourceview/gtksource.h>
#include <stdio.h>


#define TYPE_NASC_SHEET (nasc_sheet_get_type ())
#define NASC_SHEET(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), TYPE_NASC_SHEET, NascSheet))
#define NASC_SHEET_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), TYPE_NASC_SHEET, NascSheetClass))
#define IS_NASC_SHEET(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), TYPE_NASC_SHEET))
#define IS_NASC_SHEET_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), TYPE_NASC_SHEET))
#define NASC_SHEET_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), TYPE_NASC_SHEET, NascSheetClass))

typedef struct _NascSheet NascSheet;
typedef struct _NascSheetClass NascSheetClass;
typedef struct _NascSheetPrivate NascSheetPrivate;
#define _g_free0(var) (var = (g_free (var), NULL))
#define _g_object_unref0(var) ((var == NULL) ? NULL : (var = (g_object_unref (var), NULL)))

#define TYPE_CONTROLLER (controller_get_type ())
#define CONTROLLER(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), TYPE_CONTROLLER, Controller))
#define CONTROLLER_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), TYPE_CONTROLLER, ControllerClass))
#define IS_CONTROLLER(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), TYPE_CONTROLLER))
#define IS_CONTROLLER_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), TYPE_CONTROLLER))
#define CONTROLLER_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), TYPE_CONTROLLER, ControllerClass))

typedef struct _Controller Controller;
typedef struct _ControllerClass ControllerClass;
typedef struct _ControllerPrivate ControllerPrivate;

#define TYPE_CALCULATOR (calculator_get_type ())
#define CALCULATOR(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), TYPE_CALCULATOR, Calculator))
#define CALCULATOR_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), TYPE_CALCULATOR, CalculatorClass))
#define IS_CALCULATOR(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), TYPE_CALCULATOR))
#define IS_CALCULATOR_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), TYPE_CALCULATOR))
#define CALCULATOR_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), TYPE_CALCULATOR, CalculatorClass))

typedef struct _Calculator Calculator;
typedef struct _CalculatorClass CalculatorClass;

#define TYPE_INPUT_VIEW (input_view_get_type ())
#define INPUT_VIEW(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), TYPE_INPUT_VIEW, InputView))
#define INPUT_VIEW_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), TYPE_INPUT_VIEW, InputViewClass))
#define IS_INPUT_VIEW(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), TYPE_INPUT_VIEW))
#define IS_INPUT_VIEW_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), TYPE_INPUT_VIEW))
#define INPUT_VIEW_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), TYPE_INPUT_VIEW, InputViewClass))

typedef struct _InputView InputView;
typedef struct _InputViewClass InputViewClass;

#define TYPE_RESULT_VIEW (result_view_get_type ())
#define RESULT_VIEW(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), TYPE_RESULT_VIEW, ResultView))
#define RESULT_VIEW_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), TYPE_RESULT_VIEW, ResultViewClass))
#define IS_RESULT_VIEW(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), TYPE_RESULT_VIEW))
#define IS_RESULT_VIEW_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), TYPE_RESULT_VIEW))
#define RESULT_VIEW_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), TYPE_RESULT_VIEW, ResultViewClass))

typedef struct _ResultView ResultView;
typedef struct _ResultViewClass ResultViewClass;

#define TYPE_NASC_SETTINGS (nasc_settings_get_type ())
#define NASC_SETTINGS(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), TYPE_NASC_SETTINGS, NascSettings))
#define NASC_SETTINGS_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), TYPE_NASC_SETTINGS, NascSettingsClass))
#define IS_NASC_SETTINGS(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), TYPE_NASC_SETTINGS))
#define IS_NASC_SETTINGS_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), TYPE_NASC_SETTINGS))
#define NASC_SETTINGS_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), TYPE_NASC_SETTINGS, NascSettingsClass))

typedef struct _NascSettings NascSettings;
typedef struct _NascSettingsClass NascSettingsClass;
#define _g_regex_unref0(var) ((var == NULL) ? NULL : (var = (g_regex_unref (var), NULL)))
typedef struct _Block3Data Block3Data;
typedef struct _InputViewPrivate InputViewPrivate;
#define _g_error_free0(var) ((var == NULL) ? NULL : (var = (g_error_free (var), NULL)))

#define TYPE_RESULT_LINE (result_line_get_type ())
#define RESULT_LINE(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), TYPE_RESULT_LINE, ResultLine))
#define RESULT_LINE_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), TYPE_RESULT_LINE, ResultLineClass))
#define IS_RESULT_LINE(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), TYPE_RESULT_LINE))
#define IS_RESULT_LINE_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), TYPE_RESULT_LINE))
#define RESULT_LINE_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), TYPE_RESULT_LINE, ResultLineClass))

typedef struct _ResultLine ResultLine;
typedef struct _ResultLineClass ResultLineClass;
typedef struct _Block4Data Block4Data;
typedef struct _Block5Data Block5Data;
typedef struct _Block6Data Block6Data;
typedef struct _ControllerUpdateResultsData ControllerUpdateResultsData;
#define _g_string_free0(var) ((var == NULL) ? NULL : (var = (g_string_free (var, TRUE), NULL)))

#define TYPE_NASC_ELEMENT (nasc_element_get_type ())
#define NASC_ELEMENT(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), TYPE_NASC_ELEMENT, NascElement))
#define NASC_ELEMENT_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), TYPE_NASC_ELEMENT, NascElementClass))
#define IS_NASC_ELEMENT(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), TYPE_NASC_ELEMENT))
#define IS_NASC_ELEMENT_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), TYPE_NASC_ELEMENT))
#define NASC_ELEMENT_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), TYPE_NASC_ELEMENT, NascElementClass))

typedef struct _NascElement NascElement;
typedef struct _NascElementClass NascElementClass;

#define TYPE_NASC_FUNCTION (nasc_function_get_type ())
#define NASC_FUNCTION(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), TYPE_NASC_FUNCTION, NascFunction))
#define NASC_FUNCTION_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), TYPE_NASC_FUNCTION, NascFunctionClass))
#define IS_NASC_FUNCTION(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), TYPE_NASC_FUNCTION))
#define IS_NASC_FUNCTION_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), TYPE_NASC_FUNCTION))
#define NASC_FUNCTION_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), TYPE_NASC_FUNCTION, NascFunctionClass))

typedef struct _NascFunction NascFunction;
typedef struct _NascFunctionClass NascFunctionClass;
typedef struct _NascElementPrivate NascElementPrivate;

#define TYPE_NASC_VARIABEL (nasc_variabel_get_type ())
#define NASC_VARIABEL(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), TYPE_NASC_VARIABEL, NascVariabel))
#define NASC_VARIABEL_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), TYPE_NASC_VARIABEL, NascVariabelClass))
#define IS_NASC_VARIABEL(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), TYPE_NASC_VARIABEL))
#define IS_NASC_VARIABEL_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), TYPE_NASC_VARIABEL))
#define NASC_VARIABEL_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), TYPE_NASC_VARIABEL, NascVariabelClass))

typedef struct _NascVariabel NascVariabel;
typedef struct _NascVariabelClass NascVariabelClass;

struct _NascSheet {
	GraniteWidgetsSourceListItem parent_instance;
	NascSheetPrivate * priv;
	gchar* content;
	gint index;
};

struct _NascSheetClass {
	GraniteWidgetsSourceListItemClass parent_class;
};

struct _Controller {
	GObject parent_instance;
	ControllerPrivate * priv;
	Calculator* calculator;
};

struct _ControllerClass {
	GObjectClass parent_class;
};

struct _ControllerPrivate {
	InputView* _input;
	ResultView* _results;
	NascSettings* _settings;
	GRegex* digit_regex;
	gint override_line;
	gboolean calc_lock;
	GeeArrayList* enable_calc;
	GeeArrayList* sheet_list;
	NascSheet* _actual_sheet;
	GeeLinkedList* removal_list;
	gchar* sheet_path;
	gchar* _sheets;
};

struct _Block3Data {
	int _ref_count_;
	Controller* self;
	InputView* input;
	ResultView* results;
};

struct _InputView {
	GtkBox parent_instance;
	InputViewPrivate * priv;
	GtkSourceBuffer* buffer;
	GtkSourceView* source_view;
	GeeArrayList* operators;
	gboolean skip_change;
	gboolean scroll_needed;
};

struct _InputViewClass {
	GtkBoxClass parent_class;
};

struct _Block4Data {
	int _ref_count_;
	Controller* self;
	gpointer _async_data_;
};

struct _Block5Data {
	int _ref_count_;
	Block4Data * _data4_;
	gint i;
};

struct _Block6Data {
	int _ref_count_;
	Block5Data * _data5_;
	gchar* _result_;
	guint spinner_handle;
};

struct _ControllerUpdateResultsData {
	int _state_;
	GObject* _source_object_;
	GAsyncResult* _res_;
	GSimpleAsyncResult* _async_result;
	Controller* self;
	gint line;
	gint total_lines;
	gchar* text;
	Block4Data* _data4_;
	gboolean _tmp0_;
	Calculator* _tmp1_;
	GCancellable* _tmp2_;
	GCancellable* _tmp3_;
	gboolean _tmp4_;
	Calculator* _tmp5_;
	GCancellable* _tmp6_;
	GCancellable* _tmp7_;
	gchar** line_texts;
	const gchar* _tmp8_;
	gchar** _tmp9_;
	gchar** _tmp10_;
	gint line_texts_length1;
	gint _line_texts_size_;
	gint index;
	ResultView* _tmp11_;
	GeeArrayList* _tmp12_;
	GeeArrayList* _tmp13_;
	gint _tmp14_;
	gint _tmp15_;
	Block5Data* _data5_;
	gint _tmp16_;
	gboolean _tmp17_;
	gint _tmp18_;
	gint _tmp19_;
	gint _tmp20_;
	gboolean _tmp21_;
	gchar** _tmp22_;
	gint _tmp22__length1;
	gint _tmp23_;
	const gchar* _tmp24_;
	gchar** _tmp25_;
	gint _tmp25__length1;
	gint _tmp26_;
	const gchar* _tmp27_;
	gboolean _tmp28_;
	Block6Data* _data6_;
	gchar* _tmp29_;
	Calculator* _tmp30_;
	gchar** _tmp31_;
	gint _tmp31__length1;
	gint _tmp32_;
	const gchar* _tmp33_;
	gint _tmp34_;
	gchar* _tmp35_;
	gchar* _tmp36_;
	gchar* _tmp37_;
	gchar* _tmp38_;
	guint _tmp39_;
	guint _tmp40_;
	guint _tmp41_;
	ResultView* _tmp42_;
	Calculator* _tmp43_;
	GCancellable* _tmp44_;
	GCancellable* _tmp45_;
	gboolean _tmp46_;
	ResultView* _tmp47_;
	gint _tmp48_;
	const gchar* _tmp49_;
	ResultView* _tmp50_;
	gint _tmp51_;
	gint _tmp52_;
	gint _tmp53_;
	gint _tmp54_;
	ResultView* _tmp55_;
	gint _tmp56_;
	NascSheet* _tmp57_;
	InputView* _tmp58_;
	gchar* _tmp59_;
};

struct _NascElement {
	GObject parent_instance;
	NascElementPrivate * priv;
	gint index;
	gchar* name;
	gchar* title;
	gchar* category;
	gchar* desc;
};

struct _NascElementClass {
	GObjectClass parent_class;
};


static gpointer nasc_sheet_parent_class = NULL;
static gpointer controller_parent_class = NULL;

GType nasc_sheet_get_type (void) G_GNUC_CONST;
enum  {
	NASC_SHEET_DUMMY_PROPERTY
};
NascSheet* nasc_sheet_new (const gchar* name, const gchar* content);
NascSheet* nasc_sheet_construct (GType object_type, const gchar* name, const gchar* content);
static void __lambda28_ (NascSheet* self, const gchar* s);
static void ___lambda28__granite_widgets_source_list_item_edited (GraniteWidgetsSourceListItem* _sender, const gchar* new_name, gpointer self);
static void nasc_sheet_finalize (GObject* obj);
GType controller_get_type (void) G_GNUC_CONST;
GType calculator_get_type (void) G_GNUC_CONST;
GType input_view_get_type (void) G_GNUC_CONST;
GType result_view_get_type (void) G_GNUC_CONST;
GType nasc_settings_get_type (void) G_GNUC_CONST;
#define CONTROLLER_GET_PRIVATE(o) (G_TYPE_INSTANCE_GET_PRIVATE ((o), TYPE_CONTROLLER, ControllerPrivate))
enum  {
	CONTROLLER_DUMMY_PROPERTY,
	CONTROLLER_INPUT,
	CONTROLLER_RESULTS,
	CONTROLLER_SETTINGS,
	CONTROLLER_ACTUAL_SHEET,
	CONTROLLER_SHEETS_FILE
};
#define NASC_SETTINGS_sheet_path "/.local/share/nasc/"
Controller* controller_new (InputView* input, ResultView* results);
Controller* controller_construct (GType object_type, InputView* input, ResultView* results);
static Block3Data* block3_data_ref (Block3Data* _data3_);
static void block3_data_unref (void * _userdata_);
static void controller_set_input (Controller* self, InputView* value);
static void controller_set_results (Controller* self, ResultView* value);
InputView* controller_get_input (Controller* self);
static void __lambda29_ (Controller* self, gint line, gint total_lines, const gchar* text);
static void controller_update_results (Controller* self, gint line, gint total_lines, const gchar* text, GAsyncReadyCallback _callback_, gpointer _user_data_);
static void controller_update_results_finish (Controller* self, GAsyncResult* _res_);
static void ___lambda29__input_view_changed_line (InputView* _sender, gint line, gint total_lines, const gchar* text, gpointer self);
static void __lambda33_ (Block3Data* _data3_, gint line, gint count);
void result_view_add_line (ResultView* self, gint line, gint count);
static void ___lambda33__input_view_line_added (InputView* _sender, gint starting, gint count, gpointer self);
static void __lambda34_ (Block3Data* _data3_, gint line, gint count);
void result_view_remove_line (ResultView* self, gint line, gint count);
static void ___lambda34__input_view_line_removed (InputView* _sender, gint starting, gint count, gpointer self);
static void __lambda35_ (Block3Data* _data3_, gint line);
GType result_line_get_type (void) G_GNUC_CONST;
GeeArrayList* result_view_get_result_list (ResultView* self);
void input_view_insert_variable (InputView* self, ResultLine* res);
static void ___lambda35__input_view_insert_result (InputView* _sender, gint line, gpointer self);
static void __lambda36_ (Block3Data* _data3_, gint line);
void result_view_update (ResultView* self, gint line, gboolean force);
static void ___lambda36__input_view_cursor_line_change (InputView* _sender, gint line, gpointer self);
ResultView* controller_get_results (Controller* self);
static void __lambda37_ (Block3Data* _data3_, ResultLine* res);
static void ___lambda37__result_view_insert_variable (ResultView* _sender, ResultLine* rw, gpointer self);
Calculator* calculator_new (void);
Calculator* calculator_construct (GType object_type);
#define NASC_SETTINGS_template_path "/usr/share/qalculate/nasc_template.sheets"
GeeArrayList* controller_get_sheets (Controller* self);
NascSettings* nasc_settings_get_instance (void);
gint nasc_settings_get_open_sheet (NascSettings* self);
void nasc_settings_set_open_sheet (NascSettings* self, gint value);
void controller_set_sheet (Controller* self, NascSheet* sheet);
gchar* controller_get_content (Controller* self);
gchar* input_view_get_replaced_content (InputView* self);
GeeLinkedList* controller_get_removal_list (Controller* self);
static void controller_update_results_data_free (gpointer _data);
static gboolean controller_update_results_co (ControllerUpdateResultsData* _data_);
static Block4Data* block4_data_ref (Block4Data* _data4_);
static void block4_data_unref (void * _userdata_);
GCancellable* calculator_get_cancel (Calculator* self);
static gboolean ___lambda30_ (Block4Data* _data4_);
static gboolean ____lambda30__gsource_func (gpointer self);
static Block5Data* block5_data_ref (Block5Data* _data5_);
static void block5_data_unref (void * _userdata_);
static gboolean controller_check_for_calculation (Controller* self, const gchar* input);
static Block6Data* block6_data_ref (Block6Data* _data6_);
static void block6_data_unref (void * _userdata_);
void calculator_calculate_store_variable (Calculator* self, const gchar* input, const gchar* variable, GAsyncReadyCallback _callback_, gpointer _user_data_);
gchar* calculator_calculate_store_variable_finish (Calculator* self, GAsyncResult* _res_);
#define NASC_SETTINGS_variable_names "nasc_line_"
static void ______lambda31_ (Block6Data* _data6_, GObject* obj, GAsyncResult* res);
static void _______lambda31__gasync_ready_callback (GObject* source_object, GAsyncResult* res, gpointer self);
static gboolean ______lambda32_ (Block6Data* _data6_);
void result_view_show_spinner (ResultView* self, gint line);
static gboolean _______lambda32__gsource_func (gpointer self);
void result_view_hide_spinner (ResultView* self);
void result_view_set_line (ResultView* self, gint index, const gchar* _result_);
NascSheet* controller_get_actual_sheet (Controller* self);
static void controller_set_actual_sheet (Controller* self, NascSheet* value);
void input_view_process_new_content (InputView* self);
void controller_set_content (Controller* self, const gchar* content);
const gchar* controller_get_sheets_file (Controller* self);
#define NASC_SETTINGS_sheet_split_char "|§§|"
#define NASC_SETTINGS_name_split_char "-§-"
NascSheet* controller_add_sheet (Controller* self);
void controller_remove_sheet (Controller* self, NascSheet* sheet);
void controller_undo_removal (Controller* self);
void controller_store_sheet_content (Controller* self);
void controller_set_sheets_file (Controller* self, const gchar* value);
GType nasc_element_get_type (void) G_GNUC_CONST;
GType nasc_function_get_type (void) G_GNUC_CONST;
GeeList* calculator_get_functions (Calculator* self);
GType nasc_variabel_get_type (void) G_GNUC_CONST;
GeeList* calculator_get_variables (Calculator* self);
gchar* controller_get_export_text (Controller* self);
const gchar* result_line_get_value (ResultLine* self);
static void _vala_array_add1 (gchar*** array, int* length, int* size, gchar* value);
NascSettings* controller_get_settings (Controller* self);
static void controller_set_settings (Controller* self, NascSettings* value);
static void controller_finalize (GObject* obj);
static void _vala_controller_get_property (GObject * object, guint property_id, GValue * value, GParamSpec * pspec);
static void _vala_controller_set_property (GObject * object, guint property_id, const GValue * value, GParamSpec * pspec);
static void _vala_array_destroy (gpointer array, gint array_length, GDestroyNotify destroy_func);
static void _vala_array_free (gpointer array, gint array_length, GDestroyNotify destroy_func);
static gint _vala_array_length (gpointer array);


static void __lambda28_ (NascSheet* self, const gchar* s) {
	const gchar* _tmp0_ = NULL;
	g_return_if_fail (s != NULL);
	_tmp0_ = s;
	granite_widgets_source_list_item_set_name ((GraniteWidgetsSourceListItem*) self, _tmp0_);
}


static void ___lambda28__granite_widgets_source_list_item_edited (GraniteWidgetsSourceListItem* _sender, const gchar* new_name, gpointer self) {
	__lambda28_ ((NascSheet*) self, new_name);
}


NascSheet* nasc_sheet_construct (GType object_type, const gchar* name, const gchar* content) {
	NascSheet * self = NULL;
	const gchar* _tmp0_ = NULL;
	const gchar* _tmp1_ = NULL;
	gchar* _tmp2_ = NULL;
	GThemedIcon* _tmp3_ = NULL;
	GThemedIcon* _tmp4_ = NULL;
	g_return_val_if_fail (name != NULL, NULL);
	g_return_val_if_fail (content != NULL, NULL);
	self = (NascSheet*) granite_widgets_source_list_item_construct (object_type, "");
	granite_widgets_source_list_item_set_editable ((GraniteWidgetsSourceListItem*) self, TRUE);
	_tmp0_ = name;
	granite_widgets_source_list_item_set_name ((GraniteWidgetsSourceListItem*) self, _tmp0_);
	_tmp1_ = content;
	_tmp2_ = g_strdup (_tmp1_);
	_g_free0 (self->content);
	self->content = _tmp2_;
	_tmp3_ = (GThemedIcon*) g_themed_icon_new ("document");
	_tmp4_ = _tmp3_;
	granite_widgets_source_list_item_set_icon ((GraniteWidgetsSourceListItem*) self, (GIcon*) _tmp4_);
	_g_object_unref0 (_tmp4_);
	g_signal_connect_object ((GraniteWidgetsSourceListItem*) self, "edited", (GCallback) ___lambda28__granite_widgets_source_list_item_edited, self, 0);
	return self;
}


NascSheet* nasc_sheet_new (const gchar* name, const gchar* content) {
	return nasc_sheet_construct (TYPE_NASC_SHEET, name, content);
}


static void nasc_sheet_class_init (NascSheetClass * klass) {
	nasc_sheet_parent_class = g_type_class_peek_parent (klass);
	G_OBJECT_CLASS (klass)->finalize = nasc_sheet_finalize;
}


static void nasc_sheet_instance_init (NascSheet * self) {
}


static void nasc_sheet_finalize (GObject* obj) {
	NascSheet * self;
	self = G_TYPE_CHECK_INSTANCE_CAST (obj, TYPE_NASC_SHEET, NascSheet);
	_g_free0 (self->content);
	G_OBJECT_CLASS (nasc_sheet_parent_class)->finalize (obj);
}


GType nasc_sheet_get_type (void) {
	static volatile gsize nasc_sheet_type_id__volatile = 0;
	if (g_once_init_enter (&nasc_sheet_type_id__volatile)) {
		static const GTypeInfo g_define_type_info = { sizeof (NascSheetClass), (GBaseInitFunc) NULL, (GBaseFinalizeFunc) NULL, (GClassInitFunc) nasc_sheet_class_init, (GClassFinalizeFunc) NULL, NULL, sizeof (NascSheet), 0, (GInstanceInitFunc) nasc_sheet_instance_init, NULL };
		GType nasc_sheet_type_id;
		nasc_sheet_type_id = g_type_register_static (GRANITE_WIDGETS_SOURCE_LIST_TYPE_ITEM, "NascSheet", &g_define_type_info, 0);
		g_once_init_leave (&nasc_sheet_type_id__volatile, nasc_sheet_type_id);
	}
	return nasc_sheet_type_id__volatile;
}


static gpointer _g_object_ref0 (gpointer self) {
	return self ? g_object_ref (self) : NULL;
}


static Block3Data* block3_data_ref (Block3Data* _data3_) {
	g_atomic_int_inc (&_data3_->_ref_count_);
	return _data3_;
}


static void block3_data_unref (void * _userdata_) {
	Block3Data* _data3_;
	_data3_ = (Block3Data*) _userdata_;
	if (g_atomic_int_dec_and_test (&_data3_->_ref_count_)) {
		Controller* self;
		self = _data3_->self;
		_g_object_unref0 (_data3_->input);
		_g_object_unref0 (_data3_->results);
		_g_object_unref0 (self);
		g_slice_free (Block3Data, _data3_);
	}
}


static void __lambda29_ (Controller* self, gint line, gint total_lines, const gchar* text) {
	gint _tmp0_ = 0;
	gint _tmp1_ = 0;
	const gchar* _tmp2_ = NULL;
	g_return_if_fail (text != NULL);
	_tmp0_ = line;
	_tmp1_ = total_lines;
	_tmp2_ = text;
	controller_update_results (self, _tmp0_, _tmp1_, _tmp2_, NULL, NULL);
}


static void ___lambda29__input_view_changed_line (InputView* _sender, gint line, gint total_lines, const gchar* text, gpointer self) {
	__lambda29_ ((Controller*) self, line, total_lines, text);
}


static void __lambda33_ (Block3Data* _data3_, gint line, gint count) {
	Controller* self;
	ResultView* _tmp0_ = NULL;
	gint _tmp1_ = 0;
	gint _tmp2_ = 0;
	self = _data3_->self;
	_tmp0_ = _data3_->results;
	_tmp1_ = line;
	_tmp2_ = count;
	result_view_add_line (_tmp0_, _tmp1_, _tmp2_);
}


static void ___lambda33__input_view_line_added (InputView* _sender, gint starting, gint count, gpointer self) {
	__lambda33_ (self, starting, count);
}


static void __lambda34_ (Block3Data* _data3_, gint line, gint count) {
	Controller* self;
	ResultView* _tmp0_ = NULL;
	gint _tmp1_ = 0;
	gint _tmp2_ = 0;
	self = _data3_->self;
	_tmp0_ = _data3_->results;
	_tmp1_ = line;
	_tmp2_ = count;
	result_view_remove_line (_tmp0_, _tmp1_, _tmp2_);
}


static void ___lambda34__input_view_line_removed (InputView* _sender, gint starting, gint count, gpointer self) {
	__lambda34_ (self, starting, count);
}


static void __lambda35_ (Block3Data* _data3_, gint line) {
	Controller* self;
	gint _tmp0_ = 0;
	ResultView* _tmp1_ = NULL;
	GeeArrayList* _tmp2_ = NULL;
	GeeArrayList* _tmp3_ = NULL;
	gint _tmp4_ = 0;
	gint _tmp5_ = 0;
	ResultLine* res = NULL;
	ResultView* _tmp6_ = NULL;
	GeeArrayList* _tmp7_ = NULL;
	GeeArrayList* _tmp8_ = NULL;
	gint _tmp9_ = 0;
	gpointer _tmp10_ = NULL;
	ResultLine* _tmp11_ = NULL;
	InputView* _tmp12_ = NULL;
	ResultLine* _tmp13_ = NULL;
	self = _data3_->self;
	_tmp0_ = line;
	_tmp1_ = _data3_->results;
	_tmp2_ = result_view_get_result_list (_tmp1_);
	_tmp3_ = _tmp2_;
	_tmp4_ = gee_abstract_collection_get_size ((GeeCollection*) _tmp3_);
	_tmp5_ = _tmp4_;
	if (_tmp0_ >= _tmp5_) {
		return;
	}
	_tmp6_ = _data3_->results;
	_tmp7_ = result_view_get_result_list (_tmp6_);
	_tmp8_ = _tmp7_;
	_tmp9_ = line;
	_tmp10_ = gee_abstract_list_get ((GeeAbstractList*) _tmp8_, _tmp9_);
	res = (ResultLine*) _tmp10_;
	_tmp11_ = res;
	if (_tmp11_ == NULL) {
		_g_object_unref0 (res);
		return;
	}
	_tmp12_ = _data3_->input;
	_tmp13_ = res;
	input_view_insert_variable (_tmp12_, _tmp13_);
	_g_object_unref0 (res);
}


static void ___lambda35__input_view_insert_result (InputView* _sender, gint line, gpointer self) {
	__lambda35_ (self, line);
}


static void __lambda36_ (Block3Data* _data3_, gint line) {
	Controller* self;
	ResultView* _tmp0_ = NULL;
	gint _tmp1_ = 0;
	self = _data3_->self;
	_tmp0_ = _data3_->results;
	_tmp1_ = line;
	result_view_update (_tmp0_, _tmp1_, TRUE);
}


static void ___lambda36__input_view_cursor_line_change (InputView* _sender, gint line, gpointer self) {
	__lambda36_ (self, line);
}


static void __lambda37_ (Block3Data* _data3_, ResultLine* res) {
	Controller* self;
	InputView* _tmp0_ = NULL;
	InputView* _tmp1_ = NULL;
	ResultLine* _tmp2_ = NULL;
	InputView* _tmp3_ = NULL;
	self = _data3_->self;
	g_return_if_fail (res != NULL);
	_tmp0_ = _data3_->input;
	_tmp0_->skip_change = TRUE;
	_tmp1_ = _data3_->input;
	_tmp2_ = res;
	input_view_insert_variable (_tmp1_, _tmp2_);
	_tmp3_ = _data3_->input;
	_tmp3_->skip_change = FALSE;
}


static void ___lambda37__result_view_insert_variable (ResultView* _sender, ResultLine* rw, gpointer self) {
	__lambda37_ (self, rw);
}


Controller* controller_construct (GType object_type, InputView* input, ResultView* results) {
	Controller * self = NULL;
	Block3Data* _data3_;
	InputView* _tmp0_ = NULL;
	InputView* _tmp1_ = NULL;
	ResultView* _tmp2_ = NULL;
	ResultView* _tmp3_ = NULL;
	InputView* _tmp4_ = NULL;
	GeeArrayList* _tmp5_ = NULL;
	GeeArrayList* _tmp6_ = NULL;
	GeeLinkedList* _tmp7_ = NULL;
	GeeArrayList* _tmp8_ = NULL;
	InputView* _tmp12_ = NULL;
	ResultView* _tmp13_ = NULL;
	InputView* _tmp14_ = NULL;
	InputView* _tmp15_ = NULL;
	InputView* _tmp16_ = NULL;
	InputView* _tmp17_ = NULL;
	InputView* _tmp18_ = NULL;
	ResultView* _tmp19_ = NULL;
	Calculator* _tmp20_ = NULL;
	GFile* file = NULL;
	const gchar* _tmp21_ = NULL;
	GFile* _tmp22_ = NULL;
	GFile* _tmp23_ = NULL;
	gboolean _tmp24_ = FALSE;
	GeeArrayList* _tmp39_ = NULL;
	GeeArrayList* _tmp40_ = NULL;
	NascSettings* _tmp41_ = NULL;
	NascSettings* _tmp42_ = NULL;
	gint _tmp43_ = 0;
	gint _tmp44_ = 0;
	GeeArrayList* _tmp45_ = NULL;
	gint _tmp46_ = 0;
	gint _tmp47_ = 0;
	gboolean _tmp48_ = FALSE;
	GeeArrayList* _tmp54_ = NULL;
	NascSettings* _tmp55_ = NULL;
	NascSettings* _tmp56_ = NULL;
	gint _tmp57_ = 0;
	gint _tmp58_ = 0;
	gpointer _tmp59_ = NULL;
	NascSheet* _tmp60_ = NULL;
	GError * _inner_error_ = NULL;
	g_return_val_if_fail (input != NULL, NULL);
	g_return_val_if_fail (results != NULL, NULL);
	_data3_ = g_slice_new0 (Block3Data);
	_data3_->_ref_count_ = 1;
	_tmp0_ = input;
	_tmp1_ = _g_object_ref0 (_tmp0_);
	_g_object_unref0 (_data3_->input);
	_data3_->input = _tmp1_;
	_tmp2_ = results;
	_tmp3_ = _g_object_ref0 (_tmp2_);
	_g_object_unref0 (_data3_->results);
	_data3_->results = _tmp3_;
	self = (Controller*) g_object_new (object_type, NULL);
	_data3_->self = g_object_ref (self);
	_tmp4_ = _data3_->input;
	_tmp5_ = _tmp4_->operators;
	_tmp6_ = _g_object_ref0 (_tmp5_);
	_g_object_unref0 (self->priv->enable_calc);
	self->priv->enable_calc = _tmp6_;
	_tmp7_ = gee_linked_list_new (TYPE_NASC_SHEET, (GBoxedCopyFunc) g_object_ref, g_object_unref, NULL, NULL, NULL);
	_g_object_unref0 (self->priv->removal_list);
	self->priv->removal_list = _tmp7_;
	_tmp8_ = self->priv->enable_calc;
	gee_abstract_collection_add ((GeeAbstractCollection*) _tmp8_, " to ");
	{
		GRegex* _tmp9_ = NULL;
		GRegex* _tmp10_ = NULL;
		GRegex* _tmp11_ = NULL;
		_tmp10_ = g_regex_new ("\\d", G_REGEX_OPTIMIZE, 0, &_inner_error_);
		_tmp9_ = _tmp10_;
		if (G_UNLIKELY (_inner_error_ != NULL)) {
			if (_inner_error_->domain == G_REGEX_ERROR) {
				goto __catch7_g_regex_error;
			}
			block3_data_unref (_data3_);
			_data3_ = NULL;
			g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
			g_clear_error (&_inner_error_);
			return NULL;
		}
		_tmp11_ = _tmp9_;
		_tmp9_ = NULL;
		_g_regex_unref0 (self->priv->digit_regex);
		self->priv->digit_regex = _tmp11_;
		_g_regex_unref0 (_tmp9_);
	}
	goto __finally7;
	__catch7_g_regex_error:
	{
		GError* ex = NULL;
		ex = _inner_error_;
		_inner_error_ = NULL;
		_g_error_free0 (ex);
	}
	__finally7:
	if (G_UNLIKELY (_inner_error_ != NULL)) {
		block3_data_unref (_data3_);
		_data3_ = NULL;
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return NULL;
	}
	_tmp12_ = _data3_->input;
	controller_set_input (self, _tmp12_);
	_tmp13_ = _data3_->results;
	controller_set_results (self, _tmp13_);
	_tmp14_ = self->priv->_input;
	g_signal_connect_object (_tmp14_, "changed-line", (GCallback) ___lambda29__input_view_changed_line, self, 0);
	_tmp15_ = self->priv->_input;
	g_signal_connect_data (_tmp15_, "line-added", (GCallback) ___lambda33__input_view_line_added, block3_data_ref (_data3_), (GClosureNotify) block3_data_unref, 0);
	_tmp16_ = self->priv->_input;
	g_signal_connect_data (_tmp16_, "line-removed", (GCallback) ___lambda34__input_view_line_removed, block3_data_ref (_data3_), (GClosureNotify) block3_data_unref, 0);
	_tmp17_ = self->priv->_input;
	g_signal_connect_data (_tmp17_, "insert-result", (GCallback) ___lambda35__input_view_insert_result, block3_data_ref (_data3_), (GClosureNotify) block3_data_unref, 0);
	_tmp18_ = self->priv->_input;
	g_signal_connect_data (_tmp18_, "cursor-line-change", (GCallback) ___lambda36__input_view_cursor_line_change, block3_data_ref (_data3_), (GClosureNotify) block3_data_unref, 0);
	_tmp19_ = self->priv->_results;
	g_signal_connect_data (_tmp19_, "insert-variable", (GCallback) ___lambda37__result_view_insert_variable, block3_data_ref (_data3_), (GClosureNotify) block3_data_unref, 0);
	_tmp20_ = calculator_new ();
	_g_object_unref0 (self->calculator);
	self->calculator = _tmp20_;
	g_debug ("Controller.vala:139: loading sheets");
	_tmp21_ = self->priv->sheet_path;
	_tmp22_ = g_file_new_for_path (_tmp21_);
	file = _tmp22_;
	_tmp23_ = file;
	_tmp24_ = g_file_query_exists (_tmp23_, NULL);
	if (!_tmp24_) {
		{
			GFile* dir = NULL;
			const gchar* _tmp25_ = NULL;
			gchar* _tmp26_ = NULL;
			gchar* _tmp27_ = NULL;
			GFile* _tmp28_ = NULL;
			GFile* _tmp29_ = NULL;
			GFile* _tmp30_ = NULL;
			gboolean _tmp31_ = FALSE;
			GFile* template_file = NULL;
			GFile* _tmp33_ = NULL;
			GFile* _tmp34_ = NULL;
			GFile* _tmp35_ = NULL;
			_tmp25_ = g_get_home_dir ();
			_tmp26_ = g_strconcat (_tmp25_, NASC_SETTINGS_sheet_path, NULL);
			_tmp27_ = _tmp26_;
			_tmp28_ = g_file_new_for_path (_tmp27_);
			_tmp29_ = _tmp28_;
			_g_free0 (_tmp27_);
			dir = _tmp29_;
			_tmp30_ = dir;
			_tmp31_ = g_file_query_exists (_tmp30_, NULL);
			if (!_tmp31_) {
				GFile* _tmp32_ = NULL;
				_tmp32_ = dir;
				g_file_make_directory (_tmp32_, NULL, &_inner_error_);
				if (G_UNLIKELY (_inner_error_ != NULL)) {
					_g_object_unref0 (dir);
					goto __catch8_g_error;
				}
			}
			_tmp33_ = g_file_new_for_path (NASC_SETTINGS_template_path);
			template_file = _tmp33_;
			_tmp34_ = template_file;
			_tmp35_ = file;
			g_file_copy (_tmp34_, _tmp35_, G_FILE_COPY_NONE, NULL, NULL, NULL, &_inner_error_);
			if (G_UNLIKELY (_inner_error_ != NULL)) {
				_g_object_unref0 (template_file);
				_g_object_unref0 (dir);
				goto __catch8_g_error;
			}
			_g_object_unref0 (template_file);
			_g_object_unref0 (dir);
		}
		goto __finally8;
		__catch8_g_error:
		{
			GError* e = NULL;
			FILE* _tmp36_ = NULL;
			GError* _tmp37_ = NULL;
			const gchar* _tmp38_ = NULL;
			e = _inner_error_;
			_inner_error_ = NULL;
			_tmp36_ = stderr;
			_tmp37_ = e;
			_tmp38_ = _tmp37_->message;
			fprintf (_tmp36_, "Error: %s\n", _tmp38_);
			_g_error_free0 (e);
		}
		__finally8:
		if (G_UNLIKELY (_inner_error_ != NULL)) {
			_g_object_unref0 (file);
			block3_data_unref (_data3_);
			_data3_ = NULL;
			g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
			g_clear_error (&_inner_error_);
			return NULL;
		}
	}
	g_debug ("Controller.vala:159: getting sheets");
	_tmp39_ = controller_get_sheets (self);
	_tmp40_ = _tmp39_;
	_g_object_unref0 (_tmp40_);
	_tmp41_ = nasc_settings_get_instance ();
	_tmp42_ = _tmp41_;
	_tmp43_ = nasc_settings_get_open_sheet (_tmp42_);
	_tmp44_ = _tmp43_;
	_tmp45_ = self->priv->sheet_list;
	_tmp46_ = gee_abstract_collection_get_size ((GeeCollection*) _tmp45_);
	_tmp47_ = _tmp46_;
	_tmp48_ = _tmp44_ >= _tmp47_;
	_g_object_unref0 (_tmp42_);
	if (_tmp48_) {
		NascSettings* _tmp49_ = NULL;
		NascSettings* _tmp50_ = NULL;
		GeeArrayList* _tmp51_ = NULL;
		gint _tmp52_ = 0;
		gint _tmp53_ = 0;
		_tmp49_ = nasc_settings_get_instance ();
		_tmp50_ = _tmp49_;
		_tmp51_ = self->priv->sheet_list;
		_tmp52_ = gee_abstract_collection_get_size ((GeeCollection*) _tmp51_);
		_tmp53_ = _tmp52_;
		nasc_settings_set_open_sheet (_tmp50_, _tmp53_ - 1);
		_g_object_unref0 (_tmp50_);
	}
	g_debug ("Controller.vala:166: set last sheet");
	_tmp54_ = self->priv->sheet_list;
	_tmp55_ = nasc_settings_get_instance ();
	_tmp56_ = _tmp55_;
	_tmp57_ = nasc_settings_get_open_sheet (_tmp56_);
	_tmp58_ = _tmp57_;
	_tmp59_ = gee_abstract_list_get ((GeeAbstractList*) _tmp54_, _tmp58_);
	_tmp60_ = (NascSheet*) _tmp59_;
	controller_set_sheet (self, _tmp60_);
	_g_object_unref0 (_tmp60_);
	_g_object_unref0 (_tmp56_);
	_g_object_unref0 (file);
	block3_data_unref (_data3_);
	_data3_ = NULL;
	return self;
}


Controller* controller_new (InputView* input, ResultView* results) {
	return controller_construct (TYPE_CONTROLLER, input, results);
}


gchar* controller_get_content (Controller* self) {
	gchar* result = NULL;
	InputView* _tmp0_ = NULL;
	gchar* _tmp1_ = NULL;
	g_return_val_if_fail (self != NULL, NULL);
	_tmp0_ = self->priv->_input;
	_tmp1_ = input_view_get_replaced_content (_tmp0_);
	result = _tmp1_;
	return result;
}


GeeLinkedList* controller_get_removal_list (Controller* self) {
	GeeLinkedList* result = NULL;
	GeeLinkedList* _tmp0_ = NULL;
	GeeLinkedList* _tmp1_ = NULL;
	g_return_val_if_fail (self != NULL, NULL);
	_tmp0_ = self->priv->removal_list;
	_tmp1_ = _g_object_ref0 (_tmp0_);
	result = _tmp1_;
	return result;
}


static void controller_update_results_data_free (gpointer _data) {
	ControllerUpdateResultsData* _data_;
	_data_ = _data;
	_g_free0 (_data_->text);
	_g_object_unref0 (_data_->self);
	g_slice_free (ControllerUpdateResultsData, _data_);
}


static void controller_update_results (Controller* self, gint line, gint total_lines, const gchar* text, GAsyncReadyCallback _callback_, gpointer _user_data_) {
	ControllerUpdateResultsData* _data_;
	Controller* _tmp0_ = NULL;
	gint _tmp1_ = 0;
	gint _tmp2_ = 0;
	const gchar* _tmp3_ = NULL;
	gchar* _tmp4_ = NULL;
	_data_ = g_slice_new0 (ControllerUpdateResultsData);
	_data_->_async_result = g_simple_async_result_new (G_OBJECT (self), _callback_, _user_data_, controller_update_results);
	g_simple_async_result_set_op_res_gpointer (_data_->_async_result, _data_, controller_update_results_data_free);
	_tmp0_ = _g_object_ref0 (self);
	_data_->self = _tmp0_;
	_tmp1_ = line;
	_data_->line = _tmp1_;
	_tmp2_ = total_lines;
	_data_->total_lines = _tmp2_;
	_tmp3_ = text;
	_tmp4_ = g_strdup (_tmp3_);
	_g_free0 (_data_->text);
	_data_->text = _tmp4_;
	controller_update_results_co (_data_);
}


static void controller_update_results_finish (Controller* self, GAsyncResult* _res_) {
	ControllerUpdateResultsData* _data_;
	_data_ = g_simple_async_result_get_op_res_gpointer (G_SIMPLE_ASYNC_RESULT (_res_));
}


static Block4Data* block4_data_ref (Block4Data* _data4_) {
	g_atomic_int_inc (&_data4_->_ref_count_);
	return _data4_;
}


static void block4_data_unref (void * _userdata_) {
	Block4Data* _data4_;
	_data4_ = (Block4Data*) _userdata_;
	if (g_atomic_int_dec_and_test (&_data4_->_ref_count_)) {
		Controller* self;
		self = _data4_->self;
		_g_object_unref0 (self);
		g_slice_free (Block4Data, _data4_);
	}
}


static gboolean ___lambda30_ (Block4Data* _data4_) {
	Controller* self;
	gboolean result = FALSE;
	self = _data4_->self;
	controller_update_results_co (_data4_->_async_data_);
	result = FALSE;
	return result;
}


static gboolean ____lambda30__gsource_func (gpointer self) {
	gboolean result;
	result = ___lambda30_ (self);
	return result;
}


static Block5Data* block5_data_ref (Block5Data* _data5_) {
	g_atomic_int_inc (&_data5_->_ref_count_);
	return _data5_;
}


static void block5_data_unref (void * _userdata_) {
	Block5Data* _data5_;
	_data5_ = (Block5Data*) _userdata_;
	if (g_atomic_int_dec_and_test (&_data5_->_ref_count_)) {
		Controller* self;
		self = _data5_->_data4_->self;
		block4_data_unref (_data5_->_data4_);
		_data5_->_data4_ = NULL;
		g_slice_free (Block5Data, _data5_);
	}
}


static Block6Data* block6_data_ref (Block6Data* _data6_) {
	g_atomic_int_inc (&_data6_->_ref_count_);
	return _data6_;
}


static void block6_data_unref (void * _userdata_) {
	Block6Data* _data6_;
	_data6_ = (Block6Data*) _userdata_;
	if (g_atomic_int_dec_and_test (&_data6_->_ref_count_)) {
		Controller* self;
		self = _data6_->_data5_->_data4_->self;
		_g_free0 (_data6_->_result_);
		block5_data_unref (_data6_->_data5_);
		_data6_->_data5_ = NULL;
		g_slice_free (Block6Data, _data6_);
	}
}


static void ______lambda31_ (Block6Data* _data6_, GObject* obj, GAsyncResult* res) {
	Block5Data* _data5_;
	Block4Data* _data4_;
	Controller* self;
	Calculator* _tmp0_ = NULL;
	GAsyncResult* _tmp1_ = NULL;
	gchar* _tmp2_ = NULL;
	_data5_ = _data6_->_data5_;
	_data4_ = _data5_->_data4_;
	self = _data4_->self;
	g_return_if_fail (res != NULL);
	_tmp0_ = self->calculator;
	_tmp1_ = res;
	_tmp2_ = calculator_calculate_store_variable_finish (_tmp0_, _tmp1_);
	_g_free0 (_data6_->_result_);
	_data6_->_result_ = _tmp2_;
	controller_update_results_co (_data4_->_async_data_);
}


static void _______lambda31__gasync_ready_callback (GObject* source_object, GAsyncResult* res, gpointer self) {
	______lambda31_ (self, source_object, res);
	block6_data_unref (self);
}


static gboolean ______lambda32_ (Block6Data* _data6_) {
	Block5Data* _data5_;
	Block4Data* _data4_;
	Controller* self;
	gboolean result = FALSE;
	ResultView* _tmp0_ = NULL;
	gint _tmp1_ = 0;
	_data5_ = _data6_->_data5_;
	_data4_ = _data5_->_data4_;
	self = _data4_->self;
	_data6_->spinner_handle = (guint) 0;
	_tmp0_ = self->priv->_results;
	_tmp1_ = _data5_->i;
	result_view_show_spinner (_tmp0_, _tmp1_);
	result = FALSE;
	return result;
}


static gboolean _______lambda32__gsource_func (gpointer self) {
	gboolean result;
	result = ______lambda32_ (self);
	return result;
}


static gboolean controller_update_results_co (ControllerUpdateResultsData* _data_) {
	switch (_data_->_state_) {
		case 0:
		goto _state_0;
		case 1:
		goto _state_1;
		case 2:
		goto _state_2;
		default:
		g_assert_not_reached ();
	}
	_state_0:
	_data_->_data4_ = g_slice_new0 (Block4Data);
	_data_->_data4_->_ref_count_ = 1;
	_data_->_data4_->self = g_object_ref (_data_->self);
	_data_->_data4_->_async_data_ = _data_;
	_data_->_tmp0_ = FALSE;
	_data_->_tmp0_ = _data_->self->priv->calc_lock;
	if (_data_->_tmp0_) {
		_data_->_tmp1_ = NULL;
		_data_->_tmp1_ = _data_->self->calculator;
		_data_->_tmp2_ = NULL;
		_data_->_tmp2_ = calculator_get_cancel (_data_->_tmp1_);
		_data_->_tmp3_ = NULL;
		_data_->_tmp3_ = _data_->_tmp2_;
		g_cancellable_cancel (_data_->_tmp3_);
	}
	while (TRUE) {
		_data_->_tmp4_ = FALSE;
		_data_->_tmp4_ = _data_->self->priv->calc_lock;
		if (!_data_->_tmp4_) {
			break;
		}
		g_timeout_add_full (G_PRIORITY_DEFAULT, (guint) 10, ____lambda30__gsource_func, block4_data_ref (_data_->_data4_), block4_data_unref);
		_data_->_state_ = 1;
		return FALSE;
		_state_1:
		;
	}
	_data_->self->priv->calc_lock = TRUE;
	_data_->_tmp5_ = NULL;
	_data_->_tmp5_ = _data_->self->calculator;
	_data_->_tmp6_ = NULL;
	_data_->_tmp6_ = calculator_get_cancel (_data_->_tmp5_);
	_data_->_tmp7_ = NULL;
	_data_->_tmp7_ = _data_->_tmp6_;
	g_cancellable_reset (_data_->_tmp7_);
	_data_->_tmp8_ = NULL;
	_data_->_tmp8_ = _data_->text;
	_data_->_tmp9_ = NULL;
	_data_->_tmp10_ = NULL;
	_data_->_tmp10_ = _data_->_tmp9_ = g_strsplit (_data_->_tmp8_, "\n", 0);
	_data_->line_texts_length1 = 0;
	_data_->_line_texts_size_ = 0;
	_data_->line_texts = _data_->_tmp10_;
	_data_->line_texts_length1 = _vala_array_length (_data_->_tmp9_);
	_data_->_line_texts_size_ = _data_->line_texts_length1;
	_data_->index = 0;
	_data_->_tmp11_ = NULL;
	_data_->_tmp11_ = _data_->self->priv->_results;
	_data_->_tmp12_ = NULL;
	_data_->_tmp12_ = result_view_get_result_list (_data_->_tmp11_);
	_data_->_tmp13_ = NULL;
	_data_->_tmp13_ = _data_->_tmp12_;
	_data_->_tmp14_ = 0;
	_data_->_tmp14_ = gee_abstract_collection_get_size ((GeeCollection*) _data_->_tmp13_);
	_data_->_tmp15_ = 0;
	_data_->_tmp15_ = _data_->_tmp14_;
	_data_->total_lines = _data_->_tmp15_;
	{
		_data_->_data5_ = g_slice_new0 (Block5Data);
		_data_->_data5_->_ref_count_ = 1;
		_data_->_data5_->_data4_ = block4_data_ref (_data_->_data4_);
		_data_->_tmp16_ = 0;
		_data_->_tmp16_ = _data_->line;
		_data_->_data5_->i = _data_->_tmp16_;
		{
			_data_->_tmp17_ = TRUE;
			while (TRUE) {
				if (!_data_->_tmp17_) {
					_data_->_tmp18_ = 0;
					_data_->_tmp18_ = _data_->_data5_->i;
					_data_->_data5_->i = _data_->_tmp18_ + 1;
				}
				_data_->_tmp17_ = FALSE;
				_data_->_tmp19_ = 0;
				_data_->_tmp19_ = _data_->_data5_->i;
				_data_->_tmp20_ = 0;
				_data_->_tmp20_ = _data_->total_lines;
				if (!(_data_->_tmp19_ < _data_->_tmp20_)) {
					break;
				}
				_data_->_tmp22_ = NULL;
				_data_->_tmp22__length1 = 0;
				_data_->_tmp22_ = _data_->line_texts;
				_data_->_tmp22__length1 = _data_->line_texts_length1;
				_data_->_tmp23_ = 0;
				_data_->_tmp23_ = _data_->index;
				_data_->_tmp24_ = NULL;
				_data_->_tmp24_ = _data_->_tmp22_[_data_->_tmp23_];
				if (_data_->_tmp24_ != NULL) {
					_data_->_tmp25_ = NULL;
					_data_->_tmp25__length1 = 0;
					_data_->_tmp25_ = _data_->line_texts;
					_data_->_tmp25__length1 = _data_->line_texts_length1;
					_data_->_tmp26_ = 0;
					_data_->_tmp26_ = _data_->index;
					_data_->_tmp27_ = NULL;
					_data_->_tmp27_ = _data_->_tmp25_[_data_->_tmp26_];
					_data_->_tmp28_ = FALSE;
					_data_->_tmp28_ = controller_check_for_calculation (_data_->self, _data_->_tmp27_);
					_data_->_tmp21_ = _data_->_tmp28_;
				} else {
					_data_->_tmp21_ = FALSE;
				}
				if (_data_->_tmp21_) {
					_data_->_data6_ = g_slice_new0 (Block6Data);
					_data_->_data6_->_ref_count_ = 1;
					_data_->_data6_->_data5_ = block5_data_ref (_data_->_data5_);
					_data_->_tmp29_ = NULL;
					_data_->_tmp29_ = g_strdup ("");
					_data_->_data6_->_result_ = _data_->_tmp29_;
					_data_->_tmp30_ = NULL;
					_data_->_tmp30_ = _data_->self->calculator;
					_data_->_tmp31_ = NULL;
					_data_->_tmp31__length1 = 0;
					_data_->_tmp31_ = _data_->line_texts;
					_data_->_tmp31__length1 = _data_->line_texts_length1;
					_data_->_tmp32_ = 0;
					_data_->_tmp32_ = _data_->index;
					_data_->_tmp33_ = NULL;
					_data_->_tmp33_ = _data_->_tmp31_[_data_->_tmp32_];
					_data_->_tmp34_ = 0;
					_data_->_tmp34_ = _data_->_data5_->i;
					_data_->_tmp35_ = NULL;
					_data_->_tmp35_ = g_strdup_printf ("%d", _data_->_tmp34_);
					_data_->_tmp36_ = NULL;
					_data_->_tmp36_ = _data_->_tmp35_;
					_data_->_tmp37_ = NULL;
					_data_->_tmp37_ = g_strconcat (NASC_SETTINGS_variable_names, _data_->_tmp36_, NULL);
					_data_->_tmp38_ = NULL;
					_data_->_tmp38_ = _data_->_tmp37_;
					calculator_calculate_store_variable (_data_->_tmp30_, _data_->_tmp33_, _data_->_tmp38_, _______lambda31__gasync_ready_callback, block6_data_ref (_data_->_data6_));
					_g_free0 (_data_->_tmp38_);
					_g_free0 (_data_->_tmp36_);
					_data_->_data6_->spinner_handle = (guint) 0;
					_data_->_tmp39_ = 0U;
					_data_->_tmp39_ = g_timeout_add_full (G_PRIORITY_DEFAULT, (guint) 80, _______lambda32__gsource_func, block6_data_ref (_data_->_data6_), block6_data_unref);
					_data_->_data6_->spinner_handle = _data_->_tmp39_;
					_data_->_state_ = 2;
					return FALSE;
					_state_2:
					;
					_data_->_tmp40_ = 0U;
					_data_->_tmp40_ = _data_->_data6_->spinner_handle;
					if (_data_->_tmp40_ > ((guint) 0)) {
						_data_->_tmp41_ = 0U;
						_data_->_tmp41_ = _data_->_data6_->spinner_handle;
						g_source_remove (_data_->_tmp41_);
					} else {
						_data_->_tmp42_ = NULL;
						_data_->_tmp42_ = _data_->self->priv->_results;
						result_view_hide_spinner (_data_->_tmp42_);
					}
					_data_->_tmp43_ = NULL;
					_data_->_tmp43_ = _data_->self->calculator;
					_data_->_tmp44_ = NULL;
					_data_->_tmp44_ = calculator_get_cancel (_data_->_tmp43_);
					_data_->_tmp45_ = NULL;
					_data_->_tmp45_ = _data_->_tmp44_;
					_data_->_tmp46_ = FALSE;
					_data_->_tmp46_ = g_cancellable_is_cancelled (_data_->_tmp45_);
					if (_data_->_tmp46_) {
						_data_->self->priv->calc_lock = FALSE;
						block6_data_unref (_data_->_data6_);
						_data_->_data6_ = NULL;
						block5_data_unref (_data_->_data5_);
						_data_->_data5_ = NULL;
						_data_->line_texts = (_vala_array_free (_data_->line_texts, _data_->line_texts_length1, (GDestroyNotify) g_free), NULL);
						block4_data_unref (_data_->_data4_);
						_data_->_data4_ = NULL;
						if (_data_->_state_ == 0) {
							g_simple_async_result_complete_in_idle (_data_->_async_result);
						} else {
							g_simple_async_result_complete (_data_->_async_result);
						}
						g_object_unref (_data_->_async_result);
						return FALSE;
					}
					_data_->_tmp47_ = NULL;
					_data_->_tmp47_ = _data_->self->priv->_results;
					_data_->_tmp48_ = 0;
					_data_->_tmp48_ = _data_->_data5_->i;
					_data_->_tmp49_ = NULL;
					_data_->_tmp49_ = _data_->_data6_->_result_;
					result_view_set_line (_data_->_tmp47_, _data_->_tmp48_, _data_->_tmp49_);
					block6_data_unref (_data_->_data6_);
					_data_->_data6_ = NULL;
				} else {
					_data_->_tmp50_ = NULL;
					_data_->_tmp50_ = _data_->self->priv->_results;
					_data_->_tmp51_ = 0;
					_data_->_tmp51_ = _data_->_data5_->i;
					result_view_set_line (_data_->_tmp50_, _data_->_tmp51_, "");
				}
				_data_->_tmp52_ = 0;
				_data_->_tmp52_ = _data_->index;
				_data_->index = _data_->_tmp52_ + 1;
			}
		}
		block5_data_unref (_data_->_data5_);
		_data_->_data5_ = NULL;
	}
	_data_->_tmp53_ = 0;
	_data_->_tmp53_ = _data_->self->priv->override_line;
	if (_data_->_tmp53_ > 0) {
		_data_->_tmp54_ = 0;
		_data_->_tmp54_ = _data_->self->priv->override_line;
		_data_->line = _data_->_tmp54_;
		_data_->self->priv->override_line = -1;
	}
	_data_->_tmp55_ = NULL;
	_data_->_tmp55_ = _data_->self->priv->_results;
	_data_->_tmp56_ = 0;
	_data_->_tmp56_ = _data_->line;
	result_view_update (_data_->_tmp55_, _data_->_tmp56_, FALSE);
	_data_->_tmp57_ = NULL;
	_data_->_tmp57_ = _data_->self->priv->_actual_sheet;
	_data_->_tmp58_ = NULL;
	_data_->_tmp58_ = _data_->self->priv->_input;
	_data_->_tmp59_ = NULL;
	_data_->_tmp59_ = input_view_get_replaced_content (_data_->_tmp58_);
	_g_free0 (_data_->_tmp57_->content);
	_data_->_tmp57_->content = _data_->_tmp59_;
	_data_->self->priv->calc_lock = FALSE;
	_data_->line_texts = (_vala_array_free (_data_->line_texts, _data_->line_texts_length1, (GDestroyNotify) g_free), NULL);
	block4_data_unref (_data_->_data4_);
	_data_->_data4_ = NULL;
	if (_data_->_state_ == 0) {
		g_simple_async_result_complete_in_idle (_data_->_async_result);
	} else {
		g_simple_async_result_complete (_data_->_async_result);
	}
	g_object_unref (_data_->_async_result);
	return FALSE;
}


void controller_set_sheet (Controller* self, NascSheet* sheet) {
	NascSheet* _tmp0_ = NULL;
	gchar* content = NULL;
	NascSheet* _tmp1_ = NULL;
	const gchar* _tmp2_ = NULL;
	gchar* _tmp3_ = NULL;
	const gchar* _tmp4_ = NULL;
	InputView* _tmp6_ = NULL;
	GtkSourceBuffer* _tmp7_ = NULL;
	const gchar* _tmp8_ = NULL;
	InputView* _tmp9_ = NULL;
	GtkTextIter iter = {0};
	InputView* _tmp10_ = NULL;
	GtkSourceView* _tmp11_ = NULL;
	GtkTextBuffer* _tmp12_ = NULL;
	GtkTextBuffer* _tmp13_ = NULL;
	InputView* _tmp14_ = NULL;
	GtkSourceView* _tmp15_ = NULL;
	GtkTextBuffer* _tmp16_ = NULL;
	GtkTextBuffer* _tmp17_ = NULL;
	gint _tmp18_ = 0;
	gint _tmp19_ = 0;
	GtkTextIter _tmp20_ = {0};
	gint _tmp21_ = 0;
	InputView* _tmp22_ = NULL;
	g_return_if_fail (self != NULL);
	g_return_if_fail (sheet != NULL);
	_tmp0_ = sheet;
	controller_set_actual_sheet (self, _tmp0_);
	_tmp1_ = sheet;
	_tmp2_ = _tmp1_->content;
	_tmp3_ = g_strdup (_tmp2_);
	content = _tmp3_;
	_tmp4_ = content;
	if (_tmp4_ == NULL) {
		gchar* _tmp5_ = NULL;
		_tmp5_ = g_strdup ("");
		_g_free0 (content);
		content = _tmp5_;
	}
	_tmp6_ = self->priv->_input;
	_tmp7_ = _tmp6_->buffer;
	_tmp8_ = content;
	g_object_set ((GtkTextBuffer*) _tmp7_, "text", _tmp8_, NULL);
	_tmp9_ = self->priv->_input;
	input_view_process_new_content (_tmp9_);
	memset (&iter, 0, sizeof (GtkTextIter));
	_tmp10_ = self->priv->_input;
	_tmp11_ = _tmp10_->source_view;
	_tmp12_ = gtk_text_view_get_buffer ((GtkTextView*) _tmp11_);
	_tmp13_ = _tmp12_;
	_tmp14_ = self->priv->_input;
	_tmp15_ = _tmp14_->source_view;
	_tmp16_ = gtk_text_view_get_buffer ((GtkTextView*) _tmp15_);
	_tmp17_ = _tmp16_;
	g_object_get (_tmp17_, "cursor-position", &_tmp18_, NULL);
	_tmp19_ = _tmp18_;
	gtk_text_buffer_get_iter_at_offset (_tmp13_, &_tmp20_, _tmp19_);
	iter = _tmp20_;
	_tmp21_ = gtk_text_iter_get_line (&iter);
	self->priv->override_line = _tmp21_;
	_tmp22_ = self->priv->_input;
	input_view_process_new_content (_tmp22_);
	_g_free0 (content);
}


void controller_set_content (Controller* self, const gchar* content) {
	InputView* _tmp0_ = NULL;
	GtkSourceBuffer* _tmp1_ = NULL;
	const gchar* _tmp2_ = NULL;
	InputView* _tmp3_ = NULL;
	GtkTextIter iter = {0};
	InputView* _tmp4_ = NULL;
	GtkSourceView* _tmp5_ = NULL;
	GtkTextBuffer* _tmp6_ = NULL;
	GtkTextBuffer* _tmp7_ = NULL;
	InputView* _tmp8_ = NULL;
	GtkSourceView* _tmp9_ = NULL;
	GtkTextBuffer* _tmp10_ = NULL;
	GtkTextBuffer* _tmp11_ = NULL;
	gint _tmp12_ = 0;
	gint _tmp13_ = 0;
	GtkTextIter _tmp14_ = {0};
	gint _tmp15_ = 0;
	g_return_if_fail (self != NULL);
	g_return_if_fail (content != NULL);
	_tmp0_ = self->priv->_input;
	_tmp1_ = _tmp0_->buffer;
	_tmp2_ = content;
	g_object_set ((GtkTextBuffer*) _tmp1_, "text", _tmp2_, NULL);
	_tmp3_ = self->priv->_input;
	input_view_process_new_content (_tmp3_);
	memset (&iter, 0, sizeof (GtkTextIter));
	_tmp4_ = self->priv->_input;
	_tmp5_ = _tmp4_->source_view;
	_tmp6_ = gtk_text_view_get_buffer ((GtkTextView*) _tmp5_);
	_tmp7_ = _tmp6_;
	_tmp8_ = self->priv->_input;
	_tmp9_ = _tmp8_->source_view;
	_tmp10_ = gtk_text_view_get_buffer ((GtkTextView*) _tmp9_);
	_tmp11_ = _tmp10_;
	g_object_get (_tmp11_, "cursor-position", &_tmp12_, NULL);
	_tmp13_ = _tmp12_;
	gtk_text_buffer_get_iter_at_offset (_tmp7_, &_tmp14_, _tmp13_);
	iter = _tmp14_;
	_tmp15_ = gtk_text_iter_get_line (&iter);
	self->priv->override_line = _tmp15_;
}


static gchar* string_replace (const gchar* self, const gchar* old, const gchar* replacement) {
	gchar* result = NULL;
	GError * _inner_error_ = NULL;
	g_return_val_if_fail (self != NULL, NULL);
	g_return_val_if_fail (old != NULL, NULL);
	g_return_val_if_fail (replacement != NULL, NULL);
	{
		GRegex* regex = NULL;
		const gchar* _tmp0_ = NULL;
		gchar* _tmp1_ = NULL;
		gchar* _tmp2_ = NULL;
		GRegex* _tmp3_ = NULL;
		GRegex* _tmp4_ = NULL;
		gchar* _tmp5_ = NULL;
		GRegex* _tmp6_ = NULL;
		const gchar* _tmp7_ = NULL;
		gchar* _tmp8_ = NULL;
		gchar* _tmp9_ = NULL;
		_tmp0_ = old;
		_tmp1_ = g_regex_escape_string (_tmp0_, -1);
		_tmp2_ = _tmp1_;
		_tmp3_ = g_regex_new (_tmp2_, 0, 0, &_inner_error_);
		_tmp4_ = _tmp3_;
		_g_free0 (_tmp2_);
		regex = _tmp4_;
		if (G_UNLIKELY (_inner_error_ != NULL)) {
			if (_inner_error_->domain == G_REGEX_ERROR) {
				goto __catch9_g_regex_error;
			}
			g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
			g_clear_error (&_inner_error_);
			return NULL;
		}
		_tmp6_ = regex;
		_tmp7_ = replacement;
		_tmp8_ = g_regex_replace_literal (_tmp6_, self, (gssize) -1, 0, _tmp7_, 0, &_inner_error_);
		_tmp5_ = _tmp8_;
		if (G_UNLIKELY (_inner_error_ != NULL)) {
			_g_regex_unref0 (regex);
			if (_inner_error_->domain == G_REGEX_ERROR) {
				goto __catch9_g_regex_error;
			}
			_g_regex_unref0 (regex);
			g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
			g_clear_error (&_inner_error_);
			return NULL;
		}
		_tmp9_ = _tmp5_;
		_tmp5_ = NULL;
		result = _tmp9_;
		_g_free0 (_tmp5_);
		_g_regex_unref0 (regex);
		return result;
	}
	goto __finally9;
	__catch9_g_regex_error:
	{
		GError* e = NULL;
		e = _inner_error_;
		_inner_error_ = NULL;
		g_assert_not_reached ();
		_g_error_free0 (e);
	}
	__finally9:
	if (G_UNLIKELY (_inner_error_ != NULL)) {
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return NULL;
	}
}


GeeArrayList* controller_get_sheets (Controller* self) {
	GeeArrayList* result = NULL;
	GeeArrayList* _tmp0_ = NULL;
	GeeArrayList* _tmp20_ = NULL;
	GeeArrayList* _tmp21_ = NULL;
	g_return_val_if_fail (self != NULL, NULL);
	_tmp0_ = self->priv->sheet_list;
	if (_tmp0_ == NULL) {
		GeeArrayList* _tmp1_ = NULL;
		gchar** sheets_split = NULL;
		const gchar* _tmp2_ = NULL;
		const gchar* _tmp3_ = NULL;
		gchar** _tmp4_ = NULL;
		gchar** _tmp5_ = NULL;
		gint sheets_split_length1 = 0;
		gint _sheets_split_size_ = 0;
		gchar** _tmp6_ = NULL;
		gint _tmp6__length1 = 0;
		_tmp1_ = gee_array_list_new (TYPE_NASC_SHEET, (GBoxedCopyFunc) g_object_ref, g_object_unref, NULL, NULL, NULL);
		_g_object_unref0 (self->priv->sheet_list);
		self->priv->sheet_list = _tmp1_;
		_tmp2_ = controller_get_sheets_file (self);
		_tmp3_ = _tmp2_;
		_tmp5_ = _tmp4_ = g_strsplit (_tmp3_, NASC_SETTINGS_sheet_split_char, 0);
		sheets_split = _tmp5_;
		sheets_split_length1 = _vala_array_length (_tmp4_);
		_sheets_split_size_ = sheets_split_length1;
		_tmp6_ = sheets_split;
		_tmp6__length1 = sheets_split_length1;
		{
			gchar** sheet_collection = NULL;
			gint sheet_collection_length1 = 0;
			gint _sheet_collection_size_ = 0;
			gint sheet_it = 0;
			sheet_collection = _tmp6_;
			sheet_collection_length1 = _tmp6__length1;
			for (sheet_it = 0; sheet_it < _tmp6__length1; sheet_it = sheet_it + 1) {
				gchar* _tmp7_ = NULL;
				gchar* sheet = NULL;
				_tmp7_ = g_strdup (sheet_collection[sheet_it]);
				sheet = _tmp7_;
				{
					gchar** content = NULL;
					const gchar* _tmp8_ = NULL;
					gchar** _tmp9_ = NULL;
					gchar** _tmp10_ = NULL;
					gint content_length1 = 0;
					gint _content_size_ = 0;
					GeeArrayList* _tmp11_ = NULL;
					gchar** _tmp12_ = NULL;
					gint _tmp12__length1 = 0;
					const gchar* _tmp13_ = NULL;
					gchar** _tmp14_ = NULL;
					gint _tmp14__length1 = 0;
					const gchar* _tmp15_ = NULL;
					gchar* _tmp16_ = NULL;
					gchar* _tmp17_ = NULL;
					NascSheet* _tmp18_ = NULL;
					NascSheet* _tmp19_ = NULL;
					_tmp8_ = sheet;
					_tmp10_ = _tmp9_ = g_strsplit (_tmp8_, NASC_SETTINGS_name_split_char, 0);
					content = _tmp10_;
					content_length1 = _vala_array_length (_tmp9_);
					_content_size_ = content_length1;
					_tmp11_ = self->priv->sheet_list;
					_tmp12_ = content;
					_tmp12__length1 = content_length1;
					_tmp13_ = _tmp12_[0];
					_tmp14_ = content;
					_tmp14__length1 = content_length1;
					_tmp15_ = _tmp14_[1];
					_tmp16_ = string_replace (_tmp15_, "\\n", "\n");
					_tmp17_ = _tmp16_;
					_tmp18_ = nasc_sheet_new (_tmp13_, _tmp17_);
					_tmp19_ = _tmp18_;
					gee_abstract_collection_add ((GeeAbstractCollection*) _tmp11_, _tmp19_);
					_g_object_unref0 (_tmp19_);
					_g_free0 (_tmp17_);
					content = (_vala_array_free (content, content_length1, (GDestroyNotify) g_free), NULL);
					_g_free0 (sheet);
				}
			}
		}
		sheets_split = (_vala_array_free (sheets_split, sheets_split_length1, (GDestroyNotify) g_free), NULL);
	}
	_tmp20_ = self->priv->sheet_list;
	_tmp21_ = _g_object_ref0 (_tmp20_);
	result = _tmp21_;
	return result;
}


NascSheet* controller_add_sheet (Controller* self) {
	NascSheet* result = NULL;
	NascSheet* _tmp0_ = NULL;
	NascSheet* _tmp1_ = NULL;
	GeeArrayList* _tmp2_ = NULL;
	NascSheet* _tmp3_ = NULL;
	InputView* _tmp4_ = NULL;
	GtkSourceBuffer* _tmp5_ = NULL;
	NascSheet* _tmp6_ = NULL;
	NascSheet* _tmp7_ = NULL;
	g_return_val_if_fail (self != NULL, NULL);
	_tmp0_ = nasc_sheet_new ("sheet", "");
	_tmp1_ = _tmp0_;
	controller_set_actual_sheet (self, _tmp1_);
	_g_object_unref0 (_tmp1_);
	_tmp2_ = self->priv->sheet_list;
	_tmp3_ = self->priv->_actual_sheet;
	gee_abstract_collection_add ((GeeAbstractCollection*) _tmp2_, _tmp3_);
	_tmp4_ = self->priv->_input;
	_tmp5_ = _tmp4_->buffer;
	g_object_set ((GtkTextBuffer*) _tmp5_, "text", "", NULL);
	_tmp6_ = self->priv->_actual_sheet;
	_tmp7_ = _g_object_ref0 (_tmp6_);
	result = _tmp7_;
	return result;
}


void controller_remove_sheet (Controller* self, NascSheet* sheet) {
	gint index = 0;
	GeeArrayList* _tmp0_ = NULL;
	NascSheet* _tmp1_ = NULL;
	gint _tmp2_ = 0;
	NascSheet* _tmp3_ = NULL;
	gint _tmp4_ = 0;
	GeeLinkedList* _tmp5_ = NULL;
	NascSheet* _tmp6_ = NULL;
	GeeArrayList* _tmp7_ = NULL;
	NascSheet* _tmp8_ = NULL;
	gint _tmp9_ = 0;
	GeeArrayList* _tmp10_ = NULL;
	gint _tmp11_ = 0;
	gint _tmp12_ = 0;
	GeeArrayList* _tmp16_ = NULL;
	gint _tmp17_ = 0;
	gpointer _tmp18_ = NULL;
	NascSheet* _tmp19_ = NULL;
	g_return_if_fail (self != NULL);
	g_return_if_fail (sheet != NULL);
	_tmp0_ = self->priv->sheet_list;
	_tmp1_ = sheet;
	_tmp2_ = gee_abstract_list_index_of ((GeeAbstractList*) _tmp0_, _tmp1_);
	index = _tmp2_;
	_tmp3_ = sheet;
	_tmp4_ = index;
	_tmp3_->index = _tmp4_;
	_tmp5_ = self->priv->removal_list;
	_tmp6_ = sheet;
	gee_deque_offer_tail ((GeeDeque*) _tmp5_, _tmp6_);
	_tmp7_ = self->priv->sheet_list;
	_tmp8_ = sheet;
	gee_abstract_collection_remove ((GeeAbstractCollection*) _tmp7_, _tmp8_);
	_tmp9_ = index;
	_tmp10_ = self->priv->sheet_list;
	_tmp11_ = gee_abstract_collection_get_size ((GeeCollection*) _tmp10_);
	_tmp12_ = _tmp11_;
	if (_tmp9_ >= _tmp12_) {
		GeeArrayList* _tmp13_ = NULL;
		gint _tmp14_ = 0;
		gint _tmp15_ = 0;
		_tmp13_ = self->priv->sheet_list;
		_tmp14_ = gee_abstract_collection_get_size ((GeeCollection*) _tmp13_);
		_tmp15_ = _tmp14_;
		index = _tmp15_ - 1;
	}
	_tmp16_ = self->priv->sheet_list;
	_tmp17_ = index;
	_tmp18_ = gee_abstract_list_get ((GeeAbstractList*) _tmp16_, _tmp17_);
	_tmp19_ = (NascSheet*) _tmp18_;
	controller_set_actual_sheet (self, _tmp19_);
	_g_object_unref0 (_tmp19_);
}


void controller_undo_removal (Controller* self) {
	GeeLinkedList* _tmp0_ = NULL;
	gint _tmp1_ = 0;
	gint _tmp2_ = 0;
	g_return_if_fail (self != NULL);
	_tmp0_ = self->priv->removal_list;
	_tmp1_ = gee_abstract_collection_get_size ((GeeCollection*) _tmp0_);
	_tmp2_ = _tmp1_;
	if (_tmp2_ > 0) {
		NascSheet* sheet = NULL;
		GeeLinkedList* _tmp3_ = NULL;
		gpointer _tmp4_ = NULL;
		GeeArrayList* _tmp5_ = NULL;
		gint _tmp6_ = 0;
		gint _tmp7_ = 0;
		NascSheet* _tmp8_ = NULL;
		gint _tmp9_ = 0;
		_tmp3_ = self->priv->removal_list;
		_tmp4_ = gee_deque_poll_tail ((GeeDeque*) _tmp3_);
		sheet = (NascSheet*) _tmp4_;
		_tmp5_ = self->priv->sheet_list;
		_tmp6_ = gee_abstract_collection_get_size ((GeeCollection*) _tmp5_);
		_tmp7_ = _tmp6_;
		_tmp8_ = sheet;
		_tmp9_ = _tmp8_->index;
		if (_tmp7_ <= _tmp9_) {
			GeeArrayList* _tmp10_ = NULL;
			NascSheet* _tmp11_ = NULL;
			_tmp10_ = self->priv->sheet_list;
			_tmp11_ = sheet;
			gee_abstract_collection_add ((GeeAbstractCollection*) _tmp10_, _tmp11_);
		} else {
			GeeArrayList* _tmp12_ = NULL;
			NascSheet* _tmp13_ = NULL;
			gint _tmp14_ = 0;
			NascSheet* _tmp15_ = NULL;
			_tmp12_ = self->priv->sheet_list;
			_tmp13_ = sheet;
			_tmp14_ = _tmp13_->index;
			_tmp15_ = sheet;
			gee_abstract_list_insert ((GeeAbstractList*) _tmp12_, _tmp14_, _tmp15_);
		}
		_g_object_unref0 (sheet);
	}
}


void controller_store_sheet_content (Controller* self) {
	GString* text = NULL;
	GString* _tmp0_ = NULL;
	GString* _tmp36_ = NULL;
	const gchar* _tmp37_ = NULL;
	g_return_if_fail (self != NULL);
	_tmp0_ = g_string_new ("");
	text = _tmp0_;
	{
		GeeArrayList* _sheet_list = NULL;
		GeeArrayList* _tmp1_ = NULL;
		GeeArrayList* _tmp2_ = NULL;
		gint _sheet_size = 0;
		GeeArrayList* _tmp3_ = NULL;
		gint _tmp4_ = 0;
		gint _tmp5_ = 0;
		gint _sheet_index = 0;
		_tmp1_ = self->priv->sheet_list;
		_tmp2_ = _g_object_ref0 (_tmp1_);
		_sheet_list = _tmp2_;
		_tmp3_ = _sheet_list;
		_tmp4_ = gee_abstract_collection_get_size ((GeeCollection*) _tmp3_);
		_tmp5_ = _tmp4_;
		_sheet_size = _tmp5_;
		_sheet_index = -1;
		while (TRUE) {
			gint _tmp6_ = 0;
			gint _tmp7_ = 0;
			gint _tmp8_ = 0;
			NascSheet* sheet = NULL;
			GeeArrayList* _tmp9_ = NULL;
			gint _tmp10_ = 0;
			gpointer _tmp11_ = NULL;
			GString* _tmp12_ = NULL;
			NascSheet* _tmp13_ = NULL;
			const gchar* _tmp14_ = NULL;
			const gchar* _tmp15_ = NULL;
			GString* _tmp16_ = NULL;
			GString* _tmp17_ = NULL;
			NascSheet* _tmp18_ = NULL;
			const gchar* _tmp19_ = NULL;
			gchar* _tmp20_ = NULL;
			gchar* _tmp21_ = NULL;
			GeeArrayList* _tmp22_ = NULL;
			NascSheet* _tmp23_ = NULL;
			gint _tmp24_ = 0;
			GeeArrayList* _tmp25_ = NULL;
			gint _tmp26_ = 0;
			gint _tmp27_ = 0;
			NascSheet* _tmp29_ = NULL;
			NascSheet* _tmp30_ = NULL;
			_tmp6_ = _sheet_index;
			_sheet_index = _tmp6_ + 1;
			_tmp7_ = _sheet_index;
			_tmp8_ = _sheet_size;
			if (!(_tmp7_ < _tmp8_)) {
				break;
			}
			_tmp9_ = _sheet_list;
			_tmp10_ = _sheet_index;
			_tmp11_ = gee_abstract_list_get ((GeeAbstractList*) _tmp9_, _tmp10_);
			sheet = (NascSheet*) _tmp11_;
			_tmp12_ = text;
			_tmp13_ = sheet;
			_tmp14_ = granite_widgets_source_list_item_get_name ((GraniteWidgetsSourceListItem*) _tmp13_);
			_tmp15_ = _tmp14_;
			g_string_append (_tmp12_, _tmp15_);
			_tmp16_ = text;
			g_string_append (_tmp16_, NASC_SETTINGS_name_split_char);
			_tmp17_ = text;
			_tmp18_ = sheet;
			_tmp19_ = _tmp18_->content;
			_tmp20_ = string_replace (_tmp19_, "\n", "\\n");
			_tmp21_ = _tmp20_;
			g_string_append (_tmp17_, _tmp21_);
			_g_free0 (_tmp21_);
			_tmp22_ = self->priv->sheet_list;
			_tmp23_ = sheet;
			_tmp24_ = gee_abstract_list_index_of ((GeeAbstractList*) _tmp22_, _tmp23_);
			_tmp25_ = self->priv->sheet_list;
			_tmp26_ = gee_abstract_collection_get_size ((GeeCollection*) _tmp25_);
			_tmp27_ = _tmp26_;
			if (_tmp24_ != (_tmp27_ - 1)) {
				GString* _tmp28_ = NULL;
				_tmp28_ = text;
				g_string_append (_tmp28_, NASC_SETTINGS_sheet_split_char);
			}
			_tmp29_ = sheet;
			_tmp30_ = self->priv->_actual_sheet;
			if (_tmp29_ == _tmp30_) {
				NascSettings* _tmp31_ = NULL;
				NascSettings* _tmp32_ = NULL;
				GeeArrayList* _tmp33_ = NULL;
				NascSheet* _tmp34_ = NULL;
				gint _tmp35_ = 0;
				_tmp31_ = nasc_settings_get_instance ();
				_tmp32_ = _tmp31_;
				_tmp33_ = self->priv->sheet_list;
				_tmp34_ = sheet;
				_tmp35_ = gee_abstract_list_index_of ((GeeAbstractList*) _tmp33_, _tmp34_);
				nasc_settings_set_open_sheet (_tmp32_, _tmp35_);
				_g_object_unref0 (_tmp32_);
			}
			_g_object_unref0 (sheet);
		}
		_g_object_unref0 (_sheet_list);
	}
	_tmp36_ = text;
	_tmp37_ = _tmp36_->str;
	controller_set_sheets_file (self, _tmp37_);
	_g_string_free0 (text);
}


static gboolean string_contains (const gchar* self, const gchar* needle) {
	gboolean result = FALSE;
	const gchar* _tmp0_ = NULL;
	gchar* _tmp1_ = NULL;
	g_return_val_if_fail (self != NULL, FALSE);
	g_return_val_if_fail (needle != NULL, FALSE);
	_tmp0_ = needle;
	_tmp1_ = strstr ((gchar*) self, (gchar*) _tmp0_);
	result = _tmp1_ != NULL;
	return result;
}


static gboolean controller_check_for_calculation (Controller* self, const gchar* input) {
	gboolean result = FALSE;
	gboolean _tmp0_ = FALSE;
	const gchar* _tmp1_ = NULL;
	g_return_val_if_fail (self != NULL, FALSE);
	g_return_val_if_fail (input != NULL, FALSE);
	_tmp1_ = input;
	if (_tmp1_ == NULL) {
		_tmp0_ = TRUE;
	} else {
		const gchar* _tmp2_ = NULL;
		_tmp2_ = input;
		_tmp0_ = g_strcmp0 (_tmp2_, "") == 0;
	}
	if (_tmp0_) {
		result = FALSE;
		return result;
	} else {
		const gchar* _tmp3_ = NULL;
		gboolean _tmp4_ = FALSE;
		_tmp3_ = input;
		_tmp4_ = string_contains (_tmp3_, "http://");
		if (_tmp4_) {
			result = FALSE;
			return result;
		} else {
			const gchar* _tmp5_ = NULL;
			gboolean _tmp6_ = FALSE;
			_tmp5_ = input;
			_tmp6_ = g_str_has_suffix (_tmp5_, "atom()");
			if (_tmp6_) {
				g_signal_emit_by_name (self, "periodic");
				result = FALSE;
				return result;
			} else {
				GRegex* _tmp7_ = NULL;
				const gchar* _tmp8_ = NULL;
				gboolean _tmp9_ = FALSE;
				_tmp7_ = self->priv->digit_regex;
				_tmp8_ = input;
				_tmp9_ = g_regex_match (_tmp7_, _tmp8_, 0, NULL);
				if (_tmp9_) {
					result = TRUE;
					return result;
				} else {
					const gchar* _tmp66_ = NULL;
					{
						GeeArrayList* _op_list = NULL;
						GeeArrayList* _tmp10_ = NULL;
						GeeArrayList* _tmp11_ = NULL;
						gint _op_size = 0;
						GeeArrayList* _tmp12_ = NULL;
						gint _tmp13_ = 0;
						gint _tmp14_ = 0;
						gint _op_index = 0;
						_tmp10_ = self->priv->enable_calc;
						_tmp11_ = _g_object_ref0 (_tmp10_);
						_op_list = _tmp11_;
						_tmp12_ = _op_list;
						_tmp13_ = gee_abstract_collection_get_size ((GeeCollection*) _tmp12_);
						_tmp14_ = _tmp13_;
						_op_size = _tmp14_;
						_op_index = -1;
						while (TRUE) {
							gint _tmp15_ = 0;
							gint _tmp16_ = 0;
							gint _tmp17_ = 0;
							gchar* op = NULL;
							GeeArrayList* _tmp18_ = NULL;
							gint _tmp19_ = 0;
							gpointer _tmp20_ = NULL;
							const gchar* _tmp21_ = NULL;
							const gchar* _tmp22_ = NULL;
							gboolean _tmp23_ = FALSE;
							_tmp15_ = _op_index;
							_op_index = _tmp15_ + 1;
							_tmp16_ = _op_index;
							_tmp17_ = _op_size;
							if (!(_tmp16_ < _tmp17_)) {
								break;
							}
							_tmp18_ = _op_list;
							_tmp19_ = _op_index;
							_tmp20_ = gee_abstract_list_get ((GeeAbstractList*) _tmp18_, _tmp19_);
							op = (gchar*) _tmp20_;
							_tmp21_ = input;
							_tmp22_ = op;
							_tmp23_ = string_contains (_tmp21_, _tmp22_);
							if (_tmp23_) {
								result = TRUE;
								_g_free0 (op);
								_g_object_unref0 (_op_list);
								return result;
							}
							_g_free0 (op);
						}
						_g_object_unref0 (_op_list);
					}
					{
						GeeList* _fct_list = NULL;
						Calculator* _tmp24_ = NULL;
						GeeList* _tmp25_ = NULL;
						GeeList* _tmp26_ = NULL;
						GeeList* _tmp27_ = NULL;
						gint _fct_size = 0;
						GeeList* _tmp28_ = NULL;
						gint _tmp29_ = 0;
						gint _tmp30_ = 0;
						gint _fct_index = 0;
						_tmp24_ = self->calculator;
						_tmp25_ = calculator_get_functions (_tmp24_);
						_tmp26_ = _tmp25_;
						_tmp27_ = _g_object_ref0 (_tmp26_);
						_fct_list = _tmp27_;
						_tmp28_ = _fct_list;
						_tmp29_ = gee_collection_get_size ((GeeCollection*) _tmp28_);
						_tmp30_ = _tmp29_;
						_fct_size = _tmp30_;
						_fct_index = -1;
						while (TRUE) {
							gint _tmp31_ = 0;
							gint _tmp32_ = 0;
							gint _tmp33_ = 0;
							NascFunction* fct = NULL;
							GeeList* _tmp34_ = NULL;
							gint _tmp35_ = 0;
							gpointer _tmp36_ = NULL;
							const gchar* _tmp37_ = NULL;
							NascFunction* _tmp38_ = NULL;
							const gchar* _tmp39_ = NULL;
							gchar* _tmp40_ = NULL;
							gchar* _tmp41_ = NULL;
							gboolean _tmp42_ = FALSE;
							gboolean _tmp43_ = FALSE;
							_tmp31_ = _fct_index;
							_fct_index = _tmp31_ + 1;
							_tmp32_ = _fct_index;
							_tmp33_ = _fct_size;
							if (!(_tmp32_ < _tmp33_)) {
								break;
							}
							_tmp34_ = _fct_list;
							_tmp35_ = _fct_index;
							_tmp36_ = gee_list_get (_tmp34_, _tmp35_);
							fct = (NascFunction*) _tmp36_;
							_tmp37_ = input;
							_tmp38_ = fct;
							_tmp39_ = ((NascElement*) _tmp38_)->name;
							_tmp40_ = g_strdup_printf ("%s(", _tmp39_);
							_tmp41_ = _tmp40_;
							_tmp42_ = string_contains (_tmp37_, _tmp41_);
							_tmp43_ = _tmp42_;
							_g_free0 (_tmp41_);
							if (_tmp43_) {
								result = TRUE;
								_g_object_unref0 (fct);
								_g_object_unref0 (_fct_list);
								return result;
							}
							_g_object_unref0 (fct);
						}
						_g_object_unref0 (_fct_list);
					}
					{
						GeeList* _v_list = NULL;
						Calculator* _tmp44_ = NULL;
						GeeList* _tmp45_ = NULL;
						GeeList* _tmp46_ = NULL;
						GeeList* _tmp47_ = NULL;
						gint _v_size = 0;
						GeeList* _tmp48_ = NULL;
						gint _tmp49_ = 0;
						gint _tmp50_ = 0;
						gint _v_index = 0;
						_tmp44_ = self->calculator;
						_tmp45_ = calculator_get_variables (_tmp44_);
						_tmp46_ = _tmp45_;
						_tmp47_ = _g_object_ref0 (_tmp46_);
						_v_list = _tmp47_;
						_tmp48_ = _v_list;
						_tmp49_ = gee_collection_get_size ((GeeCollection*) _tmp48_);
						_tmp50_ = _tmp49_;
						_v_size = _tmp50_;
						_v_index = -1;
						while (TRUE) {
							gint _tmp51_ = 0;
							gint _tmp52_ = 0;
							gint _tmp53_ = 0;
							NascVariabel* v = NULL;
							GeeList* _tmp54_ = NULL;
							gint _tmp55_ = 0;
							gpointer _tmp56_ = NULL;
							gboolean _tmp57_ = FALSE;
							NascVariabel* _tmp58_ = NULL;
							const gchar* _tmp59_ = NULL;
							gint _tmp60_ = 0;
							gint _tmp61_ = 0;
							_tmp51_ = _v_index;
							_v_index = _tmp51_ + 1;
							_tmp52_ = _v_index;
							_tmp53_ = _v_size;
							if (!(_tmp52_ < _tmp53_)) {
								break;
							}
							_tmp54_ = _v_list;
							_tmp55_ = _v_index;
							_tmp56_ = gee_list_get (_tmp54_, _tmp55_);
							v = (NascVariabel*) _tmp56_;
							_tmp58_ = v;
							_tmp59_ = ((NascElement*) _tmp58_)->name;
							_tmp60_ = strlen (_tmp59_);
							_tmp61_ = _tmp60_;
							if (_tmp61_ > 3) {
								const gchar* _tmp62_ = NULL;
								NascVariabel* _tmp63_ = NULL;
								const gchar* _tmp64_ = NULL;
								gboolean _tmp65_ = FALSE;
								_tmp62_ = input;
								_tmp63_ = v;
								_tmp64_ = ((NascElement*) _tmp63_)->name;
								_tmp65_ = string_contains (_tmp62_, _tmp64_);
								_tmp57_ = _tmp65_;
							} else {
								_tmp57_ = FALSE;
							}
							if (_tmp57_) {
								result = TRUE;
								_g_object_unref0 (v);
								_g_object_unref0 (_v_list);
								return result;
							}
							_g_object_unref0 (v);
						}
						_g_object_unref0 (_v_list);
					}
					_tmp66_ = input;
					if (g_strcmp0 (_tmp66_, "tutorial()") == 0) {
						g_signal_emit_by_name (self, "tutorial");
					}
					result = FALSE;
					return result;
				}
			}
		}
	}
}


static void _vala_array_add1 (gchar*** array, int* length, int* size, gchar* value) {
	if ((*length) == (*size)) {
		*size = (*size) ? (2 * (*size)) : 4;
		*array = g_renew (gchar*, *array, (*size) + 1);
	}
	(*array)[(*length)++] = value;
	(*array)[*length] = NULL;
}


static gboolean string_get_next_char (const gchar* self, gint* index, gunichar* c) {
	gunichar _vala_c = 0U;
	gboolean result = FALSE;
	gint _tmp0_ = 0;
	gunichar _tmp1_ = 0U;
	gunichar _tmp2_ = 0U;
	g_return_val_if_fail (self != NULL, FALSE);
	_tmp0_ = *index;
	_tmp1_ = g_utf8_get_char (((gchar*) self) + _tmp0_);
	_vala_c = _tmp1_;
	_tmp2_ = _vala_c;
	if (_tmp2_ != ((gunichar) 0)) {
		gint _tmp3_ = 0;
		gchar* _tmp4_ = NULL;
		_tmp3_ = *index;
		_tmp4_ = g_utf8_next_char (((gchar*) self) + _tmp3_);
		*index = (gint) (_tmp4_ - ((gchar*) self));
		result = TRUE;
		if (c) {
			*c = _vala_c;
		}
		return result;
	} else {
		result = FALSE;
		if (c) {
			*c = _vala_c;
		}
		return result;
	}
	if (c) {
		*c = _vala_c;
	}
}


gchar* controller_get_export_text (Controller* self) {
	gchar* result = NULL;
	gchar** input_text = NULL;
	gchar* _tmp0_ = NULL;
	gchar* _tmp1_ = NULL;
	gchar** _tmp2_ = NULL;
	gchar** _tmp3_ = NULL;
	gchar** _tmp4_ = NULL;
	gint _tmp4__length1 = 0;
	gint input_text_length1 = 0;
	gint _input_text_size_ = 0;
	gchar** result_text = NULL;
	gchar** _tmp5_ = NULL;
	gint result_text_length1 = 0;
	gint _result_text_size_ = 0;
	gint longest_line = 0;
	GString* sb = NULL;
	GString* _tmp24_ = NULL;
	GString* _tmp52_ = NULL;
	const gchar* _tmp53_ = NULL;
	gchar* _tmp54_ = NULL;
	g_return_val_if_fail (self != NULL, NULL);
	_tmp0_ = controller_get_content (self);
	_tmp1_ = _tmp0_;
	_tmp3_ = _tmp2_ = g_strsplit (_tmp1_, "\n", 0);
	_tmp4_ = _tmp3_;
	_tmp4__length1 = _vala_array_length (_tmp2_);
	_g_free0 (_tmp1_);
	input_text = _tmp4_;
	input_text_length1 = _tmp4__length1;
	_input_text_size_ = input_text_length1;
	_tmp5_ = g_new0 (gchar*, 0 + 1);
	result_text = _tmp5_;
	result_text_length1 = 0;
	_result_text_size_ = result_text_length1;
	{
		GeeArrayList* _rl_list = NULL;
		ResultView* _tmp6_ = NULL;
		GeeArrayList* _tmp7_ = NULL;
		GeeArrayList* _tmp8_ = NULL;
		GeeArrayList* _tmp9_ = NULL;
		gint _rl_size = 0;
		GeeArrayList* _tmp10_ = NULL;
		gint _tmp11_ = 0;
		gint _tmp12_ = 0;
		gint _rl_index = 0;
		_tmp6_ = self->priv->_results;
		_tmp7_ = result_view_get_result_list (_tmp6_);
		_tmp8_ = _tmp7_;
		_tmp9_ = _g_object_ref0 (_tmp8_);
		_rl_list = _tmp9_;
		_tmp10_ = _rl_list;
		_tmp11_ = gee_abstract_collection_get_size ((GeeCollection*) _tmp10_);
		_tmp12_ = _tmp11_;
		_rl_size = _tmp12_;
		_rl_index = -1;
		while (TRUE) {
			gint _tmp13_ = 0;
			gint _tmp14_ = 0;
			gint _tmp15_ = 0;
			ResultLine* rl = NULL;
			GeeArrayList* _tmp16_ = NULL;
			gint _tmp17_ = 0;
			gpointer _tmp18_ = NULL;
			gchar** _tmp19_ = NULL;
			gint _tmp19__length1 = 0;
			ResultLine* _tmp20_ = NULL;
			const gchar* _tmp21_ = NULL;
			const gchar* _tmp22_ = NULL;
			gchar* _tmp23_ = NULL;
			_tmp13_ = _rl_index;
			_rl_index = _tmp13_ + 1;
			_tmp14_ = _rl_index;
			_tmp15_ = _rl_size;
			if (!(_tmp14_ < _tmp15_)) {
				break;
			}
			_tmp16_ = _rl_list;
			_tmp17_ = _rl_index;
			_tmp18_ = gee_abstract_list_get ((GeeAbstractList*) _tmp16_, _tmp17_);
			rl = (ResultLine*) _tmp18_;
			_tmp19_ = result_text;
			_tmp19__length1 = result_text_length1;
			_tmp20_ = rl;
			_tmp21_ = result_line_get_value (_tmp20_);
			_tmp22_ = _tmp21_;
			_tmp23_ = g_strdup (_tmp22_);
			_vala_array_add1 (&result_text, &result_text_length1, &_result_text_size_, _tmp23_);
			_g_object_unref0 (rl);
		}
		_g_object_unref0 (_rl_list);
	}
	longest_line = 80;
	_tmp24_ = g_string_new ("");
	sb = _tmp24_;
	{
		gint i = 0;
		i = 0;
		{
			gboolean _tmp25_ = FALSE;
			_tmp25_ = TRUE;
			while (TRUE) {
				gint _tmp27_ = 0;
				gchar** _tmp28_ = NULL;
				gint _tmp28__length1 = 0;
				GString* _tmp29_ = NULL;
				gchar** _tmp30_ = NULL;
				gint _tmp30__length1 = 0;
				gint _tmp31_ = 0;
				const gchar* _tmp32_ = NULL;
				gint actual_length = 0;
				gunichar c = 0U;
				GString* _tmp46_ = NULL;
				GString* _tmp47_ = NULL;
				gchar** _tmp48_ = NULL;
				gint _tmp48__length1 = 0;
				gint _tmp49_ = 0;
				const gchar* _tmp50_ = NULL;
				GString* _tmp51_ = NULL;
				if (!_tmp25_) {
					gint _tmp26_ = 0;
					_tmp26_ = i;
					i = _tmp26_ + 1;
				}
				_tmp25_ = FALSE;
				_tmp27_ = i;
				_tmp28_ = input_text;
				_tmp28__length1 = input_text_length1;
				if (!(_tmp27_ < _tmp28__length1)) {
					break;
				}
				_tmp29_ = sb;
				_tmp30_ = input_text;
				_tmp30__length1 = input_text_length1;
				_tmp31_ = i;
				_tmp32_ = _tmp30_[_tmp31_];
				g_string_append (_tmp29_, _tmp32_);
				actual_length = 0;
				{
					gint k = 0;
					k = 0;
					{
						gboolean _tmp33_ = FALSE;
						_tmp33_ = TRUE;
						while (TRUE) {
							gchar** _tmp34_ = NULL;
							gint _tmp34__length1 = 0;
							gint _tmp35_ = 0;
							const gchar* _tmp36_ = NULL;
							gunichar _tmp37_ = 0U;
							gboolean _tmp38_ = FALSE;
							gint _tmp39_ = 0;
							if (!_tmp33_) {
							}
							_tmp33_ = FALSE;
							_tmp34_ = input_text;
							_tmp34__length1 = input_text_length1;
							_tmp35_ = i;
							_tmp36_ = _tmp34_[_tmp35_];
							_tmp38_ = string_get_next_char (_tmp36_, &k, &_tmp37_);
							c = _tmp37_;
							if (!_tmp38_) {
								break;
							}
							_tmp39_ = actual_length;
							actual_length = _tmp39_ + 1;
						}
					}
				}
				{
					gint j = 0;
					gint _tmp40_ = 0;
					_tmp40_ = actual_length;
					j = _tmp40_;
					{
						gboolean _tmp41_ = FALSE;
						_tmp41_ = TRUE;
						while (TRUE) {
							gint _tmp43_ = 0;
							gint _tmp44_ = 0;
							GString* _tmp45_ = NULL;
							if (!_tmp41_) {
								gint _tmp42_ = 0;
								_tmp42_ = j;
								j = _tmp42_ + 1;
							}
							_tmp41_ = FALSE;
							_tmp43_ = j;
							_tmp44_ = longest_line;
							if (!(_tmp43_ < _tmp44_)) {
								break;
							}
							_tmp45_ = sb;
							g_string_append (_tmp45_, " ");
						}
					}
				}
				_tmp46_ = sb;
				g_string_append (_tmp46_, "| ");
				_tmp47_ = sb;
				_tmp48_ = result_text;
				_tmp48__length1 = result_text_length1;
				_tmp49_ = i;
				_tmp50_ = _tmp48_[_tmp49_];
				g_string_append (_tmp47_, _tmp50_);
				_tmp51_ = sb;
				g_string_append (_tmp51_, "\n");
			}
		}
	}
	_tmp52_ = sb;
	_tmp53_ = _tmp52_->str;
	_tmp54_ = g_strdup (_tmp53_);
	result = _tmp54_;
	_g_string_free0 (sb);
	result_text = (_vala_array_free (result_text, result_text_length1, (GDestroyNotify) g_free), NULL);
	input_text = (_vala_array_free (input_text, input_text_length1, (GDestroyNotify) g_free), NULL);
	return result;
}


InputView* controller_get_input (Controller* self) {
	InputView* result;
	InputView* _tmp0_ = NULL;
	g_return_val_if_fail (self != NULL, NULL);
	_tmp0_ = self->priv->_input;
	result = _tmp0_;
	return result;
}


static void controller_set_input (Controller* self, InputView* value) {
	InputView* _tmp0_ = NULL;
	InputView* _tmp1_ = NULL;
	g_return_if_fail (self != NULL);
	_tmp0_ = value;
	_tmp1_ = _g_object_ref0 (_tmp0_);
	_g_object_unref0 (self->priv->_input);
	self->priv->_input = _tmp1_;
	g_object_notify ((GObject *) self, "input");
}


ResultView* controller_get_results (Controller* self) {
	ResultView* result;
	ResultView* _tmp0_ = NULL;
	g_return_val_if_fail (self != NULL, NULL);
	_tmp0_ = self->priv->_results;
	result = _tmp0_;
	return result;
}


static void controller_set_results (Controller* self, ResultView* value) {
	ResultView* _tmp0_ = NULL;
	ResultView* _tmp1_ = NULL;
	g_return_if_fail (self != NULL);
	_tmp0_ = value;
	_tmp1_ = _g_object_ref0 (_tmp0_);
	_g_object_unref0 (self->priv->_results);
	self->priv->_results = _tmp1_;
	g_object_notify ((GObject *) self, "results");
}


NascSettings* controller_get_settings (Controller* self) {
	NascSettings* result;
	NascSettings* _tmp0_ = NULL;
	g_return_val_if_fail (self != NULL, NULL);
	_tmp0_ = self->priv->_settings;
	result = _tmp0_;
	return result;
}


static void controller_set_settings (Controller* self, NascSettings* value) {
	NascSettings* _tmp0_ = NULL;
	NascSettings* _tmp1_ = NULL;
	g_return_if_fail (self != NULL);
	_tmp0_ = value;
	_tmp1_ = _g_object_ref0 (_tmp0_);
	_g_object_unref0 (self->priv->_settings);
	self->priv->_settings = _tmp1_;
	g_object_notify ((GObject *) self, "settings");
}


NascSheet* controller_get_actual_sheet (Controller* self) {
	NascSheet* result;
	NascSheet* _tmp0_ = NULL;
	g_return_val_if_fail (self != NULL, NULL);
	_tmp0_ = self->priv->_actual_sheet;
	result = _tmp0_;
	return result;
}


static void controller_set_actual_sheet (Controller* self, NascSheet* value) {
	NascSheet* _tmp0_ = NULL;
	NascSheet* _tmp1_ = NULL;
	g_return_if_fail (self != NULL);
	_tmp0_ = value;
	_tmp1_ = _g_object_ref0 (_tmp0_);
	_g_object_unref0 (self->priv->_actual_sheet);
	self->priv->_actual_sheet = _tmp1_;
	g_object_notify ((GObject *) self, "actual-sheet");
}


const gchar* controller_get_sheets_file (Controller* self) {
	const gchar* result;
	GString* text = NULL;
	GString* _tmp0_ = NULL;
	GString* _tmp19_ = NULL;
	const gchar* _tmp20_ = NULL;
	gchar* _tmp21_ = NULL;
	const gchar* _tmp22_ = NULL;
	GError * _inner_error_ = NULL;
	g_return_val_if_fail (self != NULL, NULL);
	_tmp0_ = g_string_new ("");
	text = _tmp0_;
	{
		GFile* file = NULL;
		const gchar* _tmp1_ = NULL;
		GFile* _tmp2_ = NULL;
		GFile* _tmp3_ = NULL;
		gboolean _tmp4_ = FALSE;
		_tmp1_ = self->priv->sheet_path;
		_tmp2_ = g_file_new_for_path (_tmp1_);
		file = _tmp2_;
		_tmp3_ = file;
		_tmp4_ = g_file_query_exists (_tmp3_, NULL);
		if (_tmp4_) {
			GFileInputStream* _tmp5_ = NULL;
			GFile* _tmp6_ = NULL;
			GFileInputStream* _tmp7_ = NULL;
			GDataInputStream* dis = NULL;
			GDataInputStream* _tmp8_ = NULL;
			gchar* line = NULL;
			_tmp6_ = file;
			_tmp7_ = g_file_read (_tmp6_, NULL, &_inner_error_);
			_tmp5_ = _tmp7_;
			if (G_UNLIKELY (_inner_error_ != NULL)) {
				_g_object_unref0 (file);
				goto __catch10_g_error;
			}
			_tmp8_ = g_data_input_stream_new ((GInputStream*) _tmp5_);
			dis = _tmp8_;
			line = NULL;
			while (TRUE) {
				gchar* _tmp9_ = NULL;
				GDataInputStream* _tmp10_ = NULL;
				gchar* _tmp11_ = NULL;
				gchar* _tmp12_ = NULL;
				const gchar* _tmp13_ = NULL;
				GString* _tmp14_ = NULL;
				const gchar* _tmp15_ = NULL;
				_tmp10_ = dis;
				_tmp11_ = g_data_input_stream_read_line (_tmp10_, NULL, NULL, &_inner_error_);
				_tmp9_ = _tmp11_;
				if (G_UNLIKELY (_inner_error_ != NULL)) {
					_g_free0 (line);
					_g_object_unref0 (dis);
					_g_object_unref0 (_tmp5_);
					_g_object_unref0 (file);
					goto __catch10_g_error;
				}
				_tmp12_ = _tmp9_;
				_tmp9_ = NULL;
				_g_free0 (line);
				line = _tmp12_;
				_tmp13_ = line;
				if (!(_tmp13_ != NULL)) {
					_g_free0 (_tmp9_);
					break;
				}
				_tmp14_ = text;
				_tmp15_ = line;
				g_string_append (_tmp14_, _tmp15_);
				_g_free0 (_tmp9_);
			}
			_g_free0 (line);
			_g_object_unref0 (dis);
			_g_object_unref0 (_tmp5_);
		}
		_g_object_unref0 (file);
	}
	goto __finally10;
	__catch10_g_error:
	{
		GError* e = NULL;
		FILE* _tmp16_ = NULL;
		GError* _tmp17_ = NULL;
		const gchar* _tmp18_ = NULL;
		e = _inner_error_;
		_inner_error_ = NULL;
		_tmp16_ = stderr;
		_tmp17_ = e;
		_tmp18_ = _tmp17_->message;
		fprintf (_tmp16_, "Error: %s\n", _tmp18_);
		_g_error_free0 (e);
	}
	__finally10:
	if (G_UNLIKELY (_inner_error_ != NULL)) {
		_g_string_free0 (text);
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return NULL;
	}
	_tmp19_ = text;
	_tmp20_ = _tmp19_->str;
	_tmp21_ = g_strdup (_tmp20_);
	_g_free0 (self->priv->_sheets);
	self->priv->_sheets = _tmp21_;
	_tmp22_ = self->priv->_sheets;
	result = _tmp22_;
	_g_string_free0 (text);
	return result;
}


void controller_set_sheets_file (Controller* self, const gchar* value) {
	GError * _inner_error_ = NULL;
	g_return_if_fail (self != NULL);
	{
		GFile* file = NULL;
		const gchar* _tmp0_ = NULL;
		GFile* _tmp1_ = NULL;
		GFile* _tmp2_ = NULL;
		gboolean _tmp3_ = FALSE;
		GFileOutputStream* _tmp5_ = NULL;
		GFile* _tmp6_ = NULL;
		GFileOutputStream* _tmp7_ = NULL;
		GDataOutputStream* dos = NULL;
		GDataOutputStream* _tmp8_ = NULL;
		GDataOutputStream* _tmp9_ = NULL;
		const gchar* _tmp10_ = NULL;
		GDataOutputStream* _tmp11_ = NULL;
		_tmp0_ = self->priv->sheet_path;
		_tmp1_ = g_file_new_for_path (_tmp0_);
		file = _tmp1_;
		_tmp2_ = file;
		_tmp3_ = g_file_query_exists (_tmp2_, NULL);
		if (_tmp3_) {
			GFile* _tmp4_ = NULL;
			_tmp4_ = file;
			g_file_delete (_tmp4_, NULL, &_inner_error_);
			if (G_UNLIKELY (_inner_error_ != NULL)) {
				_g_object_unref0 (file);
				goto __catch11_g_error;
			}
		}
		_tmp6_ = file;
		_tmp7_ = g_file_create (_tmp6_, G_FILE_CREATE_REPLACE_DESTINATION, NULL, &_inner_error_);
		_tmp5_ = _tmp7_;
		if (G_UNLIKELY (_inner_error_ != NULL)) {
			_g_object_unref0 (file);
			goto __catch11_g_error;
		}
		_tmp8_ = g_data_output_stream_new ((GOutputStream*) _tmp5_);
		dos = _tmp8_;
		_tmp9_ = dos;
		_tmp10_ = value;
		g_data_output_stream_put_string (_tmp9_, _tmp10_, NULL, &_inner_error_);
		if (G_UNLIKELY (_inner_error_ != NULL)) {
			_g_object_unref0 (dos);
			_g_object_unref0 (_tmp5_);
			_g_object_unref0 (file);
			goto __catch11_g_error;
		}
		_tmp11_ = dos;
		g_output_stream_close ((GOutputStream*) _tmp11_, NULL, &_inner_error_);
		if (G_UNLIKELY (_inner_error_ != NULL)) {
			_g_object_unref0 (dos);
			_g_object_unref0 (_tmp5_);
			_g_object_unref0 (file);
			goto __catch11_g_error;
		}
		_g_object_unref0 (dos);
		_g_object_unref0 (_tmp5_);
		_g_object_unref0 (file);
	}
	goto __finally11;
	__catch11_g_error:
	{
		GError* e = NULL;
		FILE* _tmp12_ = NULL;
		GError* _tmp13_ = NULL;
		const gchar* _tmp14_ = NULL;
		e = _inner_error_;
		_inner_error_ = NULL;
		_tmp12_ = stderr;
		_tmp13_ = e;
		_tmp14_ = _tmp13_->message;
		fprintf (_tmp12_, "Error: %s\n", _tmp14_);
		_g_error_free0 (e);
	}
	__finally11:
	if (G_UNLIKELY (_inner_error_ != NULL)) {
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
	g_object_notify ((GObject *) self, "sheets-file");
}


static void controller_class_init (ControllerClass * klass) {
	controller_parent_class = g_type_class_peek_parent (klass);
	g_type_class_add_private (klass, sizeof (ControllerPrivate));
	G_OBJECT_CLASS (klass)->get_property = _vala_controller_get_property;
	G_OBJECT_CLASS (klass)->set_property = _vala_controller_set_property;
	G_OBJECT_CLASS (klass)->finalize = controller_finalize;
	g_object_class_install_property (G_OBJECT_CLASS (klass), CONTROLLER_INPUT, g_param_spec_object ("input", "input", "input", TYPE_INPUT_VIEW, G_PARAM_STATIC_NAME | G_PARAM_STATIC_NICK | G_PARAM_STATIC_BLURB | G_PARAM_READABLE));
	g_object_class_install_property (G_OBJECT_CLASS (klass), CONTROLLER_RESULTS, g_param_spec_object ("results", "results", "results", TYPE_RESULT_VIEW, G_PARAM_STATIC_NAME | G_PARAM_STATIC_NICK | G_PARAM_STATIC_BLURB | G_PARAM_READABLE));
	g_object_class_install_property (G_OBJECT_CLASS (klass), CONTROLLER_SETTINGS, g_param_spec_object ("settings", "settings", "settings", TYPE_NASC_SETTINGS, G_PARAM_STATIC_NAME | G_PARAM_STATIC_NICK | G_PARAM_STATIC_BLURB | G_PARAM_READABLE));
	g_object_class_install_property (G_OBJECT_CLASS (klass), CONTROLLER_ACTUAL_SHEET, g_param_spec_object ("actual-sheet", "actual-sheet", "actual-sheet", TYPE_NASC_SHEET, G_PARAM_STATIC_NAME | G_PARAM_STATIC_NICK | G_PARAM_STATIC_BLURB | G_PARAM_READABLE));
	g_object_class_install_property (G_OBJECT_CLASS (klass), CONTROLLER_SHEETS_FILE, g_param_spec_string ("sheets-file", "sheets-file", "sheets-file", NULL, G_PARAM_STATIC_NAME | G_PARAM_STATIC_NICK | G_PARAM_STATIC_BLURB | G_PARAM_READABLE | G_PARAM_WRITABLE));
	g_signal_new ("tutorial", TYPE_CONTROLLER, G_SIGNAL_RUN_LAST, 0, NULL, NULL, g_cclosure_marshal_VOID__VOID, G_TYPE_NONE, 0);
	g_signal_new ("periodic", TYPE_CONTROLLER, G_SIGNAL_RUN_LAST, 0, NULL, NULL, g_cclosure_marshal_VOID__VOID, G_TYPE_NONE, 0);
}


static void controller_instance_init (Controller * self) {
	const gchar* _tmp0_ = NULL;
	gchar* _tmp1_ = NULL;
	gchar* _tmp2_ = NULL;
	gchar* _tmp3_ = NULL;
	self->priv = CONTROLLER_GET_PRIVATE (self);
	self->priv->override_line = -1;
	self->priv->calc_lock = FALSE;
	_tmp0_ = g_get_home_dir ();
	_tmp1_ = g_strconcat (_tmp0_, NASC_SETTINGS_sheet_path, NULL);
	_tmp2_ = _tmp1_;
	_tmp3_ = g_strconcat (_tmp2_, "nasc.sheets", NULL);
	self->priv->sheet_path = _tmp3_;
	_g_free0 (_tmp2_);
}


static void controller_finalize (GObject* obj) {
	Controller * self;
	self = G_TYPE_CHECK_INSTANCE_CAST (obj, TYPE_CONTROLLER, Controller);
	_g_object_unref0 (self->priv->_input);
	_g_object_unref0 (self->priv->_results);
	_g_object_unref0 (self->priv->_settings);
	_g_regex_unref0 (self->priv->digit_regex);
	_g_object_unref0 (self->calculator);
	_g_object_unref0 (self->priv->enable_calc);
	_g_object_unref0 (self->priv->sheet_list);
	_g_object_unref0 (self->priv->_actual_sheet);
	_g_object_unref0 (self->priv->removal_list);
	_g_free0 (self->priv->sheet_path);
	_g_free0 (self->priv->_sheets);
	G_OBJECT_CLASS (controller_parent_class)->finalize (obj);
}


GType controller_get_type (void) {
	static volatile gsize controller_type_id__volatile = 0;
	if (g_once_init_enter (&controller_type_id__volatile)) {
		static const GTypeInfo g_define_type_info = { sizeof (ControllerClass), (GBaseInitFunc) NULL, (GBaseFinalizeFunc) NULL, (GClassInitFunc) controller_class_init, (GClassFinalizeFunc) NULL, NULL, sizeof (Controller), 0, (GInstanceInitFunc) controller_instance_init, NULL };
		GType controller_type_id;
		controller_type_id = g_type_register_static (G_TYPE_OBJECT, "Controller", &g_define_type_info, 0);
		g_once_init_leave (&controller_type_id__volatile, controller_type_id);
	}
	return controller_type_id__volatile;
}


static void _vala_controller_get_property (GObject * object, guint property_id, GValue * value, GParamSpec * pspec) {
	Controller * self;
	self = G_TYPE_CHECK_INSTANCE_CAST (object, TYPE_CONTROLLER, Controller);
	switch (property_id) {
		case CONTROLLER_INPUT:
		g_value_set_object (value, controller_get_input (self));
		break;
		case CONTROLLER_RESULTS:
		g_value_set_object (value, controller_get_results (self));
		break;
		case CONTROLLER_SETTINGS:
		g_value_set_object (value, controller_get_settings (self));
		break;
		case CONTROLLER_ACTUAL_SHEET:
		g_value_set_object (value, controller_get_actual_sheet (self));
		break;
		case CONTROLLER_SHEETS_FILE:
		g_value_set_string (value, controller_get_sheets_file (self));
		break;
		default:
		G_OBJECT_WARN_INVALID_PROPERTY_ID (object, property_id, pspec);
		break;
	}
}


static void _vala_controller_set_property (GObject * object, guint property_id, const GValue * value, GParamSpec * pspec) {
	Controller * self;
	self = G_TYPE_CHECK_INSTANCE_CAST (object, TYPE_CONTROLLER, Controller);
	switch (property_id) {
		case CONTROLLER_INPUT:
		controller_set_input (self, g_value_get_object (value));
		break;
		case CONTROLLER_RESULTS:
		controller_set_results (self, g_value_get_object (value));
		break;
		case CONTROLLER_SETTINGS:
		controller_set_settings (self, g_value_get_object (value));
		break;
		case CONTROLLER_ACTUAL_SHEET:
		controller_set_actual_sheet (self, g_value_get_object (value));
		break;
		case CONTROLLER_SHEETS_FILE:
		controller_set_sheets_file (self, g_value_get_string (value));
		break;
		default:
		G_OBJECT_WARN_INVALID_PROPERTY_ID (object, property_id, pspec);
		break;
	}
}


static void _vala_array_destroy (gpointer array, gint array_length, GDestroyNotify destroy_func) {
	if ((array != NULL) && (destroy_func != NULL)) {
		int i;
		for (i = 0; i < array_length; i = i + 1) {
			if (((gpointer*) array)[i] != NULL) {
				destroy_func (((gpointer*) array)[i]);
			}
		}
	}
}


static void _vala_array_free (gpointer array, gint array_length, GDestroyNotify destroy_func) {
	_vala_array_destroy (array, array_length, destroy_func);
	g_free (array);
}


static gint _vala_array_length (gpointer array) {
	int length;
	length = 0;
	if (array) {
		while (((gpointer*) array)[length]) {
			length++;
		}
	}
	return length;
}



