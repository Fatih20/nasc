/* InputView.c generated by valac 0.32.1, the Vala compiler
 * generated from InputView.vala, do not modify */

/*
 * Copyright (c) 2015 Peter Arnold
 *
 * This program is free software; you can redistribute it and/or
 * modify it under the terms of the GNU General Public
 * License as published by the Free Software Foundation; either
 * version 2 of the License, or (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
 * General Public License for more details.
 *
 * You should have received a copy of the GNU General Public
 * License along with this program; if not, write to the
 * Free Software Foundation, Inc., 59 Temple Place - Suite 330,
 * Boston, MA 02111-1307, USA.
 */

#include <glib.h>
#include <glib-object.h>
#include <gtk/gtk.h>
#include <gtksourceview/gtksource.h>
#include <gee.h>
#include <stdlib.h>
#include <string.h>
#include <gdk/gdk.h>
#include <pango/pango.h>
#include <float.h>
#include <math.h>
#include <cairo.h>


#define TYPE_INPUT_VIEW (input_view_get_type ())
#define INPUT_VIEW(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), TYPE_INPUT_VIEW, InputView))
#define INPUT_VIEW_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), TYPE_INPUT_VIEW, InputViewClass))
#define IS_INPUT_VIEW(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), TYPE_INPUT_VIEW))
#define IS_INPUT_VIEW_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), TYPE_INPUT_VIEW))
#define INPUT_VIEW_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), TYPE_INPUT_VIEW, InputViewClass))

typedef struct _InputView InputView;
typedef struct _InputViewClass InputViewClass;
typedef struct _InputViewPrivate InputViewPrivate;

#define TYPE_RESULT_BOX_WIDGET (result_box_widget_get_type ())
#define RESULT_BOX_WIDGET(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), TYPE_RESULT_BOX_WIDGET, ResultBoxWidget))
#define RESULT_BOX_WIDGET_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), TYPE_RESULT_BOX_WIDGET, ResultBoxWidgetClass))
#define IS_RESULT_BOX_WIDGET(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), TYPE_RESULT_BOX_WIDGET))
#define IS_RESULT_BOX_WIDGET_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), TYPE_RESULT_BOX_WIDGET))
#define RESULT_BOX_WIDGET_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), TYPE_RESULT_BOX_WIDGET, ResultBoxWidgetClass))

typedef struct _ResultBoxWidget ResultBoxWidget;
typedef struct _ResultBoxWidgetClass ResultBoxWidgetClass;
#define _g_object_unref0(var) ((var == NULL) ? NULL : (var = (g_object_unref (var), NULL)))
#define _g_regex_unref0(var) ((var == NULL) ? NULL : (var = (g_regex_unref (var), NULL)))
#define _g_free0(var) (var = (g_free (var), NULL))
#define _g_error_free0(var) ((var == NULL) ? NULL : (var = (g_error_free (var), NULL)))
#define __vala_PangoFontDescription_free0(var) ((var == NULL) ? NULL : (var = (_vala_PangoFontDescription_free (var), NULL)))
typedef struct _Block9Data Block9Data;
typedef struct _Block10Data Block10Data;
typedef struct _Block11Data Block11Data;
typedef struct _Block12Data Block12Data;
#define _g_match_info_unref0(var) ((var == NULL) ? NULL : (var = (g_match_info_unref (var), NULL)))

#define TYPE_RESULT_LINE (result_line_get_type ())
#define RESULT_LINE(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), TYPE_RESULT_LINE, ResultLine))
#define RESULT_LINE_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), TYPE_RESULT_LINE, ResultLineClass))
#define IS_RESULT_LINE(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), TYPE_RESULT_LINE))
#define IS_RESULT_LINE_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), TYPE_RESULT_LINE))
#define RESULT_LINE_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), TYPE_RESULT_LINE, ResultLineClass))

typedef struct _ResultLine ResultLine;
typedef struct _ResultLineClass ResultLineClass;
typedef struct _Block13Data Block13Data;
typedef struct _ResultBoxWidgetPrivate ResultBoxWidgetPrivate;
#define _g_list_free0(var) ((var == NULL) ? NULL : (var = (g_list_free (var), NULL)))

struct _InputView {
	GtkBox parent_instance;
	InputViewPrivate * priv;
	GtkSourceBuffer* buffer;
	GtkSourceView* source_view;
	GeeArrayList* operators;
	gboolean skip_change;
	gboolean scroll_needed;
};

struct _InputViewClass {
	GtkBoxClass parent_class;
};

struct _InputViewPrivate {
	GtkSourceSearchContext* search;
	GeeArrayList* result_widgets;
	gboolean add_space;
	GRegex* digit_regex;
	GRegex* non_digit_regex;
	gchar* line_regex;
	gint total_lines;
	gboolean backspace_button;
	gint actual_line;
	GdkCursor* x_term;
	GdkCursor* d_arrow;
	gboolean scrubb_hover;
	gint scrubb_press_x;
	gint org_value;
	gint start_scrub;
	gint scrub_width;
	GtkTextTag* scrub_tag;
	gint last_cursor;
};

struct _Block9Data {
	int _ref_count_;
	InputView* self;
	gchar* s;
};

struct _Block10Data {
	int _ref_count_;
	Block9Data * _data9_;
	gint res;
	gint line;
};

struct _Block11Data {
	int _ref_count_;
	Block10Data * _data10_;
	gint line;
	gint offset;
};

struct _Block12Data {
	int _ref_count_;
	Block10Data * _data10_;
	gint offset;
};

struct _Block13Data {
	int _ref_count_;
	InputView* self;
	ResultBoxWidget* widget;
};

struct _ResultBoxWidget {
	GtkDrawingArea parent_instance;
	ResultBoxWidgetPrivate * priv;
	ResultLine* result;
};

struct _ResultBoxWidgetClass {
	GtkDrawingAreaClass parent_class;
};


static gpointer input_view_parent_class = NULL;

GType input_view_get_type (void) G_GNUC_CONST;
GType result_box_widget_get_type (void) G_GNUC_CONST;
#define INPUT_VIEW_GET_PRIVATE(o) (G_TYPE_INSTANCE_GET_PRIVATE ((o), TYPE_INPUT_VIEW, InputViewPrivate))
enum  {
	INPUT_VIEW_DUMMY_PROPERTY
};
InputView* input_view_new (void);
InputView* input_view_construct (GType object_type);
#define NASC_left_margin 12
#define NASC_vertical_padding 8
static PangoFontDescription* _vala_PangoFontDescription_copy (PangoFontDescription* self);
static void __lambda6_ (InputView* self, GtkTextIter* it, const gchar* s, gint i);
static void input_view_process_insert_text (InputView* self, GtkTextIter* it, const gchar* s, gint i);
static void ___lambda6__gtk_text_buffer_insert_text (GtkTextBuffer* _sender, GtkTextIter* pos, const gchar* new_text, gint new_text_length, gpointer self);
static void __lambda9_ (InputView* self);
gchar* input_view_get_text_line_to_end (InputView* self, gint line);
static void ___lambda9__gtk_text_buffer_changed (GtkTextBuffer* _sender, gpointer self);
static gboolean __lambda10_ (InputView* self, GdkEventKey* e);
gint input_view_get_cursor_line (InputView* self);
gchar* input_view_get_replaced_marked_content (InputView* self);
static gboolean ___lambda10__gtk_widget_key_press_event (GtkWidget* _sender, GdkEventKey* event, gpointer self);
static void __lambda11_ (InputView* self, GObject* s, GParamSpec* p);
static void ___lambda11__g_object_notify (GObject* _sender, GParamSpec* pspec, gpointer self);
static void __lambda12_ (InputView* self);
static gboolean __lambda13_ (InputView* self);
gchar* input_view_get_replaced_marked_real_content (InputView* self);
static gboolean ___lambda13__gsource_func (gpointer self);
static void ___lambda12__gtk_text_view_copy_clipboard (GtkTextView* _sender, gpointer self);
static void __lambda14_ (InputView* self, GtkClipboard* c);
static gboolean __lambda15_ (InputView* self);
void input_view_process_new_content (InputView* self);
static gboolean ___lambda15__gsource_func (gpointer self);
static void ___lambda14__gtk_text_buffer_paste_done (GtkTextBuffer* _sender, GtkClipboard* clipboard, gpointer self);
static void input_view_scrubbing_mode (InputView* self);
#define NASC_top_padding 10
static void __lambda19_ (InputView* self);
static void ___lambda19__gtk_widget_realize (GtkWidget* _sender, gpointer self);
static void _vala_PangoFontDescription_free (PangoFontDescription* self);
static Block9Data* block9_data_ref (Block9Data* _data9_);
static void block9_data_unref (void * _userdata_);
static Block10Data* block10_data_ref (Block10Data* _data10_);
static void block10_data_unref (void * _userdata_);
static gboolean input_view_check_pre_it (InputView* self, const gchar* s, GtkTextIter* iter, GtkTextIter* iter2);
static Block11Data* block11_data_ref (Block11Data* _data11_);
static void block11_data_unref (void * _userdata_);
static gboolean ____lambda7_ (Block11Data* _data11_);
static gboolean _____lambda7__gsource_func (gpointer self);
static gint input_view_check_pre_it_before_digits (InputView* self, const gchar* s, GtkTextIter* iter, GtkTextIter* iter2);
static Block12Data* block12_data_ref (Block12Data* _data12_);
static void block12_data_unref (void * _userdata_);
static gboolean ____lambda8_ (Block12Data* _data12_);
static gboolean _____lambda8__gsource_func (gpointer self);
static void _vala_array_add2 (gint** array, int* length, int* size, gint value);
static void _vala_array_add3 (gint** array, int* length, int* size, gint value);
static gboolean input_view_real_draw (GtkWidget* base, cairo_t* context);
gboolean result_box_widget_draw_content (ResultBoxWidget* self, cairo_t* context, gint x, gint y);
void input_view_insert_text (InputView* self, const gchar* text);
void input_view_delete_characters (InputView* self, gint count);
GType result_line_get_type (void) G_GNUC_CONST;
void input_view_insert_variable (InputView* self, ResultLine* res);
static Block13Data* block13_data_ref (Block13Data* _data13_);
static void block13_data_unref (void * _userdata_);
gint result_line_get_line (ResultLine* self);
ResultBoxWidget* result_box_widget_new (gint line_number, ResultLine* _result_);
ResultBoxWidget* result_box_widget_construct (GType object_type, gint line_number, ResultLine* _result_);
static void __lambda20_ (Block13Data* _data13_);
static void ___lambda20__gtk_widget_destroy (GtkWidget* _sender, gpointer self);
static void __lambda21_ (InputView* self);
static void ___lambda21__result_line_changed (ResultLine* _sender, gpointer self);
static gchar* input_view_replace_widget_markers (InputView* self, gint line_number, const gchar* text, gboolean for_calculator, gboolean real_values);
gchar* input_view_get_replaced_content (InputView* self);
static void _vala_array_add4 (gint** array, int* length, int* size, gint value);
const gchar* result_line_get_full_value (ResultLine* self);
gchar* result_box_widget_get_variable_name (ResultBoxWidget* self);
static gboolean __lambda16_ (InputView* self, GdkEventMotion* e);
static void input_view_forward_till_no_digit (InputView* self, GtkTextIter* it);
static gboolean ___lambda16__gtk_widget_motion_notify_event (GtkWidget* _sender, GdkEventMotion* event, gpointer self);
static gboolean __lambda17_ (InputView* self, GdkEventButton* e);
static gboolean ___lambda17__gtk_widget_button_press_event (GtkWidget* _sender, GdkEventButton* event, gpointer self);
static gboolean __lambda18_ (InputView* self, GdkEventButton* e);
static gboolean ___lambda18__gtk_widget_button_release_event (GtkWidget* _sender, GdkEventButton* event, gpointer self);
static void g_cclosure_user_marshal_VOID__INT_INT (GClosure * closure, GValue * return_value, guint n_param_values, const GValue * param_values, gpointer invocation_hint, gpointer marshal_data);
static void g_cclosure_user_marshal_VOID__INT_INT_STRING (GClosure * closure, GValue * return_value, guint n_param_values, const GValue * param_values, gpointer invocation_hint, gpointer marshal_data);
static void input_view_finalize (GObject* obj);
static void _vala_array_destroy (gpointer array, gint array_length, GDestroyNotify destroy_func);
static void _vala_array_free (gpointer array, gint array_length, GDestroyNotify destroy_func);
static gint _vala_array_length (gpointer array);


static PangoFontDescription* _vala_PangoFontDescription_copy (PangoFontDescription* self) {
	return g_boxed_copy (pango_font_description_get_type (), self);
}


static gpointer __vala_PangoFontDescription_copy0 (gpointer self) {
	return self ? _vala_PangoFontDescription_copy (self) : NULL;
}


static void __lambda6_ (InputView* self, GtkTextIter* it, const gchar* s, gint i) {
	const gchar* _tmp0_ = NULL;
	gint _tmp1_ = 0;
	g_return_if_fail (it != NULL);
	g_return_if_fail (s != NULL);
	_tmp0_ = s;
	_tmp1_ = i;
	input_view_process_insert_text (self, it, _tmp0_, _tmp1_);
}


static void ___lambda6__gtk_text_buffer_insert_text (GtkTextBuffer* _sender, GtkTextIter* pos, const gchar* new_text, gint new_text_length, gpointer self) {
	__lambda6_ ((InputView*) self, pos, new_text, new_text_length);
}


static void __lambda9_ (InputView* self) {
	gboolean _tmp0_ = FALSE;
	gboolean _tmp1_ = FALSE;
	GtkTextIter iter = {0};
	GtkSourceView* _tmp3_ = NULL;
	GtkTextBuffer* _tmp4_ = NULL;
	GtkTextBuffer* _tmp5_ = NULL;
	GtkSourceView* _tmp6_ = NULL;
	GtkTextBuffer* _tmp7_ = NULL;
	GtkTextBuffer* _tmp8_ = NULL;
	gint _tmp9_ = 0;
	gint _tmp10_ = 0;
	GtkTextIter _tmp11_ = {0};
	gint actual_line = 0;
	gint _tmp12_ = 0;
	gint lines = 0;
	GtkSourceView* _tmp13_ = NULL;
	GtkTextBuffer* _tmp14_ = NULL;
	GtkTextBuffer* _tmp15_ = NULL;
	gchar* _tmp16_ = NULL;
	gchar* _tmp17_ = NULL;
	gchar* _tmp18_ = NULL;
	gchar** _tmp19_ = NULL;
	gchar** _tmp20_ = NULL;
	gchar** _tmp21_ = NULL;
	gint _tmp21__length1 = 0;
	gint _tmp22_ = 0;
	gint _tmp23_ = 0;
	gint _tmp24_ = 0;
	gint _tmp37_ = 0;
	gint _tmp38_ = 0;
	gint _tmp39_ = 0;
	gint _tmp40_ = 0;
	gchar* _tmp41_ = NULL;
	gchar* _tmp42_ = NULL;
	gint _tmp43_ = 0;
	gint _tmp44_ = 0;
	_tmp1_ = self->priv->add_space;
	if (_tmp1_) {
		_tmp0_ = TRUE;
	} else {
		gboolean _tmp2_ = FALSE;
		_tmp2_ = self->skip_change;
		_tmp0_ = _tmp2_;
	}
	if (_tmp0_) {
		return;
	}
	_tmp3_ = self->source_view;
	_tmp4_ = gtk_text_view_get_buffer ((GtkTextView*) _tmp3_);
	_tmp5_ = _tmp4_;
	_tmp6_ = self->source_view;
	_tmp7_ = gtk_text_view_get_buffer ((GtkTextView*) _tmp6_);
	_tmp8_ = _tmp7_;
	g_object_get (_tmp8_, "cursor-position", &_tmp9_, NULL);
	_tmp10_ = _tmp9_;
	gtk_text_buffer_get_iter_at_offset (_tmp5_, &_tmp11_, _tmp10_);
	iter = _tmp11_;
	_tmp12_ = gtk_text_iter_get_line (&iter);
	actual_line = _tmp12_;
	_tmp13_ = self->source_view;
	_tmp14_ = gtk_text_view_get_buffer ((GtkTextView*) _tmp13_);
	_tmp15_ = _tmp14_;
	g_object_get (_tmp15_, "text", &_tmp16_, NULL);
	_tmp17_ = _tmp16_;
	_tmp18_ = _tmp17_;
	_tmp20_ = _tmp19_ = g_strsplit (_tmp18_, "\n", 0);
	_tmp21_ = _tmp20_;
	_tmp21__length1 = _vala_array_length (_tmp19_);
	_tmp22_ = _vala_array_length (_tmp19_);
	_tmp21_ = (_vala_array_free (_tmp21_, _tmp21__length1, (GDestroyNotify) g_free), NULL);
	_g_free0 (_tmp18_);
	lines = _tmp22_;
	_tmp23_ = lines;
	_tmp24_ = self->priv->total_lines;
	if (_tmp23_ != _tmp24_) {
		gint _tmp25_ = 0;
		gint _tmp26_ = 0;
		_tmp25_ = lines;
		_tmp26_ = self->priv->total_lines;
		if (_tmp25_ > _tmp26_) {
			gint _tmp27_ = 0;
			gint _tmp28_ = 0;
			gint _tmp29_ = 0;
			_tmp27_ = actual_line;
			_tmp28_ = lines;
			_tmp29_ = self->priv->total_lines;
			g_signal_emit_by_name (self, "line-added", _tmp27_, _tmp28_ - _tmp29_);
		} else {
			gboolean _tmp30_ = FALSE;
			_tmp30_ = self->priv->backspace_button;
			if (_tmp30_) {
				gint _tmp31_ = 0;
				gint _tmp32_ = 0;
				gint _tmp33_ = 0;
				_tmp31_ = actual_line;
				_tmp32_ = self->priv->total_lines;
				_tmp33_ = lines;
				g_signal_emit_by_name (self, "line-removed", _tmp31_, _tmp32_ - _tmp33_);
			} else {
				gint _tmp34_ = 0;
				gint _tmp35_ = 0;
				gint _tmp36_ = 0;
				_tmp34_ = actual_line;
				_tmp35_ = self->priv->total_lines;
				_tmp36_ = lines;
				g_signal_emit_by_name (self, "line-removed", _tmp34_ - 1, _tmp35_ - _tmp36_);
			}
		}
	}
	_tmp37_ = lines;
	self->priv->total_lines = _tmp37_;
	_tmp38_ = actual_line;
	_tmp39_ = lines;
	_tmp40_ = actual_line;
	_tmp41_ = input_view_get_text_line_to_end (self, _tmp40_);
	_tmp42_ = _tmp41_;
	g_signal_emit_by_name (self, "changed-line", _tmp38_, _tmp39_, _tmp42_);
	_g_free0 (_tmp42_);
	_tmp43_ = actual_line;
	_tmp44_ = lines;
	self->scroll_needed = _tmp43_ == (_tmp44_ - 1);
	self->priv->backspace_button = FALSE;
}


static void ___lambda9__gtk_text_buffer_changed (GtkTextBuffer* _sender, gpointer self) {
	__lambda9_ ((InputView*) self);
}


static gboolean __lambda10_ (InputView* self, GdkEventKey* e) {
	gboolean result = FALSE;
	GdkEventKey* _tmp0_ = NULL;
	guint _tmp1_ = 0U;
	GdkEventKey* _tmp4_ = NULL;
	GdkModifierType _tmp5_ = 0;
	g_return_val_if_fail (e != NULL, FALSE);
	_tmp0_ = e;
	_tmp1_ = _tmp0_->keyval;
	if (_tmp1_ == ((guint) GDK_KEY_Escape)) {
		self->skip_change = TRUE;
		g_signal_emit_by_name (self, "escape");
		self->skip_change = FALSE;
		result = TRUE;
		return result;
	} else {
		GdkEventKey* _tmp2_ = NULL;
		guint _tmp3_ = 0U;
		_tmp2_ = e;
		_tmp3_ = _tmp2_->keyval;
		if (_tmp3_ == ((guint) GDK_KEY_BackSpace)) {
			self->priv->backspace_button = TRUE;
			result = FALSE;
			return result;
		}
	}
	_tmp4_ = e;
	_tmp5_ = _tmp4_->state;
	if ((_tmp5_ & GDK_CONTROL_MASK) != 0) {
		GdkEventKey* _tmp6_ = NULL;
		guint _tmp7_ = 0U;
		_tmp6_ = e;
		_tmp7_ = _tmp6_->keyval;
		switch (_tmp7_) {
			case GDK_KEY_l:
			{
				gint line = 0;
				gint _tmp8_ = 0;
				gint _tmp9_ = 0;
				gint _tmp10_ = 0;
				_tmp8_ = input_view_get_cursor_line (self);
				line = _tmp8_;
				_tmp9_ = line;
				if (_tmp9_ == 0) {
					result = TRUE;
					return result;
				}
				_tmp10_ = line;
				g_signal_emit_by_name (self, "insert-result", _tmp10_ - 1);
				result = TRUE;
				return result;
			}
			case GDK_KEY_o:
			{
				self->skip_change = TRUE;
				g_signal_emit_by_name (self, "open");
				self->skip_change = FALSE;
				result = TRUE;
				return result;
			}
			case GDK_KEY_n:
			{
				self->skip_change = TRUE;
				g_signal_emit_by_name (self, "new-trigger");
				self->skip_change = FALSE;
				result = TRUE;
				return result;
			}
			case GDK_KEY_r:
			{
				GtkSourceView* _tmp11_ = NULL;
				GtkTextBuffer* _tmp12_ = NULL;
				GtkTextBuffer* _tmp13_ = NULL;
				_tmp11_ = self->source_view;
				_tmp12_ = gtk_text_view_get_buffer ((GtkTextView*) _tmp11_);
				_tmp13_ = _tmp12_;
				gtk_text_buffer_insert_at_cursor (_tmp13_, "√", -1);
				result = TRUE;
				return result;
			}
			case GDK_KEY_p:
			{
				GtkSourceView* _tmp14_ = NULL;
				GtkTextBuffer* _tmp15_ = NULL;
				GtkTextBuffer* _tmp16_ = NULL;
				_tmp14_ = self->source_view;
				_tmp15_ = gtk_text_view_get_buffer ((GtkTextView*) _tmp14_);
				_tmp16_ = _tmp15_;
				gtk_text_buffer_insert_at_cursor (_tmp16_, "π", -1);
				result = TRUE;
				return result;
			}
			case GDK_KEY_h:
			{
				g_signal_emit_by_name (self, "help");
				result = TRUE;
				return result;
			}
			case GDK_KEY_C:
			{
				gchar* text = NULL;
				gchar* _tmp17_ = NULL;
				const gchar* _tmp18_ = NULL;
				GtkClipboard* _tmp19_ = NULL;
				const gchar* _tmp20_ = NULL;
				_tmp17_ = input_view_get_replaced_marked_content (self);
				text = _tmp17_;
				_tmp18_ = text;
				if (_tmp18_ == NULL) {
					result = TRUE;
					_g_free0 (text);
					return result;
				}
				_tmp19_ = gtk_clipboard_get (GDK_SELECTION_CLIPBOARD);
				_tmp20_ = text;
				gtk_clipboard_set_text (_tmp19_, _tmp20_, -1);
				result = TRUE;
				_g_free0 (text);
				return result;
			}
			case GDK_KEY_0:
			{
				GtkSourceView* _tmp21_ = NULL;
				GtkTextBuffer* _tmp22_ = NULL;
				GtkTextBuffer* _tmp23_ = NULL;
				_tmp21_ = self->source_view;
				_tmp22_ = gtk_text_view_get_buffer ((GtkTextView*) _tmp21_);
				_tmp23_ = _tmp22_;
				gtk_text_buffer_insert_at_cursor (_tmp23_, "°", -1);
				result = TRUE;
				return result;
			}
			case GDK_KEY_2:
			{
				GtkSourceView* _tmp24_ = NULL;
				GtkTextBuffer* _tmp25_ = NULL;
				GtkTextBuffer* _tmp26_ = NULL;
				_tmp24_ = self->source_view;
				_tmp25_ = gtk_text_view_get_buffer ((GtkTextView*) _tmp24_);
				_tmp26_ = _tmp25_;
				gtk_text_buffer_insert_at_cursor (_tmp26_, "²", -1);
				result = TRUE;
				return result;
			}
			case GDK_KEY_3:
			{
				GtkSourceView* _tmp27_ = NULL;
				GtkTextBuffer* _tmp28_ = NULL;
				GtkTextBuffer* _tmp29_ = NULL;
				_tmp27_ = self->source_view;
				_tmp28_ = gtk_text_view_get_buffer ((GtkTextView*) _tmp27_);
				_tmp29_ = _tmp28_;
				gtk_text_buffer_insert_at_cursor (_tmp29_, "³", -1);
				result = TRUE;
				return result;
			}
			case GDK_KEY_4:
			{
				GtkSourceView* _tmp30_ = NULL;
				GtkTextBuffer* _tmp31_ = NULL;
				GtkTextBuffer* _tmp32_ = NULL;
				_tmp30_ = self->source_view;
				_tmp31_ = gtk_text_view_get_buffer ((GtkTextView*) _tmp30_);
				_tmp32_ = _tmp31_;
				gtk_text_buffer_insert_at_cursor (_tmp32_, "⁴", -1);
				result = TRUE;
				return result;
			}
			default:
			{
				break;
			}
		}
	}
	result = FALSE;
	return result;
}


static gboolean ___lambda10__gtk_widget_key_press_event (GtkWidget* _sender, GdkEventKey* event, gpointer self) {
	gboolean result;
	result = __lambda10_ ((InputView*) self, event);
	return result;
}


static void __lambda11_ (InputView* self, GObject* s, GParamSpec* p) {
	GtkTextIter iter = {0};
	GtkSourceView* _tmp0_ = NULL;
	GtkTextBuffer* _tmp1_ = NULL;
	GtkTextBuffer* _tmp2_ = NULL;
	GtkSourceView* _tmp3_ = NULL;
	GtkTextBuffer* _tmp4_ = NULL;
	GtkTextBuffer* _tmp5_ = NULL;
	gint _tmp6_ = 0;
	gint _tmp7_ = 0;
	GtkTextIter _tmp8_ = {0};
	gint line = 0;
	gint _tmp9_ = 0;
	gint _tmp10_ = 0;
	gint _tmp11_ = 0;
	g_return_if_fail (s != NULL);
	g_return_if_fail (p != NULL);
	memset (&iter, 0, sizeof (GtkTextIter));
	_tmp0_ = self->source_view;
	_tmp1_ = gtk_text_view_get_buffer ((GtkTextView*) _tmp0_);
	_tmp2_ = _tmp1_;
	_tmp3_ = self->source_view;
	_tmp4_ = gtk_text_view_get_buffer ((GtkTextView*) _tmp3_);
	_tmp5_ = _tmp4_;
	g_object_get (_tmp5_, "cursor-position", &_tmp6_, NULL);
	_tmp7_ = _tmp6_;
	gtk_text_buffer_get_iter_at_offset (_tmp2_, &_tmp8_, _tmp7_);
	iter = _tmp8_;
	_tmp9_ = gtk_text_iter_get_line (&iter);
	line = _tmp9_;
	_tmp10_ = self->priv->actual_line;
	_tmp11_ = line;
	if (_tmp10_ != _tmp11_) {
		gint _tmp12_ = 0;
		gint _tmp13_ = 0;
		_tmp12_ = line;
		g_signal_emit_by_name (self, "cursor-line-change", _tmp12_);
		_tmp13_ = line;
		self->priv->actual_line = _tmp13_;
	}
}


static void ___lambda11__g_object_notify (GObject* _sender, GParamSpec* pspec, gpointer self) {
	__lambda11_ ((InputView*) self, _sender, pspec);
}


static gboolean __lambda13_ (InputView* self) {
	gboolean result = FALSE;
	gchar* text = NULL;
	gchar* _tmp0_ = NULL;
	const gchar* _tmp1_ = NULL;
	GtkClipboard* _tmp2_ = NULL;
	const gchar* _tmp3_ = NULL;
	_tmp0_ = input_view_get_replaced_marked_real_content (self);
	text = _tmp0_;
	_tmp1_ = text;
	if (_tmp1_ == NULL) {
		result = FALSE;
		_g_free0 (text);
		return result;
	}
	_tmp2_ = gtk_clipboard_get (GDK_SELECTION_CLIPBOARD);
	_tmp3_ = text;
	gtk_clipboard_set_text (_tmp2_, _tmp3_, -1);
	result = FALSE;
	_g_free0 (text);
	return result;
}


static gboolean ___lambda13__gsource_func (gpointer self) {
	gboolean result;
	result = __lambda13_ ((InputView*) self);
	return result;
}


static void __lambda12_ (InputView* self) {
	g_timeout_add_full (G_PRIORITY_DEFAULT, (guint) 10, ___lambda13__gsource_func, g_object_ref (self), g_object_unref);
}


static void ___lambda12__gtk_text_view_copy_clipboard (GtkTextView* _sender, gpointer self) {
	__lambda12_ ((InputView*) self);
}


static gboolean __lambda15_ (InputView* self) {
	gboolean result = FALSE;
	input_view_process_new_content (self);
	result = FALSE;
	return result;
}


static gboolean ___lambda15__gsource_func (gpointer self) {
	gboolean result;
	result = __lambda15_ ((InputView*) self);
	return result;
}


static void __lambda14_ (InputView* self, GtkClipboard* c) {
	gchar* _tmp0_ = NULL;
	gchar* _tmp1_ = NULL;
	g_return_if_fail (c != NULL);
	_tmp0_ = input_view_get_text_line_to_end (self, 0);
	_tmp1_ = _tmp0_;
	g_signal_emit_by_name (self, "changed-line", 0, -1, _tmp1_);
	_g_free0 (_tmp1_);
	g_timeout_add_full (G_PRIORITY_DEFAULT, (guint) 80, ___lambda15__gsource_func, g_object_ref (self), g_object_unref);
}


static void ___lambda14__gtk_text_buffer_paste_done (GtkTextBuffer* _sender, GtkClipboard* clipboard, gpointer self) {
	__lambda14_ ((InputView*) self, clipboard);
}


static void __lambda19_ (InputView* self) {
	GdkRGBA color = {0};
	GtkSourceView* _tmp0_ = NULL;
	GtkStyleContext* _tmp1_ = NULL;
	GdkRGBA _tmp2_ = {0};
	GdkRGBA _tmp3_ = {0};
	memset (&color, 0, sizeof (GdkRGBA));
	_tmp0_ = self->source_view;
	_tmp1_ = gtk_widget_get_style_context ((GtkWidget*) _tmp0_);
	gtk_style_context_lookup_color (_tmp1_, "theme_base_color", &_tmp2_);
	color = _tmp2_;
	_tmp3_ = color;
	gtk_widget_override_background_color ((GtkWidget*) self, GTK_STATE_FLAG_NORMAL, &_tmp3_);
}


static void ___lambda19__gtk_widget_realize (GtkWidget* _sender, gpointer self) {
	__lambda19_ ((InputView*) self);
}


static gpointer _g_object_ref0 (gpointer self) {
	return self ? g_object_ref (self) : NULL;
}


static void _vala_PangoFontDescription_free (PangoFontDescription* self) {
	g_boxed_free (pango_font_description_get_type (), self);
}


InputView* input_view_construct (GType object_type) {
	InputView * self = NULL;
	GtkSourceView* _tmp6_ = NULL;
	GtkSourceBuffer* _tmp7_ = NULL;
	GtkSourceBuffer* _tmp8_ = NULL;
	GtkSourceSearchSettings* _tmp9_ = NULL;
	GtkSourceSearchSettings* _tmp10_ = NULL;
	GtkSourceSearchContext* _tmp11_ = NULL;
	GtkSourceSearchContext* _tmp12_ = NULL;
	GtkSourceSearchSettings* _tmp13_ = NULL;
	GtkSourceSearchSettings* _tmp14_ = NULL;
	GtkSourceSearchContext* _tmp15_ = NULL;
	GtkSourceSearchSettings* _tmp16_ = NULL;
	GtkSourceSearchSettings* _tmp17_ = NULL;
	GtkSourceSearchContext* _tmp18_ = NULL;
	GtkSourceSearchSettings* _tmp19_ = NULL;
	GtkSourceSearchSettings* _tmp20_ = NULL;
	const gchar* _tmp21_ = NULL;
	GtkSourceSearchContext* _tmp22_ = NULL;
	GeeArrayList* _tmp23_ = NULL;
	GtkSourceView* _tmp24_ = NULL;
	GtkSourceBuffer* _tmp25_ = NULL;
	GtkSourceView* _tmp26_ = NULL;
	GtkSourceView* _tmp27_ = NULL;
	GtkSourceView* _tmp28_ = NULL;
	PangoFontDescription* font_desc = NULL;
	GtkSourceView* _tmp29_ = NULL;
	GtkStyleContext* _tmp30_ = NULL;
	PangoFontDescription* _tmp31_ = NULL;
	PangoFontDescription* _tmp32_ = NULL;
	GtkSourceView* _tmp33_ = NULL;
	GtkSourceView* _tmp34_ = NULL;
	GtkTextBuffer* _tmp35_ = NULL;
	GtkTextBuffer* _tmp36_ = NULL;
	GtkSourceView* _tmp37_ = NULL;
	GtkTextBuffer* _tmp38_ = NULL;
	GtkTextBuffer* _tmp39_ = NULL;
	GtkSourceView* _tmp40_ = NULL;
	GtkSourceView* _tmp41_ = NULL;
	GtkTextBuffer* _tmp42_ = NULL;
	GtkTextBuffer* _tmp43_ = NULL;
	GtkSourceView* _tmp44_ = NULL;
	GtkSourceView* _tmp45_ = NULL;
	GtkTextBuffer* _tmp46_ = NULL;
	GtkTextBuffer* _tmp47_ = NULL;
	GtkAlignment* alignment = NULL;
	GtkAlignment* _tmp48_ = NULL;
	GtkSourceView* _tmp49_ = NULL;
	GtkSourceView* _tmp50_ = NULL;
	gchar** dirs = NULL;
	gchar* _tmp51_ = NULL;
	gchar** _tmp52_ = NULL;
	gint dirs_length1 = 0;
	gint _dirs_size_ = 0;
	GtkSourceLanguageManager* lang_manager = NULL;
	GtkSourceLanguageManager* _tmp53_ = NULL;
	GtkSourceLanguageManager* _tmp54_ = NULL;
	GtkSourceBuffer* _tmp55_ = NULL;
	GtkSourceLanguage* _tmp56_ = NULL;
	GtkSourceStyleSchemeManager* style_scheme_manager = NULL;
	GtkSourceStyleSchemeManager* _tmp57_ = NULL;
	GtkSourceBuffer* _tmp58_ = NULL;
	GtkSourceStyleScheme* _tmp59_ = NULL;
	GError * _inner_error_ = NULL;
	self = (InputView*) g_object_new (object_type, NULL);
	{
		GRegex* _tmp0_ = NULL;
		GRegex* _tmp1_ = NULL;
		GRegex* _tmp2_ = NULL;
		GRegex* _tmp3_ = NULL;
		GRegex* _tmp4_ = NULL;
		GRegex* _tmp5_ = NULL;
		_tmp1_ = g_regex_new ("\\d+", G_REGEX_OPTIMIZE, 0, &_inner_error_);
		_tmp0_ = _tmp1_;
		if (G_UNLIKELY (_inner_error_ != NULL)) {
			if (_inner_error_->domain == G_REGEX_ERROR) {
				goto __catch12_g_regex_error;
			}
			g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
			g_clear_error (&_inner_error_);
			return NULL;
		}
		_tmp2_ = _tmp0_;
		_tmp0_ = NULL;
		_g_regex_unref0 (self->priv->digit_regex);
		self->priv->digit_regex = _tmp2_;
		_tmp4_ = g_regex_new ("[A-Za-z]", G_REGEX_OPTIMIZE, 0, &_inner_error_);
		_tmp3_ = _tmp4_;
		if (G_UNLIKELY (_inner_error_ != NULL)) {
			_g_regex_unref0 (_tmp0_);
			if (_inner_error_->domain == G_REGEX_ERROR) {
				goto __catch12_g_regex_error;
			}
			_g_regex_unref0 (_tmp0_);
			g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
			g_clear_error (&_inner_error_);
			return NULL;
		}
		_tmp5_ = _tmp3_;
		_tmp3_ = NULL;
		_g_regex_unref0 (self->priv->non_digit_regex);
		self->priv->non_digit_regex = _tmp5_;
		_g_regex_unref0 (_tmp3_);
		_g_regex_unref0 (_tmp0_);
	}
	goto __finally12;
	__catch12_g_regex_error:
	{
		GError* ex = NULL;
		ex = _inner_error_;
		_inner_error_ = NULL;
		_g_error_free0 (ex);
	}
	__finally12:
	if (G_UNLIKELY (_inner_error_ != NULL)) {
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return NULL;
	}
	_tmp6_ = (GtkSourceView*) gtk_source_view_new ();
	g_object_ref_sink (_tmp6_);
	_g_object_unref0 (self->source_view);
	self->source_view = _tmp6_;
	_tmp7_ = gtk_source_buffer_new (NULL);
	_g_object_unref0 (self->buffer);
	self->buffer = _tmp7_;
	_tmp8_ = self->buffer;
	_tmp9_ = gtk_source_search_settings_new ();
	_tmp10_ = _tmp9_;
	_tmp11_ = gtk_source_search_context_new (_tmp8_, _tmp10_);
	_g_object_unref0 (self->priv->search);
	self->priv->search = _tmp11_;
	_g_object_unref0 (_tmp10_);
	_tmp12_ = self->priv->search;
	_tmp13_ = gtk_source_search_context_get_settings (_tmp12_);
	_tmp14_ = _tmp13_;
	gtk_source_search_settings_set_regex_enabled (_tmp14_, TRUE);
	_tmp15_ = self->priv->search;
	_tmp16_ = gtk_source_search_context_get_settings (_tmp15_);
	_tmp17_ = _tmp16_;
	gtk_source_search_settings_set_case_sensitive (_tmp17_, FALSE);
	_tmp18_ = self->priv->search;
	_tmp19_ = gtk_source_search_context_get_settings (_tmp18_);
	_tmp20_ = _tmp19_;
	_tmp21_ = self->priv->line_regex;
	gtk_source_search_settings_set_search_text (_tmp20_, _tmp21_);
	_tmp22_ = self->priv->search;
	gtk_source_search_context_set_highlight (_tmp22_, TRUE);
	_tmp23_ = gee_array_list_new (TYPE_RESULT_BOX_WIDGET, (GBoxedCopyFunc) g_object_ref, g_object_unref, NULL, NULL, NULL);
	_g_object_unref0 (self->priv->result_widgets);
	self->priv->result_widgets = _tmp23_;
	_tmp24_ = self->source_view;
	_tmp25_ = self->buffer;
	gtk_text_view_set_buffer ((GtkTextView*) _tmp24_, (GtkTextBuffer*) _tmp25_);
	_tmp26_ = self->source_view;
	gtk_source_view_set_show_line_numbers (_tmp26_, TRUE);
	_tmp27_ = self->source_view;
	gtk_text_view_set_left_margin ((GtkTextView*) _tmp27_, NASC_left_margin - 5);
	_tmp28_ = self->source_view;
	gtk_text_view_set_pixels_below_lines ((GtkTextView*) _tmp28_, NASC_vertical_padding);
	_tmp29_ = self->source_view;
	_tmp30_ = gtk_widget_get_style_context ((GtkWidget*) _tmp29_);
	_tmp31_ = gtk_style_context_get_font (_tmp30_, GTK_STATE_FLAG_NORMAL);
	_tmp32_ = __vala_PangoFontDescription_copy0 (_tmp31_);
	font_desc = _tmp32_;
	pango_font_description_set_size (font_desc, 12 * PANGO_SCALE);
	_tmp33_ = self->source_view;
	gtk_widget_override_font ((GtkWidget*) _tmp33_, font_desc);
	_tmp34_ = self->source_view;
	_tmp35_ = gtk_text_view_get_buffer ((GtkTextView*) _tmp34_);
	_tmp36_ = _tmp35_;
	g_signal_connect_object (_tmp36_, "insert-text", (GCallback) ___lambda6__gtk_text_buffer_insert_text, self, 0);
	_tmp37_ = self->source_view;
	_tmp38_ = gtk_text_view_get_buffer ((GtkTextView*) _tmp37_);
	_tmp39_ = _tmp38_;
	g_signal_connect_object (_tmp39_, "changed", (GCallback) ___lambda9__gtk_text_buffer_changed, self, 0);
	_tmp40_ = self->source_view;
	g_signal_connect_object ((GtkWidget*) _tmp40_, "key-press-event", (GCallback) ___lambda10__gtk_widget_key_press_event, self, 0);
	_tmp41_ = self->source_view;
	_tmp42_ = gtk_text_view_get_buffer ((GtkTextView*) _tmp41_);
	_tmp43_ = _tmp42_;
	g_signal_connect_object ((GObject*) _tmp43_, "notify::cursor-position", (GCallback) ___lambda11__g_object_notify, self, 0);
	_tmp44_ = self->source_view;
	g_signal_connect_object ((GtkTextView*) _tmp44_, "copy-clipboard", (GCallback) ___lambda12__gtk_text_view_copy_clipboard, self, 0);
	_tmp45_ = self->source_view;
	_tmp46_ = gtk_text_view_get_buffer ((GtkTextView*) _tmp45_);
	_tmp47_ = _tmp46_;
	g_signal_connect_object (_tmp47_, "paste-done", (GCallback) ___lambda14__gtk_text_buffer_paste_done, self, 0);
	input_view_scrubbing_mode (self);
	_tmp48_ = (GtkAlignment*) gtk_alignment_new ((gfloat) 0, (gfloat) 0, (gfloat) 1, (gfloat) 1);
	g_object_ref_sink (_tmp48_);
	alignment = _tmp48_;
	g_object_set (alignment, "top-padding", (guint) NASC_top_padding, NULL);
	_tmp49_ = self->source_view;
	gtk_container_add ((GtkContainer*) alignment, (GtkWidget*) _tmp49_);
	_tmp50_ = self->source_view;
	g_signal_connect_object ((GtkWidget*) _tmp50_, "realize", (GCallback) ___lambda19__gtk_widget_realize, self, 0);
	gtk_box_pack_start ((GtkBox*) self, (GtkWidget*) alignment, TRUE, TRUE, (guint) 0);
	_tmp51_ = g_strdup ("/usr/share/qalculate/styles/");
	_tmp52_ = g_new0 (gchar*, 1 + 1);
	_tmp52_[0] = _tmp51_;
	dirs = _tmp52_;
	dirs_length1 = 1;
	_dirs_size_ = dirs_length1;
	_tmp53_ = gtk_source_language_manager_get_default ();
	_tmp54_ = _g_object_ref0 (_tmp53_);
	lang_manager = _tmp54_;
	gtk_source_language_manager_set_search_path (lang_manager, dirs);
	_tmp55_ = self->buffer;
	_tmp56_ = gtk_source_language_manager_get_language (lang_manager, "nasc");
	gtk_source_buffer_set_language (_tmp55_, _tmp56_);
	_tmp57_ = gtk_source_style_scheme_manager_new ();
	style_scheme_manager = _tmp57_;
	gtk_source_style_scheme_manager_set_search_path (style_scheme_manager, dirs);
	_tmp58_ = self->buffer;
	_tmp59_ = gtk_source_style_scheme_manager_get_scheme (style_scheme_manager, "nasc");
	gtk_source_buffer_set_style_scheme (_tmp58_, _tmp59_);
	_g_object_unref0 (style_scheme_manager);
	_g_object_unref0 (lang_manager);
	dirs = (_vala_array_free (dirs, dirs_length1, (GDestroyNotify) g_free), NULL);
	_g_object_unref0 (alignment);
	__vala_PangoFontDescription_free0 (font_desc);
	return self;
}


InputView* input_view_new (void) {
	return input_view_construct (TYPE_INPUT_VIEW);
}


static Block9Data* block9_data_ref (Block9Data* _data9_) {
	g_atomic_int_inc (&_data9_->_ref_count_);
	return _data9_;
}


static void block9_data_unref (void * _userdata_) {
	Block9Data* _data9_;
	_data9_ = (Block9Data*) _userdata_;
	if (g_atomic_int_dec_and_test (&_data9_->_ref_count_)) {
		InputView* self;
		self = _data9_->self;
		_g_free0 (_data9_->s);
		_g_object_unref0 (self);
		g_slice_free (Block9Data, _data9_);
	}
}


static Block10Data* block10_data_ref (Block10Data* _data10_) {
	g_atomic_int_inc (&_data10_->_ref_count_);
	return _data10_;
}


static void block10_data_unref (void * _userdata_) {
	Block10Data* _data10_;
	_data10_ = (Block10Data*) _userdata_;
	if (g_atomic_int_dec_and_test (&_data10_->_ref_count_)) {
		InputView* self;
		self = _data10_->_data9_->self;
		block9_data_unref (_data10_->_data9_);
		_data10_->_data9_ = NULL;
		g_slice_free (Block10Data, _data10_);
	}
}


static Block11Data* block11_data_ref (Block11Data* _data11_) {
	g_atomic_int_inc (&_data11_->_ref_count_);
	return _data11_;
}


static void block11_data_unref (void * _userdata_) {
	Block11Data* _data11_;
	_data11_ = (Block11Data*) _userdata_;
	if (g_atomic_int_dec_and_test (&_data11_->_ref_count_)) {
		InputView* self;
		self = _data11_->_data10_->_data9_->self;
		block10_data_unref (_data11_->_data10_);
		_data11_->_data10_ = NULL;
		g_slice_free (Block11Data, _data11_);
	}
}


static gboolean ____lambda7_ (Block11Data* _data11_) {
	Block10Data* _data10_;
	Block9Data* _data9_;
	InputView* self;
	gboolean result = FALSE;
	GtkTextIter iter3 = {0};
	GtkTextIter iter4 = {0};
	GtkSourceView* _tmp0_ = NULL;
	GtkTextBuffer* _tmp1_ = NULL;
	GtkTextBuffer* _tmp2_ = NULL;
	gint _tmp3_ = 0;
	GtkTextIter _tmp4_ = {0};
	GtkSourceView* _tmp5_ = NULL;
	GtkTextBuffer* _tmp6_ = NULL;
	GtkTextBuffer* _tmp7_ = NULL;
	gint _tmp8_ = 0;
	GtkTextIter _tmp9_ = {0};
	GtkSourceView* _tmp10_ = NULL;
	GtkTextBuffer* _tmp11_ = NULL;
	GtkTextBuffer* _tmp12_ = NULL;
	GtkSourceView* _tmp13_ = NULL;
	GtkTextBuffer* _tmp14_ = NULL;
	GtkTextBuffer* _tmp15_ = NULL;
	GtkTextIter _tmp16_ = {0};
	gint _tmp17_ = 0;
	gint _tmp18_ = 0;
	GeeArrayList* _tmp19_ = NULL;
	const gchar* _tmp20_ = NULL;
	gboolean _tmp21_ = FALSE;
	GtkSourceView* _tmp51_ = NULL;
	GtkTextBuffer* _tmp52_ = NULL;
	GtkTextBuffer* _tmp53_ = NULL;
	GtkTextIter _tmp54_ = {0};
	gint _tmp55_ = 0;
	gint _tmp56_ = 0;
	gchar* _tmp57_ = NULL;
	gchar* _tmp58_ = NULL;
	_data10_ = _data11_->_data10_;
	_data9_ = _data10_->_data9_;
	self = _data9_->self;
	memset (&iter3, 0, sizeof (GtkTextIter));
	memset (&iter4, 0, sizeof (GtkTextIter));
	_tmp0_ = self->source_view;
	_tmp1_ = gtk_text_view_get_buffer ((GtkTextView*) _tmp0_);
	_tmp2_ = _tmp1_;
	_tmp3_ = _data11_->offset;
	gtk_text_buffer_get_iter_at_offset (_tmp2_, &_tmp4_, _tmp3_);
	iter3 = _tmp4_;
	_tmp5_ = self->source_view;
	_tmp6_ = gtk_text_view_get_buffer ((GtkTextView*) _tmp5_);
	_tmp7_ = _tmp6_;
	_tmp8_ = _data11_->offset;
	gtk_text_buffer_get_iter_at_offset (_tmp7_, &_tmp9_, _tmp8_);
	iter4 = _tmp9_;
	gtk_text_iter_backward_cursor_positions (&iter3, 4);
	_tmp10_ = self->source_view;
	_tmp11_ = gtk_text_view_get_buffer ((GtkTextView*) _tmp10_);
	_tmp12_ = _tmp11_;
	gtk_text_buffer_delete (_tmp12_, &iter3, &iter4);
	_tmp13_ = self->source_view;
	_tmp14_ = gtk_text_view_get_buffer ((GtkTextView*) _tmp13_);
	_tmp15_ = _tmp14_;
	_tmp16_ = iter4;
	gtk_text_buffer_place_cursor (_tmp15_, &_tmp16_);
	_tmp17_ = gtk_text_iter_get_offset (&iter4);
	_data11_->offset = _tmp17_;
	_tmp18_ = _data11_->line;
	g_signal_emit_by_name (self, "insert-result", _tmp18_ - 1);
	_tmp19_ = self->operators;
	_tmp20_ = _data9_->s;
	_tmp21_ = gee_abstract_collection_contains ((GeeAbstractCollection*) _tmp19_, _tmp20_);
	if (_tmp21_) {
		GtkSourceView* _tmp22_ = NULL;
		GtkTextBuffer* _tmp23_ = NULL;
		GtkTextBuffer* _tmp24_ = NULL;
		gint _tmp25_ = 0;
		GtkTextIter _tmp26_ = {0};
		GtkSourceView* _tmp27_ = NULL;
		GtkTextBuffer* _tmp28_ = NULL;
		GtkTextBuffer* _tmp29_ = NULL;
		const gchar* _tmp30_ = NULL;
		gchar* _tmp31_ = NULL;
		gchar* _tmp32_ = NULL;
		GtkSourceView* _tmp33_ = NULL;
		GtkTextBuffer* _tmp34_ = NULL;
		GtkTextBuffer* _tmp35_ = NULL;
		gint _tmp36_ = 0;
		GtkTextIter _tmp37_ = {0};
		_tmp22_ = self->source_view;
		_tmp23_ = gtk_text_view_get_buffer ((GtkTextView*) _tmp22_);
		_tmp24_ = _tmp23_;
		_tmp25_ = _data11_->offset;
		gtk_text_buffer_get_iter_at_offset (_tmp24_, &_tmp26_, _tmp25_ + 2);
		iter4 = _tmp26_;
		_tmp27_ = self->source_view;
		_tmp28_ = gtk_text_view_get_buffer ((GtkTextView*) _tmp27_);
		_tmp29_ = _tmp28_;
		_tmp30_ = _data9_->s;
		_tmp31_ = g_strconcat (" ", _tmp30_, NULL);
		_tmp32_ = _tmp31_;
		gtk_text_buffer_insert (_tmp29_, &iter4, _tmp32_, -1);
		_g_free0 (_tmp32_);
		_tmp33_ = self->source_view;
		_tmp34_ = gtk_text_view_get_buffer ((GtkTextView*) _tmp33_);
		_tmp35_ = _tmp34_;
		_tmp36_ = _data11_->offset;
		gtk_text_buffer_get_iter_at_offset (_tmp35_, &_tmp37_, _tmp36_ + 4);
		iter4 = _tmp37_;
		self->priv->add_space = TRUE;
	} else {
		GtkSourceView* _tmp38_ = NULL;
		GtkTextBuffer* _tmp39_ = NULL;
		GtkTextBuffer* _tmp40_ = NULL;
		gint _tmp41_ = 0;
		GtkTextIter _tmp42_ = {0};
		GtkSourceView* _tmp43_ = NULL;
		GtkTextBuffer* _tmp44_ = NULL;
		GtkTextBuffer* _tmp45_ = NULL;
		GtkSourceView* _tmp46_ = NULL;
		GtkTextBuffer* _tmp47_ = NULL;
		GtkTextBuffer* _tmp48_ = NULL;
		gint _tmp49_ = 0;
		GtkTextIter _tmp50_ = {0};
		_tmp38_ = self->source_view;
		_tmp39_ = gtk_text_view_get_buffer ((GtkTextView*) _tmp38_);
		_tmp40_ = _tmp39_;
		_tmp41_ = _data11_->offset;
		gtk_text_buffer_get_iter_at_offset (_tmp40_, &_tmp42_, _tmp41_ + 2);
		iter4 = _tmp42_;
		_tmp43_ = self->source_view;
		_tmp44_ = gtk_text_view_get_buffer ((GtkTextView*) _tmp43_);
		_tmp45_ = _tmp44_;
		gtk_text_buffer_insert (_tmp45_, &iter4, " ", -1);
		_tmp46_ = self->source_view;
		_tmp47_ = gtk_text_view_get_buffer ((GtkTextView*) _tmp46_);
		_tmp48_ = _tmp47_;
		_tmp49_ = _data11_->offset;
		gtk_text_buffer_get_iter_at_offset (_tmp48_, &_tmp50_, _tmp49_ + 2);
		iter4 = _tmp50_;
	}
	_tmp51_ = self->source_view;
	_tmp52_ = gtk_text_view_get_buffer ((GtkTextView*) _tmp51_);
	_tmp53_ = _tmp52_;
	_tmp54_ = iter4;
	gtk_text_buffer_place_cursor (_tmp53_, &_tmp54_);
	self->skip_change = FALSE;
	_tmp55_ = _data11_->line;
	_tmp56_ = _data11_->line;
	_tmp57_ = input_view_get_text_line_to_end (self, _tmp56_);
	_tmp58_ = _tmp57_;
	g_signal_emit_by_name (self, "changed-line", _tmp55_, -1, _tmp58_);
	_g_free0 (_tmp58_);
	result = FALSE;
	return result;
}


static gboolean _____lambda7__gsource_func (gpointer self) {
	gboolean result;
	result = ____lambda7_ (self);
	return result;
}


static Block12Data* block12_data_ref (Block12Data* _data12_) {
	g_atomic_int_inc (&_data12_->_ref_count_);
	return _data12_;
}


static void block12_data_unref (void * _userdata_) {
	Block12Data* _data12_;
	_data12_ = (Block12Data*) _userdata_;
	if (g_atomic_int_dec_and_test (&_data12_->_ref_count_)) {
		InputView* self;
		self = _data12_->_data10_->_data9_->self;
		block10_data_unref (_data12_->_data10_);
		_data12_->_data10_ = NULL;
		g_slice_free (Block12Data, _data12_);
	}
}


static gboolean ____lambda8_ (Block12Data* _data12_) {
	Block10Data* _data10_;
	Block9Data* _data9_;
	InputView* self;
	gboolean result = FALSE;
	GtkTextIter iter3 = {0};
	GtkTextIter iter4 = {0};
	GtkSourceView* _tmp0_ = NULL;
	GtkTextBuffer* _tmp1_ = NULL;
	GtkTextBuffer* _tmp2_ = NULL;
	gint _tmp3_ = 0;
	GtkTextIter _tmp4_ = {0};
	GtkSourceView* _tmp5_ = NULL;
	GtkTextBuffer* _tmp6_ = NULL;
	GtkTextBuffer* _tmp7_ = NULL;
	gint _tmp8_ = 0;
	GtkTextIter _tmp9_ = {0};
	gint _tmp10_ = 0;
	gchar* _tmp11_ = NULL;
	gchar* _tmp12_ = NULL;
	gint _tmp13_ = 0;
	gint _tmp14_ = 0;
	GtkSourceView* _tmp15_ = NULL;
	GtkTextBuffer* _tmp16_ = NULL;
	GtkTextBuffer* _tmp17_ = NULL;
	GtkSourceView* _tmp18_ = NULL;
	GtkTextBuffer* _tmp19_ = NULL;
	GtkTextBuffer* _tmp20_ = NULL;
	GtkTextIter _tmp21_ = {0};
	gint _tmp22_ = 0;
	gint _tmp23_ = 0;
	GeeArrayList* _tmp24_ = NULL;
	const gchar* _tmp25_ = NULL;
	gboolean _tmp26_ = FALSE;
	GtkSourceView* _tmp56_ = NULL;
	GtkTextBuffer* _tmp57_ = NULL;
	GtkTextBuffer* _tmp58_ = NULL;
	GtkTextIter _tmp59_ = {0};
	gint _tmp60_ = 0;
	gint _tmp61_ = 0;
	gchar* _tmp62_ = NULL;
	gchar* _tmp63_ = NULL;
	_data10_ = _data12_->_data10_;
	_data9_ = _data10_->_data9_;
	self = _data9_->self;
	memset (&iter3, 0, sizeof (GtkTextIter));
	memset (&iter4, 0, sizeof (GtkTextIter));
	_tmp0_ = self->source_view;
	_tmp1_ = gtk_text_view_get_buffer ((GtkTextView*) _tmp0_);
	_tmp2_ = _tmp1_;
	_tmp3_ = _data12_->offset;
	gtk_text_buffer_get_iter_at_offset (_tmp2_, &_tmp4_, _tmp3_);
	iter3 = _tmp4_;
	_tmp5_ = self->source_view;
	_tmp6_ = gtk_text_view_get_buffer ((GtkTextView*) _tmp5_);
	_tmp7_ = _tmp6_;
	_tmp8_ = _data12_->offset;
	gtk_text_buffer_get_iter_at_offset (_tmp7_, &_tmp9_, _tmp8_);
	iter4 = _tmp9_;
	_tmp10_ = _data10_->res;
	_tmp11_ = g_strdup_printf ("%i", _tmp10_);
	_tmp12_ = _tmp11_;
	_tmp13_ = strlen (_tmp12_);
	_tmp14_ = _tmp13_;
	gtk_text_iter_backward_cursor_positions (&iter3, 5 + _tmp14_);
	_g_free0 (_tmp12_);
	_tmp15_ = self->source_view;
	_tmp16_ = gtk_text_view_get_buffer ((GtkTextView*) _tmp15_);
	_tmp17_ = _tmp16_;
	gtk_text_buffer_delete (_tmp17_, &iter3, &iter4);
	_tmp18_ = self->source_view;
	_tmp19_ = gtk_text_view_get_buffer ((GtkTextView*) _tmp18_);
	_tmp20_ = _tmp19_;
	_tmp21_ = iter4;
	gtk_text_buffer_place_cursor (_tmp20_, &_tmp21_);
	_tmp22_ = gtk_text_iter_get_offset (&iter4);
	_data12_->offset = _tmp22_;
	_tmp23_ = _data10_->res;
	g_signal_emit_by_name (self, "insert-result", _tmp23_ - 1);
	_tmp24_ = self->operators;
	_tmp25_ = _data9_->s;
	_tmp26_ = gee_abstract_collection_contains ((GeeAbstractCollection*) _tmp24_, _tmp25_);
	if (_tmp26_) {
		GtkSourceView* _tmp27_ = NULL;
		GtkTextBuffer* _tmp28_ = NULL;
		GtkTextBuffer* _tmp29_ = NULL;
		gint _tmp30_ = 0;
		GtkTextIter _tmp31_ = {0};
		GtkSourceView* _tmp32_ = NULL;
		GtkTextBuffer* _tmp33_ = NULL;
		GtkTextBuffer* _tmp34_ = NULL;
		const gchar* _tmp35_ = NULL;
		gchar* _tmp36_ = NULL;
		gchar* _tmp37_ = NULL;
		GtkSourceView* _tmp38_ = NULL;
		GtkTextBuffer* _tmp39_ = NULL;
		GtkTextBuffer* _tmp40_ = NULL;
		gint _tmp41_ = 0;
		GtkTextIter _tmp42_ = {0};
		_tmp27_ = self->source_view;
		_tmp28_ = gtk_text_view_get_buffer ((GtkTextView*) _tmp27_);
		_tmp29_ = _tmp28_;
		_tmp30_ = _data12_->offset;
		gtk_text_buffer_get_iter_at_offset (_tmp29_, &_tmp31_, _tmp30_ + 2);
		iter4 = _tmp31_;
		_tmp32_ = self->source_view;
		_tmp33_ = gtk_text_view_get_buffer ((GtkTextView*) _tmp32_);
		_tmp34_ = _tmp33_;
		_tmp35_ = _data9_->s;
		_tmp36_ = g_strconcat (" ", _tmp35_, NULL);
		_tmp37_ = _tmp36_;
		gtk_text_buffer_insert (_tmp34_, &iter4, _tmp37_, -1);
		_g_free0 (_tmp37_);
		_tmp38_ = self->source_view;
		_tmp39_ = gtk_text_view_get_buffer ((GtkTextView*) _tmp38_);
		_tmp40_ = _tmp39_;
		_tmp41_ = _data12_->offset;
		gtk_text_buffer_get_iter_at_offset (_tmp40_, &_tmp42_, _tmp41_ + 4);
		iter4 = _tmp42_;
		self->priv->add_space = TRUE;
	} else {
		GtkSourceView* _tmp43_ = NULL;
		GtkTextBuffer* _tmp44_ = NULL;
		GtkTextBuffer* _tmp45_ = NULL;
		gint _tmp46_ = 0;
		GtkTextIter _tmp47_ = {0};
		GtkSourceView* _tmp48_ = NULL;
		GtkTextBuffer* _tmp49_ = NULL;
		GtkTextBuffer* _tmp50_ = NULL;
		GtkSourceView* _tmp51_ = NULL;
		GtkTextBuffer* _tmp52_ = NULL;
		GtkTextBuffer* _tmp53_ = NULL;
		gint _tmp54_ = 0;
		GtkTextIter _tmp55_ = {0};
		_tmp43_ = self->source_view;
		_tmp44_ = gtk_text_view_get_buffer ((GtkTextView*) _tmp43_);
		_tmp45_ = _tmp44_;
		_tmp46_ = _data12_->offset;
		gtk_text_buffer_get_iter_at_offset (_tmp45_, &_tmp47_, _tmp46_ + 2);
		iter4 = _tmp47_;
		_tmp48_ = self->source_view;
		_tmp49_ = gtk_text_view_get_buffer ((GtkTextView*) _tmp48_);
		_tmp50_ = _tmp49_;
		gtk_text_buffer_insert (_tmp50_, &iter4, " ", -1);
		_tmp51_ = self->source_view;
		_tmp52_ = gtk_text_view_get_buffer ((GtkTextView*) _tmp51_);
		_tmp53_ = _tmp52_;
		_tmp54_ = _data12_->offset;
		gtk_text_buffer_get_iter_at_offset (_tmp53_, &_tmp55_, _tmp54_ + 2);
		iter4 = _tmp55_;
	}
	_tmp56_ = self->source_view;
	_tmp57_ = gtk_text_view_get_buffer ((GtkTextView*) _tmp56_);
	_tmp58_ = _tmp57_;
	_tmp59_ = iter4;
	gtk_text_buffer_place_cursor (_tmp58_, &_tmp59_);
	self->skip_change = FALSE;
	_tmp60_ = _data10_->line;
	_tmp61_ = _data10_->line;
	_tmp62_ = input_view_get_text_line_to_end (self, _tmp61_);
	_tmp63_ = _tmp62_;
	g_signal_emit_by_name (self, "changed-line", _tmp60_, -1, _tmp63_);
	_g_free0 (_tmp63_);
	result = FALSE;
	return result;
}


static gboolean _____lambda8__gsource_func (gpointer self) {
	gboolean result;
	result = ____lambda8_ (self);
	return result;
}


static gboolean string_contains (const gchar* self, const gchar* needle) {
	gboolean result = FALSE;
	const gchar* _tmp0_ = NULL;
	gchar* _tmp1_ = NULL;
	g_return_val_if_fail (self != NULL, FALSE);
	g_return_val_if_fail (needle != NULL, FALSE);
	_tmp0_ = needle;
	_tmp1_ = strstr ((gchar*) self, (gchar*) _tmp0_);
	result = _tmp1_ != NULL;
	return result;
}


static void input_view_process_insert_text (InputView* self, GtkTextIter* it, const gchar* s, gint i) {
	Block9Data* _data9_;
	const gchar* _tmp0_ = NULL;
	gchar* _tmp1_ = NULL;
	gboolean _tmp2_ = FALSE;
	gboolean _tmp3_ = FALSE;
	GtkTextIter iter = {0};
	GtkTextIter iter2 = {0};
	gboolean _tmp8_ = FALSE;
	const gchar* _tmp9_ = NULL;
	GeeArrayList* _tmp36_ = NULL;
	const gchar* _tmp37_ = NULL;
	gboolean _tmp38_ = FALSE;
	g_return_if_fail (self != NULL);
	g_return_if_fail (it != NULL);
	g_return_if_fail (s != NULL);
	_data9_ = g_slice_new0 (Block9Data);
	_data9_->_ref_count_ = 1;
	_data9_->self = g_object_ref (self);
	_tmp0_ = s;
	_tmp1_ = g_strdup (_tmp0_);
	_g_free0 (_data9_->s);
	_data9_->s = _tmp1_;
	_tmp2_ = self->skip_change;
	if (_tmp2_) {
		block9_data_unref (_data9_);
		_data9_ = NULL;
		return;
	}
	_tmp3_ = self->priv->add_space;
	if (_tmp3_) {
		const gchar* _tmp4_ = NULL;
		self->priv->add_space = FALSE;
		_tmp4_ = _data9_->s;
		if (g_strcmp0 (_tmp4_, " ") != 0) {
			GtkSourceView* _tmp5_ = NULL;
			GtkTextBuffer* _tmp6_ = NULL;
			GtkTextBuffer* _tmp7_ = NULL;
			self->skip_change = TRUE;
			_tmp5_ = self->source_view;
			_tmp6_ = gtk_text_view_get_buffer ((GtkTextView*) _tmp5_);
			_tmp7_ = _tmp6_;
			gtk_text_buffer_insert (_tmp7_, it, " ", -1);
			self->skip_change = FALSE;
		}
		block9_data_unref (_data9_);
		_data9_ = NULL;
		return;
	}
	memset (&iter, 0, sizeof (GtkTextIter));
	memset (&iter2, 0, sizeof (GtkTextIter));
	_tmp9_ = _data9_->s;
	if (g_strcmp0 (_tmp9_, " ") == 0) {
		_tmp8_ = TRUE;
	} else {
		GeeArrayList* _tmp10_ = NULL;
		const gchar* _tmp11_ = NULL;
		gboolean _tmp12_ = FALSE;
		_tmp10_ = self->operators;
		_tmp11_ = _data9_->s;
		_tmp12_ = gee_abstract_collection_contains ((GeeAbstractCollection*) _tmp10_, _tmp11_);
		_tmp8_ = _tmp12_;
	}
	if (_tmp8_) {
		Block10Data* _data10_;
		GtkTextIter _tmp13_ = {0};
		GtkTextIter _tmp14_ = {0};
		GtkTextIter _tmp15_ = {0};
		GtkTextIter _tmp16_ = {0};
		gboolean _tmp17_ = FALSE;
		GtkTextIter _tmp23_ = {0};
		GtkTextIter _tmp24_ = {0};
		GtkTextIter _tmp25_ = {0};
		GtkTextIter _tmp26_ = {0};
		gint _tmp27_ = 0;
		gint _tmp28_ = 0;
		gboolean _tmp29_ = FALSE;
		gint _tmp30_ = 0;
		_data10_ = g_slice_new0 (Block10Data);
		_data10_->_ref_count_ = 1;
		_data10_->_data9_ = block9_data_ref (_data9_);
		_tmp13_ = *it;
		gtk_text_iter_assign (&iter, &_tmp13_);
		_tmp14_ = *it;
		gtk_text_iter_assign (&iter2, &_tmp14_);
		_tmp15_ = iter;
		_tmp16_ = iter2;
		_tmp17_ = input_view_check_pre_it (self, "ans", &_tmp15_, &_tmp16_);
		if (_tmp17_) {
			Block11Data* _data11_;
			gint _tmp18_ = 0;
			gint _tmp19_ = 0;
			GtkTextIter _tmp20_ = {0};
			GtkTextIter _tmp21_ = {0};
			gint _tmp22_ = 0;
			_data11_ = g_slice_new0 (Block11Data);
			_data11_->_ref_count_ = 1;
			_data11_->_data10_ = block10_data_ref (_data10_);
			_tmp18_ = gtk_text_iter_get_line (it);
			_data11_->line = _tmp18_;
			_tmp19_ = _data11_->line;
			if (_tmp19_ == 0) {
				block11_data_unref (_data11_);
				_data11_ = NULL;
				block10_data_unref (_data10_);
				_data10_ = NULL;
				block9_data_unref (_data9_);
				_data9_ = NULL;
				return;
			}
			self->skip_change = TRUE;
			_tmp20_ = *it;
			gtk_text_iter_assign (&iter, &_tmp20_);
			_tmp21_ = *it;
			gtk_text_iter_assign (&iter2, &_tmp21_);
			_tmp22_ = gtk_text_iter_get_offset (&iter);
			_data11_->offset = _tmp22_ + 1;
			g_timeout_add_full (G_PRIORITY_DEFAULT, (guint) 1, _____lambda7__gsource_func, block11_data_ref (_data11_), block11_data_unref);
			block11_data_unref (_data11_);
			_data11_ = NULL;
			block10_data_unref (_data10_);
			_data10_ = NULL;
			block9_data_unref (_data9_);
			_data9_ = NULL;
			return;
		}
		_tmp23_ = *it;
		gtk_text_iter_assign (&iter, &_tmp23_);
		_tmp24_ = *it;
		gtk_text_iter_assign (&iter2, &_tmp24_);
		_tmp25_ = iter;
		_tmp26_ = iter2;
		_tmp27_ = input_view_check_pre_it_before_digits (self, "line", &_tmp25_, &_tmp26_);
		_data10_->res = _tmp27_;
		_tmp28_ = gtk_text_iter_get_line (it);
		_data10_->line = _tmp28_;
		_tmp30_ = _data10_->res;
		if (_tmp30_ > 0) {
			gint _tmp31_ = 0;
			gint _tmp32_ = 0;
			_tmp31_ = _data10_->res;
			_tmp32_ = _data10_->line;
			_tmp29_ = _tmp31_ <= _tmp32_;
		} else {
			_tmp29_ = FALSE;
		}
		if (_tmp29_) {
			Block12Data* _data12_;
			GtkTextIter _tmp33_ = {0};
			GtkTextIter _tmp34_ = {0};
			gint _tmp35_ = 0;
			_data12_ = g_slice_new0 (Block12Data);
			_data12_->_ref_count_ = 1;
			_data12_->_data10_ = block10_data_ref (_data10_);
			self->skip_change = TRUE;
			_tmp33_ = *it;
			gtk_text_iter_assign (&iter, &_tmp33_);
			_tmp34_ = *it;
			gtk_text_iter_assign (&iter2, &_tmp34_);
			_tmp35_ = gtk_text_iter_get_offset (&iter);
			_data12_->offset = _tmp35_ + 1;
			g_timeout_add_full (G_PRIORITY_DEFAULT, (guint) 1, _____lambda8__gsource_func, block12_data_ref (_data12_), block12_data_unref);
			block12_data_unref (_data12_);
			_data12_ = NULL;
			block10_data_unref (_data10_);
			_data10_ = NULL;
			block9_data_unref (_data9_);
			_data9_ = NULL;
			return;
		}
		block10_data_unref (_data10_);
		_data10_ = NULL;
	}
	_tmp36_ = self->operators;
	_tmp37_ = _data9_->s;
	_tmp38_ = gee_abstract_collection_contains ((GeeAbstractCollection*) _tmp36_, _tmp37_);
	if (_tmp38_) {
		GtkSourceView* _tmp39_ = NULL;
		GtkTextBuffer* _tmp40_ = NULL;
		GtkTextBuffer* _tmp41_ = NULL;
		gint _tmp42_ = 0;
		GtkTextIter _tmp43_ = {0};
		GtkSourceView* _tmp44_ = NULL;
		GtkTextBuffer* _tmp45_ = NULL;
		GtkTextBuffer* _tmp46_ = NULL;
		GtkTextIter _tmp47_ = {0};
		GtkTextIter _tmp48_ = {0};
		gchar* _tmp49_ = NULL;
		gchar* _tmp50_ = NULL;
		gboolean _tmp51_ = FALSE;
		gboolean _tmp52_ = FALSE;
		GtkTextIter _tmp53_ = {0};
		gchar* pre_last_char = NULL;
		GtkSourceView* _tmp54_ = NULL;
		GtkTextBuffer* _tmp55_ = NULL;
		GtkTextBuffer* _tmp56_ = NULL;
		GtkTextIter _tmp57_ = {0};
		GtkTextIter _tmp58_ = {0};
		gchar* _tmp59_ = NULL;
		const gchar* _tmp60_ = NULL;
		_tmp39_ = self->source_view;
		_tmp40_ = gtk_text_view_get_buffer ((GtkTextView*) _tmp39_);
		_tmp41_ = _tmp40_;
		_tmp42_ = gtk_text_iter_get_line (it);
		gtk_text_buffer_get_iter_at_line_index (_tmp41_, &_tmp43_, _tmp42_, 0);
		iter2 = _tmp43_;
		_tmp44_ = self->source_view;
		_tmp45_ = gtk_text_view_get_buffer ((GtkTextView*) _tmp44_);
		_tmp46_ = _tmp45_;
		_tmp47_ = iter2;
		_tmp48_ = *it;
		_tmp49_ = gtk_text_buffer_get_slice (_tmp46_, &_tmp47_, &_tmp48_, TRUE);
		_tmp50_ = _tmp49_;
		_tmp51_ = string_contains (_tmp50_, "http:");
		_tmp52_ = _tmp51_;
		_g_free0 (_tmp50_);
		if (_tmp52_) {
			block9_data_unref (_data9_);
			_data9_ = NULL;
			return;
		}
		_tmp53_ = *it;
		gtk_text_iter_assign (&iter, &_tmp53_);
		gtk_text_iter_backward_cursor_position (&iter);
		_tmp54_ = self->source_view;
		_tmp55_ = gtk_text_view_get_buffer ((GtkTextView*) _tmp54_);
		_tmp56_ = _tmp55_;
		_tmp57_ = iter;
		_tmp58_ = *it;
		_tmp59_ = gtk_text_buffer_get_slice (_tmp56_, &_tmp57_, &_tmp58_, TRUE);
		pre_last_char = _tmp59_;
		_tmp60_ = pre_last_char;
		if (!(g_strcmp0 (_tmp60_, " ") == 0)) {
			GtkSourceView* _tmp61_ = NULL;
			GtkTextBuffer* _tmp62_ = NULL;
			GtkTextBuffer* _tmp63_ = NULL;
			self->skip_change = TRUE;
			_tmp61_ = self->source_view;
			_tmp62_ = gtk_text_view_get_buffer ((GtkTextView*) _tmp61_);
			_tmp63_ = _tmp62_;
			gtk_text_buffer_insert (_tmp63_, it, " ", -1);
			self->skip_change = FALSE;
		}
		self->priv->add_space = TRUE;
		_g_free0 (pre_last_char);
	}
	block9_data_unref (_data9_);
	_data9_ = NULL;
}


static void _vala_array_add2 (gint** array, int* length, int* size, gint value) {
	if ((*length) == (*size)) {
		*size = (*size) ? (2 * (*size)) : 4;
		*array = g_renew (gint, *array, *size);
	}
	(*array)[(*length)++] = value;
}


static void _vala_array_add3 (gint** array, int* length, int* size, gint value) {
	if ((*length) == (*size)) {
		*size = (*size) ? (2 * (*size)) : 4;
		*array = g_renew (gint, *array, *size);
	}
	(*array)[(*length)++] = value;
}


void input_view_process_new_content (InputView* self) {
	gint cursor_pos = 0;
	GtkTextIter start_iter = {0};
	GtkTextIter end_iter = {0};
	GtkTextIter cursor = {0};
	GtkSourceView* _tmp0_ = NULL;
	GtkTextBuffer* _tmp1_ = NULL;
	GtkTextBuffer* _tmp2_ = NULL;
	GtkSourceView* _tmp3_ = NULL;
	GtkTextBuffer* _tmp4_ = NULL;
	GtkTextBuffer* _tmp5_ = NULL;
	gint _tmp6_ = 0;
	gint _tmp7_ = 0;
	GtkTextIter _tmp8_ = {0};
	gint _tmp9_ = 0;
	GtkSourceView* _tmp10_ = NULL;
	GtkTextBuffer* _tmp11_ = NULL;
	GtkTextBuffer* _tmp12_ = NULL;
	GtkTextIter _tmp13_ = {0};
	GtkTextIter _tmp14_ = {0};
	gint* index_array = NULL;
	gint* _tmp15_ = NULL;
	gint index_array_length1 = 0;
	gint _index_array_size_ = 0;
	gint* line_array = NULL;
	gint* _tmp16_ = NULL;
	gint line_array_length1 = 0;
	gint _line_array_size_ = 0;
	gint delta = 0;
	gint index = 0;
	GtkSourceView* _tmp70_ = NULL;
	GtkTextBuffer* _tmp71_ = NULL;
	GtkTextBuffer* _tmp72_ = NULL;
	gint _tmp73_ = 0;
	GtkTextIter _tmp74_ = {0};
	GtkSourceView* _tmp75_ = NULL;
	GtkTextBuffer* _tmp76_ = NULL;
	GtkTextBuffer* _tmp77_ = NULL;
	GtkTextIter _tmp78_ = {0};
	gchar* _tmp79_ = NULL;
	gchar* _tmp80_ = NULL;
	g_return_if_fail (self != NULL);
	self->skip_change = TRUE;
	_tmp0_ = self->source_view;
	_tmp1_ = gtk_text_view_get_buffer ((GtkTextView*) _tmp0_);
	_tmp2_ = _tmp1_;
	_tmp3_ = self->source_view;
	_tmp4_ = gtk_text_view_get_buffer ((GtkTextView*) _tmp3_);
	_tmp5_ = _tmp4_;
	g_object_get (_tmp5_, "cursor-position", &_tmp6_, NULL);
	_tmp7_ = _tmp6_;
	gtk_text_buffer_get_iter_at_offset (_tmp2_, &_tmp8_, _tmp7_);
	cursor = _tmp8_;
	_tmp9_ = gtk_text_iter_get_offset (&cursor);
	cursor_pos = _tmp9_;
	_tmp10_ = self->source_view;
	_tmp11_ = gtk_text_view_get_buffer ((GtkTextView*) _tmp10_);
	_tmp12_ = _tmp11_;
	gtk_text_buffer_get_iter_at_offset (_tmp12_, &_tmp13_, 0);
	start_iter = _tmp13_;
	_tmp14_ = start_iter;
	end_iter = _tmp14_;
	_tmp15_ = g_new0 (gint, 0);
	index_array = _tmp15_;
	index_array_length1 = 0;
	_index_array_size_ = index_array_length1;
	_tmp16_ = g_new0 (gint, 0);
	line_array = _tmp16_;
	line_array_length1 = 0;
	_line_array_size_ = line_array_length1;
	delta = 0;
	while (TRUE) {
		GtkSourceSearchContext* _tmp17_ = NULL;
		GtkTextIter _tmp18_ = {0};
		GtkTextIter _tmp19_ = {0};
		GtkTextIter _tmp20_ = {0};
		gboolean _tmp21_ = FALSE;
		GMatchInfo* info = NULL;
		gchar* text = NULL;
		GtkSourceView* _tmp22_ = NULL;
		GtkTextBuffer* _tmp23_ = NULL;
		GtkTextBuffer* _tmp24_ = NULL;
		GtkTextIter _tmp25_ = {0};
		GtkTextIter _tmp26_ = {0};
		gchar* _tmp27_ = NULL;
		GRegex* _tmp28_ = NULL;
		const gchar* _tmp29_ = NULL;
		GMatchInfo* _tmp30_ = NULL;
		gint line = 0;
		GMatchInfo* _tmp31_ = NULL;
		gchar* _tmp32_ = NULL;
		gchar* _tmp33_ = NULL;
		gint _tmp34_ = 0;
		gint _tmp35_ = 0;
		gint _tmp36_ = 0;
		GtkSourceView* _tmp37_ = NULL;
		GtkTextBuffer* _tmp38_ = NULL;
		GtkTextBuffer* _tmp39_ = NULL;
		gint* _tmp40_ = NULL;
		gint _tmp40__length1 = 0;
		gint _tmp41_ = 0;
		gint _tmp42_ = 0;
		gint* _tmp43_ = NULL;
		gint _tmp43__length1 = 0;
		gint _tmp44_ = 0;
		gint _tmp45_ = 0;
		_tmp17_ = self->priv->search;
		_tmp18_ = start_iter;
		_tmp21_ = gtk_source_search_context_forward (_tmp17_, &_tmp18_, &_tmp19_, &_tmp20_);
		start_iter = _tmp19_;
		end_iter = _tmp20_;
		if (!_tmp21_) {
			break;
		}
		_tmp22_ = self->source_view;
		_tmp23_ = gtk_text_view_get_buffer ((GtkTextView*) _tmp22_);
		_tmp24_ = _tmp23_;
		_tmp25_ = start_iter;
		_tmp26_ = end_iter;
		_tmp27_ = gtk_text_buffer_get_text (_tmp24_, &_tmp25_, &_tmp26_, FALSE);
		text = _tmp27_;
		_tmp28_ = self->priv->digit_regex;
		_tmp29_ = text;
		g_regex_match (_tmp28_, _tmp29_, 0, &_tmp30_);
		_g_match_info_unref0 (info);
		info = _tmp30_;
		_tmp31_ = info;
		_tmp32_ = g_match_info_fetch (_tmp31_, 0);
		_tmp33_ = _tmp32_;
		_tmp34_ = atoi (_tmp33_);
		_tmp35_ = _tmp34_;
		_g_free0 (_tmp33_);
		line = _tmp35_;
		_tmp36_ = line;
		if (_tmp36_ == 0) {
			_g_free0 (text);
			_g_match_info_unref0 (info);
			continue;
		}
		_tmp37_ = self->source_view;
		_tmp38_ = gtk_text_view_get_buffer ((GtkTextView*) _tmp37_);
		_tmp39_ = _tmp38_;
		gtk_text_buffer_delete (_tmp39_, &start_iter, &end_iter);
		_tmp40_ = index_array;
		_tmp40__length1 = index_array_length1;
		_tmp41_ = gtk_text_iter_get_offset (&start_iter);
		_tmp42_ = delta;
		_vala_array_add2 (&index_array, &index_array_length1, &_index_array_size_, _tmp41_ - _tmp42_);
		_tmp43_ = line_array;
		_tmp43__length1 = line_array_length1;
		_tmp44_ = line;
		_vala_array_add3 (&line_array, &line_array_length1, &_line_array_size_, _tmp44_ - 1);
		_tmp45_ = gtk_text_iter_get_offset (&start_iter);
		delta = _tmp45_;
		_g_free0 (text);
		_g_match_info_unref0 (info);
	}
	index = 0;
	{
		gint i = 0;
		i = 0;
		{
			gboolean _tmp46_ = FALSE;
			_tmp46_ = TRUE;
			while (TRUE) {
				gint _tmp48_ = 0;
				gint* _tmp49_ = NULL;
				gint _tmp49__length1 = 0;
				GtkSourceView* _tmp50_ = NULL;
				GtkTextBuffer* _tmp51_ = NULL;
				GtkTextBuffer* _tmp52_ = NULL;
				gint _tmp53_ = 0;
				GtkTextIter _tmp54_ = {0};
				gint* _tmp55_ = NULL;
				gint _tmp55__length1 = 0;
				gint _tmp56_ = 0;
				gint _tmp57_ = 0;
				GtkSourceView* _tmp58_ = NULL;
				GtkTextBuffer* _tmp59_ = NULL;
				GtkTextBuffer* _tmp60_ = NULL;
				GtkTextIter _tmp61_ = {0};
				gint* _tmp62_ = NULL;
				gint _tmp62__length1 = 0;
				gint _tmp63_ = 0;
				gint _tmp64_ = 0;
				GtkSourceView* _tmp65_ = NULL;
				GtkTextBuffer* _tmp66_ = NULL;
				GtkTextBuffer* _tmp67_ = NULL;
				gint _tmp68_ = 0;
				gint _tmp69_ = 0;
				if (!_tmp46_) {
					gint _tmp47_ = 0;
					_tmp47_ = i;
					i = _tmp47_ + 1;
				}
				_tmp46_ = FALSE;
				_tmp48_ = i;
				_tmp49_ = index_array;
				_tmp49__length1 = index_array_length1;
				if (!(_tmp48_ < _tmp49__length1)) {
					break;
				}
				_tmp50_ = self->source_view;
				_tmp51_ = gtk_text_view_get_buffer ((GtkTextView*) _tmp50_);
				_tmp52_ = _tmp51_;
				_tmp53_ = index;
				gtk_text_buffer_get_iter_at_offset (_tmp52_, &_tmp54_, _tmp53_);
				cursor = _tmp54_;
				_tmp55_ = index_array;
				_tmp55__length1 = index_array_length1;
				_tmp56_ = i;
				_tmp57_ = _tmp55_[_tmp56_];
				gtk_text_iter_forward_chars (&cursor, _tmp57_);
				_tmp58_ = self->source_view;
				_tmp59_ = gtk_text_view_get_buffer ((GtkTextView*) _tmp58_);
				_tmp60_ = _tmp59_;
				_tmp61_ = cursor;
				gtk_text_buffer_place_cursor (_tmp60_, &_tmp61_);
				_tmp62_ = line_array;
				_tmp62__length1 = line_array_length1;
				_tmp63_ = i;
				_tmp64_ = _tmp62_[_tmp63_];
				g_signal_emit_by_name (self, "insert-result", _tmp64_);
				_tmp65_ = self->source_view;
				_tmp66_ = gtk_text_view_get_buffer ((GtkTextView*) _tmp65_);
				_tmp67_ = _tmp66_;
				g_object_get (_tmp67_, "cursor-position", &_tmp68_, NULL);
				_tmp69_ = _tmp68_;
				index = _tmp69_;
			}
		}
	}
	self->skip_change = FALSE;
	_tmp70_ = self->source_view;
	_tmp71_ = gtk_text_view_get_buffer ((GtkTextView*) _tmp70_);
	_tmp72_ = _tmp71_;
	_tmp73_ = cursor_pos;
	gtk_text_buffer_get_iter_at_offset (_tmp72_, &_tmp74_, _tmp73_);
	cursor = _tmp74_;
	_tmp75_ = self->source_view;
	_tmp76_ = gtk_text_view_get_buffer ((GtkTextView*) _tmp75_);
	_tmp77_ = _tmp76_;
	_tmp78_ = cursor;
	gtk_text_buffer_place_cursor (_tmp77_, &_tmp78_);
	_tmp79_ = input_view_get_text_line_to_end (self, 0);
	_tmp80_ = _tmp79_;
	g_signal_emit_by_name (self, "changed-line", 0, -1, _tmp80_);
	_g_free0 (_tmp80_);
	line_array = (g_free (line_array), NULL);
	index_array = (g_free (index_array), NULL);
}


static glong string_strnlen (gchar* str, glong maxlen) {
	glong result = 0L;
	gchar* end = NULL;
	gchar* _tmp0_ = NULL;
	glong _tmp1_ = 0L;
	gchar* _tmp2_ = NULL;
	gchar* _tmp3_ = NULL;
	_tmp0_ = str;
	_tmp1_ = maxlen;
	_tmp2_ = memchr (_tmp0_, 0, (gsize) _tmp1_);
	end = _tmp2_;
	_tmp3_ = end;
	if (_tmp3_ == NULL) {
		glong _tmp4_ = 0L;
		_tmp4_ = maxlen;
		result = _tmp4_;
		return result;
	} else {
		gchar* _tmp5_ = NULL;
		gchar* _tmp6_ = NULL;
		_tmp5_ = end;
		_tmp6_ = str;
		result = (glong) (_tmp5_ - _tmp6_);
		return result;
	}
}


static gchar* string_substring (const gchar* self, glong offset, glong len) {
	gchar* result = NULL;
	glong string_length = 0L;
	gboolean _tmp0_ = FALSE;
	glong _tmp1_ = 0L;
	glong _tmp8_ = 0L;
	glong _tmp14_ = 0L;
	glong _tmp17_ = 0L;
	glong _tmp18_ = 0L;
	glong _tmp19_ = 0L;
	glong _tmp20_ = 0L;
	glong _tmp21_ = 0L;
	gchar* _tmp22_ = NULL;
	g_return_val_if_fail (self != NULL, NULL);
	_tmp1_ = offset;
	if (_tmp1_ >= ((glong) 0)) {
		glong _tmp2_ = 0L;
		_tmp2_ = len;
		_tmp0_ = _tmp2_ >= ((glong) 0);
	} else {
		_tmp0_ = FALSE;
	}
	if (_tmp0_) {
		glong _tmp3_ = 0L;
		glong _tmp4_ = 0L;
		glong _tmp5_ = 0L;
		_tmp3_ = offset;
		_tmp4_ = len;
		_tmp5_ = string_strnlen ((gchar*) self, _tmp3_ + _tmp4_);
		string_length = _tmp5_;
	} else {
		gint _tmp6_ = 0;
		gint _tmp7_ = 0;
		_tmp6_ = strlen (self);
		_tmp7_ = _tmp6_;
		string_length = (glong) _tmp7_;
	}
	_tmp8_ = offset;
	if (_tmp8_ < ((glong) 0)) {
		glong _tmp9_ = 0L;
		glong _tmp10_ = 0L;
		glong _tmp11_ = 0L;
		_tmp9_ = string_length;
		_tmp10_ = offset;
		offset = _tmp9_ + _tmp10_;
		_tmp11_ = offset;
		g_return_val_if_fail (_tmp11_ >= ((glong) 0), NULL);
	} else {
		glong _tmp12_ = 0L;
		glong _tmp13_ = 0L;
		_tmp12_ = offset;
		_tmp13_ = string_length;
		g_return_val_if_fail (_tmp12_ <= _tmp13_, NULL);
	}
	_tmp14_ = len;
	if (_tmp14_ < ((glong) 0)) {
		glong _tmp15_ = 0L;
		glong _tmp16_ = 0L;
		_tmp15_ = string_length;
		_tmp16_ = offset;
		len = _tmp15_ - _tmp16_;
	}
	_tmp17_ = offset;
	_tmp18_ = len;
	_tmp19_ = string_length;
	g_return_val_if_fail ((_tmp17_ + _tmp18_) <= _tmp19_, NULL);
	_tmp20_ = offset;
	_tmp21_ = len;
	_tmp22_ = g_strndup (((gchar*) self) + _tmp20_, (gsize) _tmp21_);
	result = _tmp22_;
	return result;
}


static gint input_view_check_pre_it_before_digits (InputView* self, const gchar* s, GtkTextIter* iter, GtkTextIter* iter2) {
	gint result = 0;
	gchar* digit = NULL;
	gchar* _tmp0_ = NULL;
	gint _tmp1_ = 0;
	gchar* iter_char = NULL;
	GtkSourceView* _tmp2_ = NULL;
	GtkTextBuffer* _tmp3_ = NULL;
	GtkTextBuffer* _tmp4_ = NULL;
	GtkTextIter _tmp5_ = {0};
	GtkTextIter _tmp6_ = {0};
	gchar* _tmp7_ = NULL;
	const gchar* _tmp21_ = NULL;
	const gchar* _tmp22_ = NULL;
	const gchar* _tmp23_ = NULL;
	gint _tmp24_ = 0;
	gint _tmp25_ = 0;
	gchar* _tmp26_ = NULL;
	gchar* _tmp27_ = NULL;
	gboolean _tmp28_ = FALSE;
	const gchar* _tmp29_ = NULL;
	const gchar* _tmp30_ = NULL;
	gint _tmp31_ = 0;
	gint _tmp32_ = 0;
	gchar* _tmp33_ = NULL;
	gchar* _tmp34_ = NULL;
	GtkTextIter _tmp35_ = {0};
	GtkTextIter _tmp36_ = {0};
	gboolean _tmp37_ = FALSE;
	gboolean _tmp38_ = FALSE;
	g_return_val_if_fail (self != NULL, 0);
	g_return_val_if_fail (s != NULL, 0);
	g_return_val_if_fail (iter != NULL, 0);
	g_return_val_if_fail (iter2 != NULL, 0);
	_tmp0_ = g_strdup ("");
	digit = _tmp0_;
	gtk_text_iter_backward_cursor_position (iter);
	_tmp1_ = gtk_text_iter_get_line_offset (iter);
	if (_tmp1_ == 0) {
		result = -1;
		_g_free0 (digit);
		return result;
	}
	_tmp2_ = self->source_view;
	_tmp3_ = gtk_text_view_get_buffer ((GtkTextView*) _tmp2_);
	_tmp4_ = _tmp3_;
	_tmp5_ = *iter;
	_tmp6_ = *iter2;
	_tmp7_ = gtk_text_buffer_get_slice (_tmp4_, &_tmp5_, &_tmp6_, TRUE);
	iter_char = _tmp7_;
	while (TRUE) {
		GRegex* _tmp8_ = NULL;
		const gchar* _tmp9_ = NULL;
		gboolean _tmp10_ = FALSE;
		const gchar* _tmp11_ = NULL;
		const gchar* _tmp12_ = NULL;
		gchar* _tmp13_ = NULL;
		gint _tmp14_ = 0;
		GtkSourceView* _tmp15_ = NULL;
		GtkTextBuffer* _tmp16_ = NULL;
		GtkTextBuffer* _tmp17_ = NULL;
		GtkTextIter _tmp18_ = {0};
		GtkTextIter _tmp19_ = {0};
		gchar* _tmp20_ = NULL;
		_tmp8_ = self->priv->digit_regex;
		_tmp9_ = iter_char;
		_tmp10_ = g_regex_match (_tmp8_, _tmp9_, 0, NULL);
		if (!_tmp10_) {
			break;
		}
		_tmp11_ = digit;
		_tmp12_ = iter_char;
		_tmp13_ = g_strconcat (_tmp11_, _tmp12_, NULL);
		_g_free0 (digit);
		digit = _tmp13_;
		gtk_text_iter_backward_cursor_position (iter);
		_tmp14_ = gtk_text_iter_get_line_offset (iter);
		if (_tmp14_ == 0) {
			result = -1;
			_g_free0 (iter_char);
			_g_free0 (digit);
			return result;
		}
		gtk_text_iter_backward_cursor_position (iter2);
		_tmp15_ = self->source_view;
		_tmp16_ = gtk_text_view_get_buffer ((GtkTextView*) _tmp15_);
		_tmp17_ = _tmp16_;
		_tmp18_ = *iter;
		_tmp19_ = *iter2;
		_tmp20_ = gtk_text_buffer_get_slice (_tmp17_, &_tmp18_, &_tmp19_, TRUE);
		_g_free0 (iter_char);
		iter_char = _tmp20_;
	}
	_tmp21_ = iter_char;
	_tmp22_ = s;
	_tmp23_ = s;
	_tmp24_ = strlen (_tmp23_);
	_tmp25_ = _tmp24_;
	_tmp26_ = string_substring (_tmp22_, (glong) (_tmp25_ - 1), (glong) 1);
	_tmp27_ = _tmp26_;
	_tmp28_ = g_strcmp0 (_tmp21_, _tmp27_) != 0;
	_g_free0 (_tmp27_);
	if (_tmp28_) {
		result = -1;
		_g_free0 (iter_char);
		_g_free0 (digit);
		return result;
	}
	gtk_text_iter_backward_cursor_position (iter2);
	_tmp29_ = s;
	_tmp30_ = s;
	_tmp31_ = strlen (_tmp30_);
	_tmp32_ = _tmp31_;
	_tmp33_ = string_substring (_tmp29_, (glong) 0, (glong) (_tmp32_ - 1));
	_tmp34_ = _tmp33_;
	_tmp35_ = *iter;
	_tmp36_ = *iter2;
	_tmp37_ = input_view_check_pre_it (self, _tmp34_, &_tmp35_, &_tmp36_);
	_tmp38_ = _tmp37_;
	_g_free0 (_tmp34_);
	if (_tmp38_) {
		const gchar* _tmp39_ = NULL;
		gchar* _tmp40_ = NULL;
		gchar* _tmp41_ = NULL;
		gint _tmp42_ = 0;
		gint _tmp43_ = 0;
		_tmp39_ = digit;
		_tmp40_ = g_utf8_strreverse (_tmp39_, (gssize) -1);
		_tmp41_ = _tmp40_;
		_tmp42_ = atoi (_tmp41_);
		_tmp43_ = _tmp42_;
		_g_free0 (_tmp41_);
		result = _tmp43_;
		_g_free0 (iter_char);
		_g_free0 (digit);
		return result;
	}
	result = -1;
	_g_free0 (iter_char);
	_g_free0 (digit);
	return result;
}


static gboolean input_view_check_pre_it (InputView* self, const gchar* s, GtkTextIter* iter, GtkTextIter* iter2) {
	gboolean result = FALSE;
	gint _tmp0_ = 0;
	gchar* iter_char = NULL;
	GtkSourceView* _tmp18_ = NULL;
	GtkTextBuffer* _tmp19_ = NULL;
	GtkTextBuffer* _tmp20_ = NULL;
	GtkTextIter _tmp21_ = {0};
	GtkTextIter _tmp22_ = {0};
	gchar* _tmp23_ = NULL;
	GRegex* _tmp24_ = NULL;
	const gchar* _tmp25_ = NULL;
	gboolean _tmp26_ = FALSE;
	g_return_val_if_fail (self != NULL, FALSE);
	g_return_val_if_fail (s != NULL, FALSE);
	g_return_val_if_fail (iter != NULL, FALSE);
	g_return_val_if_fail (iter2 != NULL, FALSE);
	gtk_text_iter_backward_cursor_position (iter);
	_tmp0_ = gtk_text_iter_get_line_offset (iter);
	if (_tmp0_ == 0) {
		result = FALSE;
		return result;
	}
	{
		gint i = 0;
		const gchar* _tmp1_ = NULL;
		gint _tmp2_ = 0;
		gint _tmp3_ = 0;
		_tmp1_ = s;
		_tmp2_ = strlen (_tmp1_);
		_tmp3_ = _tmp2_;
		i = _tmp3_ - 1;
		{
			gboolean _tmp4_ = FALSE;
			_tmp4_ = TRUE;
			while (TRUE) {
				gint _tmp6_ = 0;
				gchar* s_char = NULL;
				const gchar* _tmp7_ = NULL;
				gint _tmp8_ = 0;
				gchar* _tmp9_ = NULL;
				gchar* iter_char = NULL;
				GtkSourceView* _tmp10_ = NULL;
				GtkTextBuffer* _tmp11_ = NULL;
				GtkTextBuffer* _tmp12_ = NULL;
				GtkTextIter _tmp13_ = {0};
				GtkTextIter _tmp14_ = {0};
				gchar* _tmp15_ = NULL;
				const gchar* _tmp16_ = NULL;
				const gchar* _tmp17_ = NULL;
				if (!_tmp4_) {
					gint _tmp5_ = 0;
					_tmp5_ = i;
					i = _tmp5_ - 1;
				}
				_tmp4_ = FALSE;
				_tmp6_ = i;
				if (!(_tmp6_ >= 0)) {
					break;
				}
				_tmp7_ = s;
				_tmp8_ = i;
				_tmp9_ = string_substring (_tmp7_, (glong) _tmp8_, (glong) 1);
				s_char = _tmp9_;
				_tmp10_ = self->source_view;
				_tmp11_ = gtk_text_view_get_buffer ((GtkTextView*) _tmp10_);
				_tmp12_ = _tmp11_;
				_tmp13_ = *iter;
				_tmp14_ = *iter2;
				_tmp15_ = gtk_text_buffer_get_slice (_tmp12_, &_tmp13_, &_tmp14_, TRUE);
				iter_char = _tmp15_;
				_tmp16_ = s_char;
				_tmp17_ = iter_char;
				if (g_strcmp0 (_tmp16_, _tmp17_) != 0) {
					result = FALSE;
					_g_free0 (iter_char);
					_g_free0 (s_char);
					return result;
				}
				gtk_text_iter_backward_cursor_position (iter);
				gtk_text_iter_backward_cursor_position (iter2);
				_g_free0 (iter_char);
				_g_free0 (s_char);
			}
		}
	}
	_tmp18_ = self->source_view;
	_tmp19_ = gtk_text_view_get_buffer ((GtkTextView*) _tmp18_);
	_tmp20_ = _tmp19_;
	_tmp21_ = *iter;
	_tmp22_ = *iter2;
	_tmp23_ = gtk_text_buffer_get_slice (_tmp20_, &_tmp21_, &_tmp22_, TRUE);
	iter_char = _tmp23_;
	_tmp24_ = self->priv->non_digit_regex;
	_tmp25_ = iter_char;
	_tmp26_ = g_regex_match (_tmp24_, _tmp25_, 0, NULL);
	if (_tmp26_) {
		result = FALSE;
		_g_free0 (iter_char);
		return result;
	}
	result = TRUE;
	_g_free0 (iter_char);
	return result;
}


static gboolean input_view_real_draw (GtkWidget* base, cairo_t* context) {
	InputView * self;
	gboolean result = FALSE;
	gboolean ret = FALSE;
	cairo_t* _tmp0_ = NULL;
	gboolean _tmp1_ = FALSE;
	self = (InputView*) base;
	g_return_val_if_fail (context != NULL, FALSE);
	_tmp0_ = context;
	_tmp1_ = GTK_WIDGET_CLASS (input_view_parent_class)->draw ((GtkWidget*) G_TYPE_CHECK_INSTANCE_CAST (self, gtk_box_get_type (), GtkBox), _tmp0_);
	ret = _tmp1_;
	{
		GeeArrayList* _widget_list = NULL;
		GeeArrayList* _tmp2_ = NULL;
		GeeArrayList* _tmp3_ = NULL;
		gint _widget_size = 0;
		GeeArrayList* _tmp4_ = NULL;
		gint _tmp5_ = 0;
		gint _tmp6_ = 0;
		gint _widget_index = 0;
		_tmp2_ = self->priv->result_widgets;
		_tmp3_ = _g_object_ref0 (_tmp2_);
		_widget_list = _tmp3_;
		_tmp4_ = _widget_list;
		_tmp5_ = gee_abstract_collection_get_size ((GeeCollection*) _tmp4_);
		_tmp6_ = _tmp5_;
		_widget_size = _tmp6_;
		_widget_index = -1;
		while (TRUE) {
			gint _tmp7_ = 0;
			gint _tmp8_ = 0;
			gint _tmp9_ = 0;
			ResultBoxWidget* widget = NULL;
			GeeArrayList* _tmp10_ = NULL;
			gint _tmp11_ = 0;
			gpointer _tmp12_ = NULL;
			gint dest_x = 0;
			gint dest_y = 0;
			ResultBoxWidget* _tmp13_ = NULL;
			gint _tmp14_ = 0;
			gint _tmp15_ = 0;
			ResultBoxWidget* _tmp16_ = NULL;
			cairo_t* _tmp17_ = NULL;
			gint _tmp18_ = 0;
			gint _tmp19_ = 0;
			_tmp7_ = _widget_index;
			_widget_index = _tmp7_ + 1;
			_tmp8_ = _widget_index;
			_tmp9_ = _widget_size;
			if (!(_tmp8_ < _tmp9_)) {
				break;
			}
			_tmp10_ = _widget_list;
			_tmp11_ = _widget_index;
			_tmp12_ = gee_abstract_list_get ((GeeAbstractList*) _tmp10_, _tmp11_);
			widget = (ResultBoxWidget*) _tmp12_;
			_tmp13_ = widget;
			gtk_widget_translate_coordinates ((GtkWidget*) _tmp13_, (GtkWidget*) self, 0, 0, &_tmp14_, &_tmp15_);
			dest_x = _tmp14_;
			dest_y = _tmp15_;
			_tmp16_ = widget;
			_tmp17_ = context;
			_tmp18_ = dest_x;
			_tmp19_ = dest_y;
			result_box_widget_draw_content (_tmp16_, _tmp17_, _tmp18_, _tmp19_);
			_g_object_unref0 (widget);
		}
		_g_object_unref0 (_widget_list);
	}
	result = ret;
	return result;
}


void input_view_insert_text (InputView* self, const gchar* text) {
	GtkSourceView* _tmp0_ = NULL;
	GtkTextBuffer* _tmp1_ = NULL;
	GtkTextBuffer* _tmp2_ = NULL;
	const gchar* _tmp3_ = NULL;
	const gchar* _tmp4_ = NULL;
	gint _tmp5_ = 0;
	gint _tmp6_ = 0;
	g_return_if_fail (self != NULL);
	g_return_if_fail (text != NULL);
	_tmp0_ = self->source_view;
	_tmp1_ = gtk_text_view_get_buffer ((GtkTextView*) _tmp0_);
	_tmp2_ = _tmp1_;
	_tmp3_ = text;
	_tmp4_ = text;
	_tmp5_ = strlen (_tmp4_);
	_tmp6_ = _tmp5_;
	gtk_text_buffer_insert_at_cursor (_tmp2_, _tmp3_, _tmp6_);
}


void input_view_delete_characters (InputView* self, gint count) {
	GtkTextIter iter = {0};
	GtkTextIter iter2 = {0};
	gint offset = 0;
	GtkSourceView* _tmp0_ = NULL;
	GtkTextBuffer* _tmp1_ = NULL;
	GtkTextBuffer* _tmp2_ = NULL;
	gint _tmp3_ = 0;
	gint _tmp4_ = 0;
	GtkSourceView* _tmp5_ = NULL;
	GtkTextBuffer* _tmp6_ = NULL;
	GtkTextBuffer* _tmp7_ = NULL;
	GtkTextIter _tmp8_ = {0};
	GtkSourceView* _tmp9_ = NULL;
	GtkTextBuffer* _tmp10_ = NULL;
	GtkTextBuffer* _tmp11_ = NULL;
	GtkTextIter _tmp12_ = {0};
	gint _tmp13_ = 0;
	GtkSourceView* _tmp14_ = NULL;
	GtkTextBuffer* _tmp15_ = NULL;
	GtkTextBuffer* _tmp16_ = NULL;
	g_return_if_fail (self != NULL);
	memset (&iter, 0, sizeof (GtkTextIter));
	memset (&iter2, 0, sizeof (GtkTextIter));
	_tmp0_ = self->source_view;
	_tmp1_ = gtk_text_view_get_buffer ((GtkTextView*) _tmp0_);
	_tmp2_ = _tmp1_;
	g_object_get (_tmp2_, "cursor-position", &_tmp3_, NULL);
	_tmp4_ = _tmp3_;
	offset = _tmp4_;
	_tmp5_ = self->source_view;
	_tmp6_ = gtk_text_view_get_buffer ((GtkTextView*) _tmp5_);
	_tmp7_ = _tmp6_;
	gtk_text_buffer_get_iter_at_offset (_tmp7_, &_tmp8_, offset);
	iter = _tmp8_;
	_tmp9_ = self->source_view;
	_tmp10_ = gtk_text_view_get_buffer ((GtkTextView*) _tmp9_);
	_tmp11_ = _tmp10_;
	gtk_text_buffer_get_iter_at_offset (_tmp11_, &_tmp12_, offset);
	iter2 = _tmp12_;
	_tmp13_ = count;
	gtk_text_iter_backward_cursor_positions (&iter, _tmp13_);
	_tmp14_ = self->source_view;
	_tmp15_ = gtk_text_view_get_buffer ((GtkTextView*) _tmp14_);
	_tmp16_ = _tmp15_;
	gtk_text_buffer_delete (_tmp16_, &iter, &iter2);
}


static Block13Data* block13_data_ref (Block13Data* _data13_) {
	g_atomic_int_inc (&_data13_->_ref_count_);
	return _data13_;
}


static void block13_data_unref (void * _userdata_) {
	Block13Data* _data13_;
	_data13_ = (Block13Data*) _userdata_;
	if (g_atomic_int_dec_and_test (&_data13_->_ref_count_)) {
		InputView* self;
		self = _data13_->self;
		_g_object_unref0 (_data13_->widget);
		_g_object_unref0 (self);
		g_slice_free (Block13Data, _data13_);
	}
}


static void __lambda20_ (Block13Data* _data13_) {
	InputView* self;
	GeeArrayList* _tmp0_ = NULL;
	ResultBoxWidget* _tmp1_ = NULL;
	self = _data13_->self;
	_tmp0_ = self->priv->result_widgets;
	_tmp1_ = _data13_->widget;
	gee_abstract_collection_remove ((GeeAbstractCollection*) _tmp0_, _tmp1_);
}


static void ___lambda20__gtk_widget_destroy (GtkWidget* _sender, gpointer self) {
	__lambda20_ (self);
}


static void __lambda21_ (InputView* self) {
	gtk_widget_queue_draw ((GtkWidget*) self);
}


static void ___lambda21__result_line_changed (ResultLine* _sender, gpointer self) {
	__lambda21_ ((InputView*) self);
}


void input_view_insert_variable (InputView* self, ResultLine* res) {
	Block13Data* _data13_;
	gboolean _tmp0_ = FALSE;
	GtkTextIter iter = {0};
	GtkSourceView* _tmp4_ = NULL;
	GtkTextBuffer* _tmp5_ = NULL;
	GtkTextBuffer* _tmp6_ = NULL;
	GtkSourceView* _tmp7_ = NULL;
	GtkTextBuffer* _tmp8_ = NULL;
	GtkTextBuffer* _tmp9_ = NULL;
	gint _tmp10_ = 0;
	gint _tmp11_ = 0;
	GtkTextIter _tmp12_ = {0};
	gint actual_line = 0;
	gint _tmp13_ = 0;
	ResultLine* _tmp14_ = NULL;
	gint _tmp15_ = 0;
	gint _tmp16_ = 0;
	gint _tmp17_ = 0;
	GtkTextChildAnchor* anchor = NULL;
	GtkSourceView* _tmp18_ = NULL;
	GtkTextBuffer* _tmp19_ = NULL;
	GtkTextBuffer* _tmp20_ = NULL;
	GtkTextIter _tmp21_ = {0};
	GtkTextChildAnchor* _tmp22_ = NULL;
	GtkTextChildAnchor* _tmp23_ = NULL;
	gint _tmp24_ = 0;
	ResultLine* _tmp25_ = NULL;
	ResultBoxWidget* _tmp26_ = NULL;
	GtkSourceView* _tmp27_ = NULL;
	ResultBoxWidget* _tmp28_ = NULL;
	GtkTextChildAnchor* _tmp29_ = NULL;
	gboolean _tmp30_ = FALSE;
	GeeArrayList* _tmp43_ = NULL;
	ResultBoxWidget* _tmp44_ = NULL;
	ResultBoxWidget* _tmp45_ = NULL;
	ResultBoxWidget* _tmp46_ = NULL;
	ResultLine* _tmp47_ = NULL;
	g_return_if_fail (self != NULL);
	g_return_if_fail (res != NULL);
	_data13_ = g_slice_new0 (Block13Data);
	_data13_->_ref_count_ = 1;
	_data13_->self = g_object_ref (self);
	_tmp0_ = self->priv->add_space;
	if (_tmp0_) {
		GtkSourceView* _tmp1_ = NULL;
		GtkTextBuffer* _tmp2_ = NULL;
		GtkTextBuffer* _tmp3_ = NULL;
		self->skip_change = TRUE;
		_tmp1_ = self->source_view;
		_tmp2_ = gtk_text_view_get_buffer ((GtkTextView*) _tmp1_);
		_tmp3_ = _tmp2_;
		gtk_text_buffer_insert_at_cursor (_tmp3_, " ", -1);
		self->skip_change = FALSE;
	}
	_tmp4_ = self->source_view;
	_tmp5_ = gtk_text_view_get_buffer ((GtkTextView*) _tmp4_);
	_tmp6_ = _tmp5_;
	_tmp7_ = self->source_view;
	_tmp8_ = gtk_text_view_get_buffer ((GtkTextView*) _tmp7_);
	_tmp9_ = _tmp8_;
	g_object_get (_tmp9_, "cursor-position", &_tmp10_, NULL);
	_tmp11_ = _tmp10_;
	gtk_text_buffer_get_iter_at_offset (_tmp6_, &_tmp12_, _tmp11_);
	iter = _tmp12_;
	_tmp13_ = gtk_text_iter_get_line (&iter);
	actual_line = _tmp13_;
	_tmp14_ = res;
	_tmp15_ = result_line_get_line (_tmp14_);
	_tmp16_ = _tmp15_;
	_tmp17_ = actual_line;
	if (_tmp16_ >= _tmp17_) {
		block13_data_unref (_data13_);
		_data13_ = NULL;
		return;
	}
	_tmp18_ = self->source_view;
	_tmp19_ = gtk_text_view_get_buffer ((GtkTextView*) _tmp18_);
	_tmp20_ = _tmp19_;
	_tmp21_ = iter;
	_tmp22_ = gtk_text_buffer_create_child_anchor (_tmp20_, &_tmp21_);
	_tmp23_ = _g_object_ref0 (_tmp22_);
	anchor = _tmp23_;
	_tmp24_ = actual_line;
	_tmp25_ = res;
	_tmp26_ = result_box_widget_new (_tmp24_, _tmp25_);
	g_object_ref_sink (_tmp26_);
	_data13_->widget = _tmp26_;
	_tmp27_ = self->source_view;
	_tmp28_ = _data13_->widget;
	_tmp29_ = anchor;
	gtk_text_view_add_child_at_anchor ((GtkTextView*) _tmp27_, (GtkWidget*) _tmp28_, _tmp29_);
	_tmp30_ = self->skip_change;
	if (!_tmp30_) {
		GtkSourceView* _tmp31_ = NULL;
		GtkTextBuffer* _tmp32_ = NULL;
		GtkTextBuffer* _tmp33_ = NULL;
		GtkSourceView* _tmp34_ = NULL;
		GtkTextBuffer* _tmp35_ = NULL;
		GtkTextBuffer* _tmp36_ = NULL;
		gint _tmp37_ = 0;
		gint _tmp38_ = 0;
		GtkTextIter _tmp39_ = {0};
		GtkSourceView* _tmp40_ = NULL;
		GtkTextBuffer* _tmp41_ = NULL;
		GtkTextBuffer* _tmp42_ = NULL;
		_tmp31_ = self->source_view;
		_tmp32_ = gtk_text_view_get_buffer ((GtkTextView*) _tmp31_);
		_tmp33_ = _tmp32_;
		_tmp34_ = self->source_view;
		_tmp35_ = gtk_text_view_get_buffer ((GtkTextView*) _tmp34_);
		_tmp36_ = _tmp35_;
		g_object_get (_tmp36_, "cursor-position", &_tmp37_, NULL);
		_tmp38_ = _tmp37_;
		gtk_text_buffer_get_iter_at_offset (_tmp33_, &_tmp39_, _tmp38_);
		iter = _tmp39_;
		_tmp40_ = self->source_view;
		_tmp41_ = gtk_text_view_get_buffer ((GtkTextView*) _tmp40_);
		_tmp42_ = _tmp41_;
		gtk_text_buffer_insert (_tmp42_, &iter, " ", 1);
	}
	_tmp43_ = self->priv->result_widgets;
	_tmp44_ = _data13_->widget;
	gee_abstract_collection_add ((GeeAbstractCollection*) _tmp43_, _tmp44_);
	_tmp45_ = _data13_->widget;
	g_signal_connect_data ((GtkWidget*) _tmp45_, "destroy", (GCallback) ___lambda20__gtk_widget_destroy, block13_data_ref (_data13_), (GClosureNotify) block13_data_unref, 0);
	_tmp46_ = _data13_->widget;
	_tmp47_ = _tmp46_->result;
	g_signal_connect_object (_tmp47_, "changed", (GCallback) ___lambda21__result_line_changed, self, 0);
	_g_object_unref0 (anchor);
	block13_data_unref (_data13_);
	_data13_ = NULL;
}


gint input_view_get_cursor_line (InputView* self) {
	gint result = 0;
	GtkTextIter iter = {0};
	GtkSourceView* _tmp0_ = NULL;
	GtkTextBuffer* _tmp1_ = NULL;
	GtkTextBuffer* _tmp2_ = NULL;
	GtkSourceView* _tmp3_ = NULL;
	GtkTextBuffer* _tmp4_ = NULL;
	GtkTextBuffer* _tmp5_ = NULL;
	gint _tmp6_ = 0;
	gint _tmp7_ = 0;
	GtkTextIter _tmp8_ = {0};
	gint _tmp9_ = 0;
	g_return_val_if_fail (self != NULL, 0);
	_tmp0_ = self->source_view;
	_tmp1_ = gtk_text_view_get_buffer ((GtkTextView*) _tmp0_);
	_tmp2_ = _tmp1_;
	_tmp3_ = self->source_view;
	_tmp4_ = gtk_text_view_get_buffer ((GtkTextView*) _tmp3_);
	_tmp5_ = _tmp4_;
	g_object_get (_tmp5_, "cursor-position", &_tmp6_, NULL);
	_tmp7_ = _tmp6_;
	gtk_text_buffer_get_iter_at_offset (_tmp2_, &_tmp8_, _tmp7_);
	iter = _tmp8_;
	_tmp9_ = gtk_text_iter_get_line (&iter);
	result = _tmp9_;
	return result;
}


gchar* input_view_get_text_line_to_end (InputView* self, gint line) {
	gchar* result = NULL;
	GtkTextIter start = {0};
	GtkTextIter end = {0};
	GtkSourceBuffer* _tmp0_ = NULL;
	gint _tmp1_ = 0;
	GtkTextIter _tmp2_ = {0};
	GtkSourceBuffer* _tmp3_ = NULL;
	GtkTextIter _tmp4_ = {0};
	gint _tmp5_ = 0;
	gint _tmp6_ = 0;
	gchar* text = NULL;
	GtkSourceBuffer* _tmp8_ = NULL;
	GtkTextIter _tmp9_ = {0};
	GtkTextIter _tmp10_ = {0};
	gchar* _tmp11_ = NULL;
	gint _tmp12_ = 0;
	const gchar* _tmp13_ = NULL;
	gchar* _tmp14_ = NULL;
	g_return_val_if_fail (self != NULL, NULL);
	_tmp0_ = self->buffer;
	_tmp1_ = line;
	gtk_text_buffer_get_iter_at_line ((GtkTextBuffer*) _tmp0_, &_tmp2_, _tmp1_);
	start = _tmp2_;
	_tmp3_ = self->buffer;
	gtk_text_buffer_get_end_iter ((GtkTextBuffer*) _tmp3_, &_tmp4_);
	end = _tmp4_;
	_tmp5_ = gtk_text_iter_get_offset (&start);
	_tmp6_ = gtk_text_iter_get_offset (&end);
	if (_tmp5_ == _tmp6_) {
		gchar* _tmp7_ = NULL;
		_tmp7_ = g_strdup ("");
		result = _tmp7_;
		return result;
	}
	_tmp8_ = self->buffer;
	_tmp9_ = start;
	_tmp10_ = end;
	_tmp11_ = gtk_text_buffer_get_slice ((GtkTextBuffer*) _tmp8_, &_tmp9_, &_tmp10_, FALSE);
	text = _tmp11_;
	_tmp12_ = line;
	_tmp13_ = text;
	_tmp14_ = input_view_replace_widget_markers (self, _tmp12_, _tmp13_, TRUE, FALSE);
	_g_free0 (text);
	text = _tmp14_;
	result = text;
	return result;
}


gchar* input_view_get_replaced_content (InputView* self) {
	gchar* result = NULL;
	GtkTextIter start = {0};
	GtkTextIter end = {0};
	GtkSourceBuffer* _tmp0_ = NULL;
	GtkTextIter _tmp1_ = {0};
	GtkSourceBuffer* _tmp2_ = NULL;
	GtkTextIter _tmp3_ = {0};
	gint _tmp4_ = 0;
	gint _tmp5_ = 0;
	gchar* text = NULL;
	GtkSourceBuffer* _tmp7_ = NULL;
	GtkTextIter _tmp8_ = {0};
	GtkTextIter _tmp9_ = {0};
	gchar* _tmp10_ = NULL;
	const gchar* _tmp11_ = NULL;
	gchar* _tmp12_ = NULL;
	g_return_val_if_fail (self != NULL, NULL);
	_tmp0_ = self->buffer;
	gtk_text_buffer_get_start_iter ((GtkTextBuffer*) _tmp0_, &_tmp1_);
	start = _tmp1_;
	_tmp2_ = self->buffer;
	gtk_text_buffer_get_end_iter ((GtkTextBuffer*) _tmp2_, &_tmp3_);
	end = _tmp3_;
	_tmp4_ = gtk_text_iter_get_offset (&start);
	_tmp5_ = gtk_text_iter_get_offset (&end);
	if (_tmp4_ == _tmp5_) {
		gchar* _tmp6_ = NULL;
		_tmp6_ = g_strdup ("");
		result = _tmp6_;
		return result;
	}
	_tmp7_ = self->buffer;
	_tmp8_ = start;
	_tmp9_ = end;
	_tmp10_ = gtk_text_buffer_get_slice ((GtkTextBuffer*) _tmp7_, &_tmp8_, &_tmp9_, FALSE);
	text = _tmp10_;
	_tmp11_ = text;
	_tmp12_ = input_view_replace_widget_markers (self, 0, _tmp11_, FALSE, FALSE);
	_g_free0 (text);
	text = _tmp12_;
	result = text;
	return result;
}


gchar* input_view_get_replaced_marked_content (InputView* self) {
	gchar* result = NULL;
	GtkTextIter start = {0};
	GtkTextIter end = {0};
	GtkSourceBuffer* _tmp0_ = NULL;
	GtkTextIter _tmp1_ = {0};
	GtkTextIter _tmp2_ = {0};
	gboolean _tmp3_ = FALSE;
	gchar* text = NULL;
	GtkSourceBuffer* _tmp4_ = NULL;
	GtkTextIter _tmp5_ = {0};
	GtkTextIter _tmp6_ = {0};
	gchar* _tmp7_ = NULL;
	const gchar* _tmp8_ = NULL;
	gchar* _tmp9_ = NULL;
	g_return_val_if_fail (self != NULL, NULL);
	_tmp0_ = self->buffer;
	_tmp3_ = gtk_text_buffer_get_selection_bounds ((GtkTextBuffer*) _tmp0_, &_tmp1_, &_tmp2_);
	start = _tmp1_;
	end = _tmp2_;
	if (!_tmp3_) {
		result = NULL;
		return result;
	}
	_tmp4_ = self->buffer;
	_tmp5_ = start;
	_tmp6_ = end;
	_tmp7_ = gtk_text_buffer_get_slice ((GtkTextBuffer*) _tmp4_, &_tmp5_, &_tmp6_, FALSE);
	text = _tmp7_;
	_tmp8_ = text;
	_tmp9_ = input_view_replace_widget_markers (self, 0, _tmp8_, FALSE, FALSE);
	_g_free0 (text);
	text = _tmp9_;
	result = text;
	return result;
}


gchar* input_view_get_replaced_marked_real_content (InputView* self) {
	gchar* result = NULL;
	GtkTextIter start = {0};
	GtkTextIter end = {0};
	GtkSourceBuffer* _tmp0_ = NULL;
	GtkTextIter _tmp1_ = {0};
	GtkTextIter _tmp2_ = {0};
	gboolean _tmp3_ = FALSE;
	gchar* text = NULL;
	GtkSourceBuffer* _tmp4_ = NULL;
	GtkTextIter _tmp5_ = {0};
	GtkTextIter _tmp6_ = {0};
	gchar* _tmp7_ = NULL;
	const gchar* _tmp8_ = NULL;
	gchar* _tmp9_ = NULL;
	g_return_val_if_fail (self != NULL, NULL);
	_tmp0_ = self->buffer;
	_tmp3_ = gtk_text_buffer_get_selection_bounds ((GtkTextBuffer*) _tmp0_, &_tmp1_, &_tmp2_);
	start = _tmp1_;
	end = _tmp2_;
	if (!_tmp3_) {
		result = NULL;
		return result;
	}
	_tmp4_ = self->buffer;
	_tmp5_ = start;
	_tmp6_ = end;
	_tmp7_ = gtk_text_buffer_get_slice ((GtkTextBuffer*) _tmp4_, &_tmp5_, &_tmp6_, FALSE);
	text = _tmp7_;
	_tmp8_ = text;
	_tmp9_ = input_view_replace_widget_markers (self, 0, _tmp8_, FALSE, TRUE);
	_g_free0 (text);
	text = _tmp9_;
	result = text;
	return result;
}


static gboolean string_get_next_char (const gchar* self, gint* index, gunichar* c) {
	gunichar _vala_c = 0U;
	gboolean result = FALSE;
	gint _tmp0_ = 0;
	gunichar _tmp1_ = 0U;
	gunichar _tmp2_ = 0U;
	g_return_val_if_fail (self != NULL, FALSE);
	_tmp0_ = *index;
	_tmp1_ = g_utf8_get_char (((gchar*) self) + _tmp0_);
	_vala_c = _tmp1_;
	_tmp2_ = _vala_c;
	if (_tmp2_ != ((gunichar) 0)) {
		gint _tmp3_ = 0;
		gchar* _tmp4_ = NULL;
		_tmp3_ = *index;
		_tmp4_ = g_utf8_next_char (((gchar*) self) + _tmp3_);
		*index = (gint) (_tmp4_ - ((gchar*) self));
		result = TRUE;
		if (c) {
			*c = _vala_c;
		}
		return result;
	} else {
		result = FALSE;
		if (c) {
			*c = _vala_c;
		}
		return result;
	}
	if (c) {
		*c = _vala_c;
	}
}


static gchar* g_unichar_to_string (gunichar self) {
	gchar* result = NULL;
	gchar* str = NULL;
	gchar* _tmp0_ = NULL;
	const gchar* _tmp1_ = NULL;
	_tmp0_ = g_new0 (gchar, 7);
	str = (gchar*) _tmp0_;
	_tmp1_ = str;
	g_unichar_to_utf8 (self, _tmp1_);
	result = str;
	return result;
}


static void _vala_array_add4 (gint** array, int* length, int* size, gint value) {
	if ((*length) == (*size)) {
		*size = (*size) ? (2 * (*size)) : 4;
		*array = g_renew (gint, *array, *size);
	}
	(*array)[(*length)++] = value;
}


static gchar* string_splice (const gchar* self, glong start, glong end, const gchar* str) {
	gchar* result = NULL;
	glong string_length = 0L;
	gint _tmp0_ = 0;
	gint _tmp1_ = 0;
	glong _tmp2_ = 0L;
	glong _tmp5_ = 0L;
	gboolean _tmp8_ = FALSE;
	glong _tmp9_ = 0L;
	gboolean _tmp12_ = FALSE;
	glong _tmp13_ = 0L;
	glong _tmp16_ = 0L;
	glong _tmp17_ = 0L;
	gsize str_size = 0UL;
	const gchar* _tmp18_ = NULL;
	const gchar* _result_ = NULL;
	gint _tmp22_ = 0;
	gint _tmp23_ = 0;
	glong _tmp24_ = 0L;
	glong _tmp25_ = 0L;
	gsize _tmp26_ = 0UL;
	void* _tmp27_ = NULL;
	gchar* dest = NULL;
	const gchar* _tmp28_ = NULL;
	gchar* _tmp29_ = NULL;
	glong _tmp30_ = 0L;
	gchar* _tmp31_ = NULL;
	glong _tmp32_ = 0L;
	gchar* _tmp33_ = NULL;
	const gchar* _tmp34_ = NULL;
	gsize _tmp35_ = 0UL;
	gchar* _tmp36_ = NULL;
	gsize _tmp37_ = 0UL;
	gchar* _tmp38_ = NULL;
	glong _tmp39_ = 0L;
	glong _tmp40_ = 0L;
	glong _tmp41_ = 0L;
	const gchar* _tmp42_ = NULL;
	g_return_val_if_fail (self != NULL, NULL);
	_tmp0_ = strlen (self);
	_tmp1_ = _tmp0_;
	string_length = (glong) _tmp1_;
	_tmp2_ = start;
	if (_tmp2_ < ((glong) 0)) {
		glong _tmp3_ = 0L;
		glong _tmp4_ = 0L;
		_tmp3_ = string_length;
		_tmp4_ = start;
		start = _tmp3_ + _tmp4_;
	}
	_tmp5_ = end;
	if (_tmp5_ < ((glong) 0)) {
		glong _tmp6_ = 0L;
		glong _tmp7_ = 0L;
		_tmp6_ = string_length;
		_tmp7_ = end;
		end = _tmp6_ + _tmp7_;
	}
	_tmp9_ = start;
	if (_tmp9_ >= ((glong) 0)) {
		glong _tmp10_ = 0L;
		glong _tmp11_ = 0L;
		_tmp10_ = start;
		_tmp11_ = string_length;
		_tmp8_ = _tmp10_ <= _tmp11_;
	} else {
		_tmp8_ = FALSE;
	}
	g_return_val_if_fail (_tmp8_, NULL);
	_tmp13_ = end;
	if (_tmp13_ >= ((glong) 0)) {
		glong _tmp14_ = 0L;
		glong _tmp15_ = 0L;
		_tmp14_ = end;
		_tmp15_ = string_length;
		_tmp12_ = _tmp14_ <= _tmp15_;
	} else {
		_tmp12_ = FALSE;
	}
	g_return_val_if_fail (_tmp12_, NULL);
	_tmp16_ = start;
	_tmp17_ = end;
	g_return_val_if_fail (_tmp16_ <= _tmp17_, NULL);
	_tmp18_ = str;
	if (_tmp18_ == NULL) {
		str_size = (gsize) 0;
	} else {
		const gchar* _tmp19_ = NULL;
		gint _tmp20_ = 0;
		gint _tmp21_ = 0;
		_tmp19_ = str;
		_tmp20_ = strlen ((const gchar*) _tmp19_);
		_tmp21_ = _tmp20_;
		str_size = (gsize) _tmp21_;
	}
	_tmp22_ = strlen (self);
	_tmp23_ = _tmp22_;
	_tmp24_ = end;
	_tmp25_ = start;
	_tmp26_ = str_size;
	_tmp27_ = g_malloc0 (((_tmp23_ - (_tmp24_ - _tmp25_)) + _tmp26_) + 1);
	_result_ = _tmp27_;
	_tmp28_ = _result_;
	dest = (gchar*) _tmp28_;
	_tmp29_ = dest;
	_tmp30_ = start;
	memcpy (_tmp29_, self, (gsize) _tmp30_);
	_tmp31_ = dest;
	_tmp32_ = start;
	dest = _tmp31_ + _tmp32_;
	_tmp33_ = dest;
	_tmp34_ = str;
	_tmp35_ = str_size;
	memcpy (_tmp33_, _tmp34_, _tmp35_);
	_tmp36_ = dest;
	_tmp37_ = str_size;
	dest = _tmp36_ + _tmp37_;
	_tmp38_ = dest;
	_tmp39_ = end;
	_tmp40_ = string_length;
	_tmp41_ = end;
	memcpy (_tmp38_, ((gchar*) self) + _tmp39_, (gsize) (_tmp40_ - _tmp41_));
	_tmp42_ = _result_;
	_result_ = NULL;
	result = (gchar*) _tmp42_;
	return result;
}


static gint string_index_of_nth_char (const gchar* self, glong c) {
	gint result = 0;
	glong _tmp0_ = 0L;
	gchar* _tmp1_ = NULL;
	g_return_val_if_fail (self != NULL, 0);
	_tmp0_ = c;
	_tmp1_ = g_utf8_offset_to_pointer (self, _tmp0_);
	result = (gint) (_tmp1_ - ((gchar*) self));
	return result;
}


static gchar* input_view_replace_widget_markers (InputView* self, gint line_number, const gchar* text, gboolean for_calculator, gboolean real_values) {
	gchar* result = NULL;
	gchar* return_text = NULL;
	const gchar* _tmp0_ = NULL;
	gchar* _tmp1_ = NULL;
	const gchar* _tmp2_ = NULL;
	GtkTextIter iter = {0};
	gint* replacement_indexes = NULL;
	gint* _tmp3_ = NULL;
	gint replacement_indexes_length1 = 0;
	gint _replacement_indexes_size_ = 0;
	gunichar c = 0U;
	gint j = 0;
	gint delta = 0;
	gint* _tmp15_ = NULL;
	gint _tmp15__length1 = 0;
	g_return_val_if_fail (self != NULL, NULL);
	g_return_val_if_fail (text != NULL, NULL);
	_tmp0_ = text;
	_tmp1_ = g_strdup (_tmp0_);
	return_text = _tmp1_;
	_tmp2_ = return_text;
	if (g_strcmp0 (_tmp2_, "") == 0) {
		result = return_text;
		return result;
	}
	_tmp3_ = g_new0 (gint, 0);
	replacement_indexes = _tmp3_;
	replacement_indexes_length1 = 0;
	_replacement_indexes_size_ = replacement_indexes_length1;
	j = 0;
	{
		gint i = 0;
		i = 0;
		{
			gboolean _tmp4_ = FALSE;
			_tmp4_ = TRUE;
			while (TRUE) {
				const gchar* _tmp5_ = NULL;
				gunichar _tmp6_ = 0U;
				gboolean _tmp7_ = FALSE;
				gunichar _tmp8_ = 0U;
				gchar* _tmp9_ = NULL;
				gchar* _tmp10_ = NULL;
				gboolean _tmp11_ = FALSE;
				gint _tmp14_ = 0;
				if (!_tmp4_) {
				}
				_tmp4_ = FALSE;
				_tmp5_ = return_text;
				_tmp7_ = string_get_next_char (_tmp5_, &i, &_tmp6_);
				c = _tmp6_;
				if (!_tmp7_) {
					break;
				}
				_tmp8_ = c;
				_tmp9_ = g_unichar_to_string (_tmp8_);
				_tmp10_ = _tmp9_;
				_tmp11_ = g_strcmp0 ("￼", _tmp10_) == 0;
				_g_free0 (_tmp10_);
				if (_tmp11_) {
					gint* _tmp12_ = NULL;
					gint _tmp12__length1 = 0;
					gint _tmp13_ = 0;
					_tmp12_ = replacement_indexes;
					_tmp12__length1 = replacement_indexes_length1;
					_tmp13_ = j;
					_vala_array_add4 (&replacement_indexes, &replacement_indexes_length1, &_replacement_indexes_size_, _tmp13_);
				}
				_tmp14_ = j;
				j = _tmp14_ + 1;
			}
		}
	}
	delta = 0;
	_tmp15_ = replacement_indexes;
	_tmp15__length1 = replacement_indexes_length1;
	{
		gint* i_collection = NULL;
		gint i_collection_length1 = 0;
		gint _i_collection_size_ = 0;
		gint i_it = 0;
		i_collection = _tmp15_;
		i_collection_length1 = _tmp15__length1;
		for (i_it = 0; i_it < _tmp15__length1; i_it = i_it + 1) {
			gint i = 0;
			i = i_collection[i_it];
			{
				gchar* replacement = NULL;
				gchar* _tmp16_ = NULL;
				GtkSourceBuffer* _tmp17_ = NULL;
				gint _tmp18_ = 0;
				GtkTextIter _tmp19_ = {0};
				GtkSourceBuffer* _tmp20_ = NULL;
				gint _tmp21_ = 0;
				gint _tmp22_ = 0;
				GtkTextIter _tmp23_ = {0};
				GtkTextChildAnchor* anchor = NULL;
				GtkTextChildAnchor* _tmp24_ = NULL;
				GtkTextChildAnchor* _tmp25_ = NULL;
				GtkTextChildAnchor* _tmp26_ = NULL;
				const gchar* _tmp46_ = NULL;
				const gchar* _tmp47_ = NULL;
				gint _tmp48_ = 0;
				gint _tmp49_ = 0;
				gint _tmp50_ = 0;
				const gchar* _tmp51_ = NULL;
				gint _tmp52_ = 0;
				gint _tmp53_ = 0;
				gint _tmp54_ = 0;
				const gchar* _tmp55_ = NULL;
				gchar* _tmp56_ = NULL;
				gint _tmp57_ = 0;
				const gchar* _tmp58_ = NULL;
				gint _tmp59_ = 0;
				gint _tmp60_ = 0;
				_tmp16_ = g_strdup ("");
				replacement = _tmp16_;
				_tmp17_ = self->buffer;
				_tmp18_ = line_number;
				gtk_text_buffer_get_iter_at_line_offset ((GtkTextBuffer*) _tmp17_, &_tmp19_, _tmp18_, 0);
				iter = _tmp19_;
				_tmp20_ = self->buffer;
				_tmp21_ = gtk_text_iter_get_offset (&iter);
				_tmp22_ = i;
				gtk_text_buffer_get_iter_at_offset ((GtkTextBuffer*) _tmp20_, &_tmp23_, _tmp21_ + _tmp22_);
				iter = _tmp23_;
				_tmp24_ = gtk_text_iter_get_child_anchor (&iter);
				_tmp25_ = _g_object_ref0 (_tmp24_);
				anchor = _tmp25_;
				_tmp26_ = anchor;
				if (_tmp26_ != NULL) {
					GtkTextChildAnchor* _tmp27_ = NULL;
					GList* _tmp28_ = NULL;
					_tmp27_ = anchor;
					_tmp28_ = gtk_text_child_anchor_get_widgets (_tmp27_);
					{
						GList* w_collection = NULL;
						GList* w_it = NULL;
						w_collection = _tmp28_;
						for (w_it = w_collection; w_it != NULL; w_it = w_it->next) {
							GtkWidget* w = NULL;
							w = (GtkWidget*) w_it->data;
							{
								ResultBoxWidget* ws = NULL;
								GtkWidget* _tmp29_ = NULL;
								ResultBoxWidget* _tmp30_ = NULL;
								ResultBoxWidget* _tmp31_ = NULL;
								_tmp29_ = w;
								_tmp30_ = _g_object_ref0 (G_TYPE_CHECK_INSTANCE_TYPE (_tmp29_, TYPE_RESULT_BOX_WIDGET) ? ((ResultBoxWidget*) _tmp29_) : NULL);
								ws = _tmp30_;
								_tmp31_ = ws;
								if (_tmp31_ != NULL) {
									gboolean _tmp32_ = FALSE;
									_tmp32_ = real_values;
									if (_tmp32_) {
										ResultBoxWidget* _tmp33_ = NULL;
										ResultLine* _tmp34_ = NULL;
										const gchar* _tmp35_ = NULL;
										const gchar* _tmp36_ = NULL;
										gchar* _tmp37_ = NULL;
										_tmp33_ = ws;
										_tmp34_ = _tmp33_->result;
										_tmp35_ = result_line_get_full_value (_tmp34_);
										_tmp36_ = _tmp35_;
										_tmp37_ = g_strdup (_tmp36_);
										_g_free0 (replacement);
										replacement = _tmp37_;
									} else {
										gboolean _tmp38_ = FALSE;
										_tmp38_ = for_calculator;
										if (_tmp38_) {
											ResultBoxWidget* _tmp39_ = NULL;
											gchar* _tmp40_ = NULL;
											_tmp39_ = ws;
											_tmp40_ = result_box_widget_get_variable_name (_tmp39_);
											_g_free0 (replacement);
											replacement = _tmp40_;
										} else {
											ResultBoxWidget* _tmp41_ = NULL;
											ResultLine* _tmp42_ = NULL;
											gint _tmp43_ = 0;
											gint _tmp44_ = 0;
											gchar* _tmp45_ = NULL;
											_tmp41_ = ws;
											_tmp42_ = _tmp41_->result;
											_tmp43_ = result_line_get_line (_tmp42_);
											_tmp44_ = _tmp43_;
											_tmp45_ = g_strdup_printf ("line%d", _tmp44_ + 1);
											_g_free0 (replacement);
											replacement = _tmp45_;
										}
									}
								}
								_g_object_unref0 (ws);
							}
						}
						_g_list_free0 (w_collection);
					}
				}
				_tmp46_ = return_text;
				_tmp47_ = return_text;
				_tmp48_ = i;
				_tmp49_ = delta;
				_tmp50_ = string_index_of_nth_char (_tmp47_, (glong) (_tmp48_ + _tmp49_));
				_tmp51_ = return_text;
				_tmp52_ = i;
				_tmp53_ = delta;
				_tmp54_ = string_index_of_nth_char (_tmp51_, (glong) ((_tmp52_ + 1) + _tmp53_));
				_tmp55_ = replacement;
				_tmp56_ = string_splice (_tmp46_, (glong) _tmp50_, (glong) _tmp54_, _tmp55_);
				_g_free0 (return_text);
				return_text = _tmp56_;
				_tmp57_ = delta;
				_tmp58_ = replacement;
				_tmp59_ = strlen (_tmp58_);
				_tmp60_ = _tmp59_;
				delta = _tmp57_ + (_tmp60_ - 1);
				_g_object_unref0 (anchor);
				_g_free0 (replacement);
			}
		}
	}
	result = return_text;
	replacement_indexes = (g_free (replacement_indexes), NULL);
	return result;
}


static gboolean int64_try_parse (const gchar* str, gint64* _result_) {
	gint64 _vala_result = 0LL;
	gboolean result = FALSE;
	gchar* endptr = NULL;
	const gchar* _tmp0_ = NULL;
	gchar* _tmp1_ = NULL;
	gint64 _tmp2_ = 0LL;
	gchar* _tmp3_ = NULL;
	const gchar* _tmp4_ = NULL;
	const gchar* _tmp5_ = NULL;
	gint _tmp6_ = 0;
	gint _tmp7_ = 0;
	g_return_val_if_fail (str != NULL, FALSE);
	_tmp0_ = str;
	_tmp2_ = g_ascii_strtoll (_tmp0_, &_tmp1_, (guint) 0);
	endptr = _tmp1_;
	_vala_result = _tmp2_;
	_tmp3_ = endptr;
	_tmp4_ = str;
	_tmp5_ = str;
	_tmp6_ = strlen (_tmp5_);
	_tmp7_ = _tmp6_;
	if (_tmp3_ == (((gchar*) _tmp4_) + _tmp7_)) {
		result = TRUE;
		if (_result_) {
			*_result_ = _vala_result;
		}
		return result;
	} else {
		result = FALSE;
		if (_result_) {
			*_result_ = _vala_result;
		}
		return result;
	}
	if (_result_) {
		*_result_ = _vala_result;
	}
}


static gboolean __lambda16_ (InputView* self, GdkEventMotion* e) {
	gboolean result = FALSE;
	GtkTextIter iter = {0};
	GtkTextIter iter2 = {0};
	gint _tmp0_ = 0;
	gint x = 0;
	gint y = 0;
	GtkSourceView* _tmp37_ = NULL;
	GdkEventMotion* _tmp38_ = NULL;
	gdouble _tmp39_ = 0.0;
	GdkEventMotion* _tmp40_ = NULL;
	gdouble _tmp41_ = 0.0;
	gint _tmp42_ = 0;
	gint _tmp43_ = 0;
	GtkSourceView* _tmp44_ = NULL;
	gint _tmp45_ = 0;
	gint _tmp46_ = 0;
	GtkTextIter _tmp47_ = {0};
	GtkSourceView* _tmp48_ = NULL;
	GtkTextBuffer* _tmp49_ = NULL;
	GtkTextBuffer* _tmp50_ = NULL;
	GtkTextIter _tmp51_ = {0};
	gint _tmp52_ = 0;
	gint _tmp53_ = 0;
	GtkTextIter _tmp58_ = {0};
	gchar* word = NULL;
	GtkSourceView* _tmp59_ = NULL;
	GtkTextBuffer* _tmp60_ = NULL;
	GtkTextBuffer* _tmp61_ = NULL;
	GtkTextIter _tmp62_ = {0};
	GtkTextIter _tmp63_ = {0};
	gchar* _tmp64_ = NULL;
	gint _tmp65_ = 0;
	gboolean _tmp66_ = FALSE;
	gboolean _tmp67_ = FALSE;
	gboolean _tmp68_ = FALSE;
	gunichar _tmp69_ = 0U;
	gint64 val = 0LL;
	gboolean success = FALSE;
	const gchar* _tmp77_ = NULL;
	gint64 _tmp78_ = 0LL;
	gboolean _tmp79_ = FALSE;
	gboolean _tmp80_ = FALSE;
	g_return_val_if_fail (e != NULL, FALSE);
	memset (&iter, 0, sizeof (GtkTextIter));
	memset (&iter2, 0, sizeof (GtkTextIter));
	_tmp0_ = self->priv->scrubb_press_x;
	if (_tmp0_ > 0) {
		gint delta = 0;
		gint _tmp1_ = 0;
		GdkEventMotion* _tmp2_ = NULL;
		gdouble _tmp3_ = 0.0;
		gchar* new_value = NULL;
		gint _tmp4_ = 0;
		gint _tmp5_ = 0;
		gchar* _tmp6_ = NULL;
		GtkSourceView* _tmp7_ = NULL;
		GtkTextBuffer* _tmp8_ = NULL;
		GtkTextBuffer* _tmp9_ = NULL;
		gint _tmp10_ = 0;
		GtkTextIter _tmp11_ = {0};
		GtkSourceView* _tmp12_ = NULL;
		GtkTextBuffer* _tmp13_ = NULL;
		GtkTextBuffer* _tmp14_ = NULL;
		gint _tmp15_ = 0;
		gint _tmp16_ = 0;
		GtkTextIter _tmp17_ = {0};
		const gchar* _tmp18_ = NULL;
		gint _tmp19_ = 0;
		gint _tmp20_ = 0;
		GtkSourceView* _tmp21_ = NULL;
		GtkTextBuffer* _tmp22_ = NULL;
		GtkTextBuffer* _tmp23_ = NULL;
		GtkSourceView* _tmp24_ = NULL;
		GtkTextBuffer* _tmp25_ = NULL;
		GtkTextBuffer* _tmp26_ = NULL;
		gint _tmp27_ = 0;
		GtkTextIter _tmp28_ = {0};
		GtkSourceView* _tmp29_ = NULL;
		GtkTextBuffer* _tmp30_ = NULL;
		GtkTextBuffer* _tmp31_ = NULL;
		const gchar* _tmp32_ = NULL;
		const gchar* _tmp33_ = NULL;
		gint _tmp34_ = 0;
		gint _tmp35_ = 0;
		GtkTextTag* _tmp36_ = NULL;
		_tmp1_ = self->priv->scrubb_press_x;
		_tmp2_ = e;
		_tmp3_ = _tmp2_->x;
		delta = (-_tmp1_) + ((gint) _tmp3_);
		_tmp4_ = self->priv->org_value;
		_tmp5_ = delta;
		_tmp6_ = g_strdup_printf ("%d", _tmp4_ + _tmp5_);
		new_value = _tmp6_;
		_tmp7_ = self->source_view;
		_tmp8_ = gtk_text_view_get_buffer ((GtkTextView*) _tmp7_);
		_tmp9_ = _tmp8_;
		_tmp10_ = self->priv->start_scrub;
		gtk_text_buffer_get_iter_at_offset (_tmp9_, &_tmp11_, _tmp10_);
		iter = _tmp11_;
		_tmp12_ = self->source_view;
		_tmp13_ = gtk_text_view_get_buffer ((GtkTextView*) _tmp12_);
		_tmp14_ = _tmp13_;
		_tmp15_ = self->priv->start_scrub;
		_tmp16_ = self->priv->scrub_width;
		gtk_text_buffer_get_iter_at_offset (_tmp14_, &_tmp17_, _tmp15_ + _tmp16_);
		iter2 = _tmp17_;
		_tmp18_ = new_value;
		_tmp19_ = strlen (_tmp18_);
		_tmp20_ = _tmp19_;
		self->priv->scrub_width = _tmp20_;
		self->skip_change = TRUE;
		_tmp21_ = self->source_view;
		_tmp22_ = gtk_text_view_get_buffer ((GtkTextView*) _tmp21_);
		_tmp23_ = _tmp22_;
		gtk_text_buffer_delete (_tmp23_, &iter, &iter2);
		self->skip_change = FALSE;
		_tmp24_ = self->source_view;
		_tmp25_ = gtk_text_view_get_buffer ((GtkTextView*) _tmp24_);
		_tmp26_ = _tmp25_;
		_tmp27_ = self->priv->start_scrub;
		gtk_text_buffer_get_iter_at_offset (_tmp26_, &_tmp28_, _tmp27_);
		iter = _tmp28_;
		_tmp29_ = self->source_view;
		_tmp30_ = gtk_text_view_get_buffer ((GtkTextView*) _tmp29_);
		_tmp31_ = _tmp30_;
		_tmp32_ = new_value;
		_tmp33_ = new_value;
		_tmp34_ = strlen (_tmp33_);
		_tmp35_ = _tmp34_;
		_tmp36_ = self->priv->scrub_tag;
		gtk_text_buffer_insert_with_tags (_tmp31_, &iter, _tmp32_, _tmp35_, _tmp36_, NULL, NULL);
		result = GDK_EVENT_STOP;
		_g_free0 (new_value);
		return result;
	}
	_tmp37_ = self->source_view;
	_tmp38_ = e;
	_tmp39_ = _tmp38_->x;
	_tmp40_ = e;
	_tmp41_ = _tmp40_->y;
	gtk_text_view_window_to_buffer_coords ((GtkTextView*) _tmp37_, GTK_TEXT_WINDOW_TEXT, (gint) _tmp39_, (gint) _tmp41_, &_tmp42_, &_tmp43_);
	x = _tmp42_;
	y = _tmp43_;
	_tmp44_ = self->source_view;
	_tmp45_ = x;
	_tmp46_ = y;
	gtk_text_view_get_iter_at_location ((GtkTextView*) _tmp44_, &_tmp47_, _tmp45_, _tmp46_);
	iter = _tmp47_;
	_tmp48_ = self->source_view;
	_tmp49_ = gtk_text_view_get_buffer ((GtkTextView*) _tmp48_);
	_tmp50_ = _tmp49_;
	gtk_text_buffer_get_end_iter (_tmp50_, &_tmp51_);
	iter2 = _tmp51_;
	_tmp52_ = gtk_text_iter_get_offset (&iter);
	_tmp53_ = gtk_text_iter_get_offset (&iter2);
	if (_tmp52_ == _tmp53_) {
		gboolean _tmp54_ = FALSE;
		_tmp54_ = self->priv->scrubb_hover;
		if (_tmp54_) {
			GtkSourceView* _tmp55_ = NULL;
			GdkWindow* _tmp56_ = NULL;
			GdkCursor* _tmp57_ = NULL;
			_tmp55_ = self->source_view;
			_tmp56_ = gtk_text_view_get_window ((GtkTextView*) _tmp55_, GTK_TEXT_WINDOW_TEXT);
			_tmp57_ = self->priv->x_term;
			gdk_window_set_cursor (_tmp56_, _tmp57_);
			self->priv->scrubb_hover = FALSE;
		}
		result = FALSE;
		return result;
	}
	_tmp58_ = iter;
	gtk_text_iter_assign (&iter2, &_tmp58_);
	gtk_text_iter_backward_word_start (&iter);
	input_view_forward_till_no_digit (self, &iter2);
	_tmp59_ = self->source_view;
	_tmp60_ = gtk_text_view_get_buffer ((GtkTextView*) _tmp59_);
	_tmp61_ = _tmp60_;
	_tmp62_ = iter;
	_tmp63_ = iter2;
	_tmp64_ = gtk_text_buffer_get_slice (_tmp61_, &_tmp62_, &_tmp63_, TRUE);
	word = _tmp64_;
	_tmp65_ = gtk_text_iter_get_offset (&iter);
	self->priv->start_scrub = _tmp65_;
	gtk_text_iter_backward_char (&iter);
	_tmp69_ = gtk_text_iter_get_char (&iter);
	if (_tmp69_ == ((gunichar) ',')) {
		_tmp68_ = TRUE;
	} else {
		gunichar _tmp70_ = 0U;
		_tmp70_ = gtk_text_iter_get_char (&iter2);
		_tmp68_ = _tmp70_ == ((gunichar) ',');
	}
	if (_tmp68_) {
		_tmp67_ = TRUE;
	} else {
		gunichar _tmp71_ = 0U;
		_tmp71_ = gtk_text_iter_get_char (&iter);
		_tmp67_ = _tmp71_ == ((gunichar) '.');
	}
	if (_tmp67_) {
		_tmp66_ = TRUE;
	} else {
		gunichar _tmp72_ = 0U;
		_tmp72_ = gtk_text_iter_get_char (&iter2);
		_tmp66_ = _tmp72_ == ((gunichar) '.');
	}
	if (_tmp66_) {
		gboolean _tmp73_ = FALSE;
		_tmp73_ = self->priv->scrubb_hover;
		if (_tmp73_) {
			GtkSourceView* _tmp74_ = NULL;
			GdkWindow* _tmp75_ = NULL;
			GdkCursor* _tmp76_ = NULL;
			_tmp74_ = self->source_view;
			_tmp75_ = gtk_text_view_get_window ((GtkTextView*) _tmp74_, GTK_TEXT_WINDOW_TEXT);
			_tmp76_ = self->priv->x_term;
			gdk_window_set_cursor (_tmp75_, _tmp76_);
			self->priv->scrubb_hover = FALSE;
		}
		result = FALSE;
		_g_free0 (word);
		return result;
	}
	_tmp77_ = word;
	_tmp79_ = int64_try_parse (_tmp77_, &_tmp78_);
	val = _tmp78_;
	success = _tmp79_;
	_tmp80_ = success;
	if (_tmp80_) {
		gboolean _tmp81_ = FALSE;
		_tmp81_ = self->priv->scrubb_hover;
		if (!_tmp81_) {
			gint64 _tmp82_ = 0LL;
			gint _tmp83_ = 0;
			gchar* _tmp84_ = NULL;
			gchar* _tmp85_ = NULL;
			gint _tmp86_ = 0;
			gint _tmp87_ = 0;
			GtkSourceView* _tmp88_ = NULL;
			GdkWindow* _tmp89_ = NULL;
			GdkCursor* _tmp90_ = NULL;
			_tmp82_ = val;
			self->priv->org_value = (gint) _tmp82_;
			_tmp83_ = self->priv->org_value;
			_tmp84_ = g_strdup_printf ("%d", _tmp83_);
			_tmp85_ = _tmp84_;
			_tmp86_ = strlen (_tmp85_);
			_tmp87_ = _tmp86_;
			self->priv->scrub_width = _tmp87_;
			_g_free0 (_tmp85_);
			gtk_text_iter_forward_char (&iter);
			_tmp88_ = self->source_view;
			_tmp89_ = gtk_text_view_get_window ((GtkTextView*) _tmp88_, GTK_TEXT_WINDOW_TEXT);
			_tmp90_ = self->priv->d_arrow;
			gdk_window_set_cursor (_tmp89_, _tmp90_);
			self->priv->scrubb_hover = TRUE;
		}
	} else {
		gboolean _tmp91_ = FALSE;
		_tmp91_ = self->priv->scrubb_hover;
		if (_tmp91_) {
			GtkSourceView* _tmp92_ = NULL;
			GdkWindow* _tmp93_ = NULL;
			GdkCursor* _tmp94_ = NULL;
			_tmp92_ = self->source_view;
			_tmp93_ = gtk_text_view_get_window ((GtkTextView*) _tmp92_, GTK_TEXT_WINDOW_TEXT);
			_tmp94_ = self->priv->x_term;
			gdk_window_set_cursor (_tmp93_, _tmp94_);
			self->priv->scrubb_hover = FALSE;
		}
	}
	result = FALSE;
	_g_free0 (word);
	return result;
}


static gboolean ___lambda16__gtk_widget_motion_notify_event (GtkWidget* _sender, GdkEventMotion* event, gpointer self) {
	gboolean result;
	result = __lambda16_ ((InputView*) self, event);
	return result;
}


static gboolean __lambda17_ (InputView* self, GdkEventButton* e) {
	gboolean result = FALSE;
	gboolean _tmp0_ = FALSE;
	gboolean _tmp1_ = FALSE;
	gboolean _tmp2_ = FALSE;
	g_return_val_if_fail (e != NULL, FALSE);
	_tmp2_ = self->priv->scrubb_hover;
	if (_tmp2_) {
		GdkEventButton* _tmp3_ = NULL;
		GdkEventType _tmp4_ = 0;
		_tmp3_ = e;
		_tmp4_ = _tmp3_->type;
		_tmp1_ = _tmp4_ == GDK_BUTTON_PRESS;
	} else {
		_tmp1_ = FALSE;
	}
	if (_tmp1_) {
		GdkEventButton* _tmp5_ = NULL;
		guint _tmp6_ = 0U;
		_tmp5_ = e;
		_tmp6_ = _tmp5_->button;
		_tmp0_ = _tmp6_ != ((guint) GDK_2BUTTON_PRESS);
	} else {
		_tmp0_ = FALSE;
	}
	if (_tmp0_) {
		GdkEventButton* _tmp7_ = NULL;
		gdouble _tmp8_ = 0.0;
		GtkSourceView* _tmp9_ = NULL;
		GtkTextBuffer* _tmp10_ = NULL;
		GtkTextBuffer* _tmp11_ = NULL;
		gint _tmp12_ = 0;
		gint _tmp13_ = 0;
		GtkSourceView* _tmp14_ = NULL;
		GtkTextIter iter = {0};
		GtkSourceView* _tmp15_ = NULL;
		GtkTextBuffer* _tmp16_ = NULL;
		GtkTextBuffer* _tmp17_ = NULL;
		gint _tmp18_ = 0;
		GtkTextIter _tmp19_ = {0};
		GtkSourceView* _tmp20_ = NULL;
		GtkTextBuffer* _tmp21_ = NULL;
		GtkTextBuffer* _tmp22_ = NULL;
		GtkTextIter _tmp23_ = {0};
		_tmp7_ = e;
		_tmp8_ = _tmp7_->x;
		self->priv->scrubb_press_x = (gint) _tmp8_;
		_tmp9_ = self->source_view;
		_tmp10_ = gtk_text_view_get_buffer ((GtkTextView*) _tmp9_);
		_tmp11_ = _tmp10_;
		g_object_get (_tmp11_, "cursor-position", &_tmp12_, NULL);
		_tmp13_ = _tmp12_;
		self->priv->last_cursor = _tmp13_;
		_tmp14_ = self->source_view;
		gtk_text_view_set_cursor_visible ((GtkTextView*) _tmp14_, FALSE);
		memset (&iter, 0, sizeof (GtkTextIter));
		_tmp15_ = self->source_view;
		_tmp16_ = gtk_text_view_get_buffer ((GtkTextView*) _tmp15_);
		_tmp17_ = _tmp16_;
		_tmp18_ = self->priv->start_scrub;
		gtk_text_buffer_get_iter_at_offset (_tmp17_, &_tmp19_, _tmp18_);
		iter = _tmp19_;
		_tmp20_ = self->source_view;
		_tmp21_ = gtk_text_view_get_buffer ((GtkTextView*) _tmp20_);
		_tmp22_ = _tmp21_;
		_tmp23_ = iter;
		gtk_text_buffer_place_cursor (_tmp22_, &_tmp23_);
		result = GDK_EVENT_STOP;
		return result;
	} else {
		result = GDK_EVENT_PROPAGATE;
		return result;
	}
}


static gboolean ___lambda17__gtk_widget_button_press_event (GtkWidget* _sender, GdkEventButton* event, gpointer self) {
	gboolean result;
	result = __lambda17_ ((InputView*) self, event);
	return result;
}


static gboolean __lambda18_ (InputView* self, GdkEventButton* e) {
	gboolean result = FALSE;
	gint _tmp0_ = 0;
	g_return_val_if_fail (e != NULL, FALSE);
	_tmp0_ = self->priv->scrubb_press_x;
	if (_tmp0_ > 0) {
		GtkSourceView* _tmp1_ = NULL;
		GdkWindow* _tmp2_ = NULL;
		GdkCursor* _tmp3_ = NULL;
		GtkTextIter iter = {0};
		GtkTextIter iter2 = {0};
		GtkSourceView* _tmp4_ = NULL;
		GtkTextBuffer* _tmp5_ = NULL;
		GtkTextBuffer* _tmp6_ = NULL;
		gint _tmp7_ = 0;
		GtkTextIter _tmp8_ = {0};
		GtkSourceView* _tmp9_ = NULL;
		GtkTextBuffer* _tmp10_ = NULL;
		GtkTextBuffer* _tmp11_ = NULL;
		gint _tmp12_ = 0;
		gint _tmp13_ = 0;
		GtkTextIter _tmp14_ = {0};
		GtkSourceView* _tmp15_ = NULL;
		GtkTextBuffer* _tmp16_ = NULL;
		GtkTextBuffer* _tmp17_ = NULL;
		GtkTextIter _tmp18_ = {0};
		GtkTextIter _tmp19_ = {0};
		GtkSourceView* _tmp20_ = NULL;
		GtkSourceView* _tmp21_ = NULL;
		GtkTextBuffer* _tmp22_ = NULL;
		GtkTextBuffer* _tmp23_ = NULL;
		gint _tmp24_ = 0;
		GtkTextIter _tmp25_ = {0};
		GtkSourceView* _tmp26_ = NULL;
		GtkTextBuffer* _tmp27_ = NULL;
		GtkTextBuffer* _tmp28_ = NULL;
		GtkTextIter _tmp29_ = {0};
		self->priv->scrubb_press_x = -1;
		_tmp1_ = self->source_view;
		_tmp2_ = gtk_text_view_get_window ((GtkTextView*) _tmp1_, GTK_TEXT_WINDOW_TEXT);
		_tmp3_ = self->priv->x_term;
		gdk_window_set_cursor (_tmp2_, _tmp3_);
		self->priv->scrubb_hover = FALSE;
		memset (&iter, 0, sizeof (GtkTextIter));
		memset (&iter2, 0, sizeof (GtkTextIter));
		_tmp4_ = self->source_view;
		_tmp5_ = gtk_text_view_get_buffer ((GtkTextView*) _tmp4_);
		_tmp6_ = _tmp5_;
		_tmp7_ = self->priv->start_scrub;
		gtk_text_buffer_get_iter_at_offset (_tmp6_, &_tmp8_, _tmp7_);
		iter = _tmp8_;
		_tmp9_ = self->source_view;
		_tmp10_ = gtk_text_view_get_buffer ((GtkTextView*) _tmp9_);
		_tmp11_ = _tmp10_;
		_tmp12_ = self->priv->start_scrub;
		_tmp13_ = self->priv->scrub_width;
		gtk_text_buffer_get_iter_at_offset (_tmp11_, &_tmp14_, _tmp12_ + _tmp13_);
		iter2 = _tmp14_;
		_tmp15_ = self->source_view;
		_tmp16_ = gtk_text_view_get_buffer ((GtkTextView*) _tmp15_);
		_tmp17_ = _tmp16_;
		_tmp18_ = iter;
		_tmp19_ = iter2;
		gtk_text_buffer_remove_tag_by_name (_tmp17_, "scrubbing", &_tmp18_, &_tmp19_);
		_tmp20_ = self->source_view;
		gtk_text_view_set_cursor_visible ((GtkTextView*) _tmp20_, TRUE);
		_tmp21_ = self->source_view;
		_tmp22_ = gtk_text_view_get_buffer ((GtkTextView*) _tmp21_);
		_tmp23_ = _tmp22_;
		_tmp24_ = self->priv->last_cursor;
		gtk_text_buffer_get_iter_at_offset (_tmp23_, &_tmp25_, _tmp24_);
		iter = _tmp25_;
		_tmp26_ = self->source_view;
		_tmp27_ = gtk_text_view_get_buffer ((GtkTextView*) _tmp26_);
		_tmp28_ = _tmp27_;
		_tmp29_ = iter;
		gtk_text_buffer_place_cursor (_tmp28_, &_tmp29_);
		result = GDK_EVENT_STOP;
		return result;
	} else {
		result = GDK_EVENT_PROPAGATE;
		return result;
	}
}


static gboolean ___lambda18__gtk_widget_button_release_event (GtkWidget* _sender, GdkEventButton* event, gpointer self) {
	gboolean result;
	result = __lambda18_ ((InputView*) self, event);
	return result;
}


static void input_view_scrubbing_mode (InputView* self) {
	GtkSourceView* _tmp0_ = NULL;
	GtkSourceView* _tmp1_ = NULL;
	GtkSourceView* _tmp2_ = NULL;
	GtkSourceView* _tmp3_ = NULL;
	GtkTextBuffer* _tmp4_ = NULL;
	GtkTextBuffer* _tmp5_ = NULL;
	GtkTextTag* _tmp6_ = NULL;
	GtkTextTag* _tmp7_ = NULL;
	GdkRGBA rgb = {0};
	GtkTextTag* _tmp8_ = NULL;
	GdkRGBA _tmp9_ = {0};
	GtkTextTag* _tmp10_ = NULL;
	g_return_if_fail (self != NULL);
	_tmp0_ = self->source_view;
	g_signal_connect_object ((GtkWidget*) _tmp0_, "motion-notify-event", (GCallback) ___lambda16__gtk_widget_motion_notify_event, self, 0);
	_tmp1_ = self->source_view;
	g_signal_connect_object ((GtkWidget*) _tmp1_, "button-press-event", (GCallback) ___lambda17__gtk_widget_button_press_event, self, 0);
	_tmp2_ = self->source_view;
	g_signal_connect_object ((GtkWidget*) _tmp2_, "button-release-event", (GCallback) ___lambda18__gtk_widget_button_release_event, self, 0);
	_tmp3_ = self->source_view;
	_tmp4_ = gtk_text_view_get_buffer ((GtkTextView*) _tmp3_);
	_tmp5_ = _tmp4_;
	_tmp6_ = gtk_text_buffer_create_tag (_tmp5_, "scrubbing", NULL);
	_tmp7_ = _g_object_ref0 (_tmp6_);
	_g_object_unref0 (self->priv->scrub_tag);
	self->priv->scrub_tag = _tmp7_;
	memset (&rgb, 0, sizeof (GdkRGBA));
	rgb.red = 0.854901961;
	rgb.green = 0.933333333;
	rgb.blue = 0.984313725;
	rgb.alpha = 0.8;
	_tmp8_ = self->priv->scrub_tag;
	_tmp9_ = rgb;
	g_object_set (_tmp8_, "background-rgba", &_tmp9_, NULL);
	_tmp10_ = self->priv->scrub_tag;
	g_object_set (_tmp10_, "background-set", TRUE, NULL);
}


static void input_view_forward_till_no_digit (InputView* self, GtkTextIter* it) {
	g_return_if_fail (self != NULL);
	g_return_if_fail (it != NULL);
	while (TRUE) {
		gunichar _tmp0_ = 0U;
		gboolean _tmp1_ = FALSE;
		gtk_text_iter_forward_char (it);
		_tmp0_ = gtk_text_iter_get_char (it);
		_tmp1_ = g_unichar_isdigit (_tmp0_);
		if (_tmp1_) {
			continue;
		}
		break;
	}
}


static void g_cclosure_user_marshal_VOID__INT_INT (GClosure * closure, GValue * return_value, guint n_param_values, const GValue * param_values, gpointer invocation_hint, gpointer marshal_data) {
	typedef void (*GMarshalFunc_VOID__INT_INT) (gpointer data1, gint arg_1, gint arg_2, gpointer data2);
	register GMarshalFunc_VOID__INT_INT callback;
	register GCClosure * cc;
	register gpointer data1;
	register gpointer data2;
	cc = (GCClosure *) closure;
	g_return_if_fail (n_param_values == 3);
	if (G_CCLOSURE_SWAP_DATA (closure)) {
		data1 = closure->data;
		data2 = param_values->data[0].v_pointer;
	} else {
		data1 = param_values->data[0].v_pointer;
		data2 = closure->data;
	}
	callback = (GMarshalFunc_VOID__INT_INT) (marshal_data ? marshal_data : cc->callback);
	callback (data1, g_value_get_int (param_values + 1), g_value_get_int (param_values + 2), data2);
}


static void g_cclosure_user_marshal_VOID__INT_INT_STRING (GClosure * closure, GValue * return_value, guint n_param_values, const GValue * param_values, gpointer invocation_hint, gpointer marshal_data) {
	typedef void (*GMarshalFunc_VOID__INT_INT_STRING) (gpointer data1, gint arg_1, gint arg_2, const char* arg_3, gpointer data2);
	register GMarshalFunc_VOID__INT_INT_STRING callback;
	register GCClosure * cc;
	register gpointer data1;
	register gpointer data2;
	cc = (GCClosure *) closure;
	g_return_if_fail (n_param_values == 4);
	if (G_CCLOSURE_SWAP_DATA (closure)) {
		data1 = closure->data;
		data2 = param_values->data[0].v_pointer;
	} else {
		data1 = param_values->data[0].v_pointer;
		data2 = closure->data;
	}
	callback = (GMarshalFunc_VOID__INT_INT_STRING) (marshal_data ? marshal_data : cc->callback);
	callback (data1, g_value_get_int (param_values + 1), g_value_get_int (param_values + 2), g_value_get_string (param_values + 3), data2);
}


static void input_view_class_init (InputViewClass * klass) {
	input_view_parent_class = g_type_class_peek_parent (klass);
	g_type_class_add_private (klass, sizeof (InputViewPrivate));
	((GtkWidgetClass *) klass)->draw = input_view_real_draw;
	G_OBJECT_CLASS (klass)->finalize = input_view_finalize;
	g_signal_new ("line_added", TYPE_INPUT_VIEW, G_SIGNAL_RUN_LAST, 0, NULL, NULL, g_cclosure_user_marshal_VOID__INT_INT, G_TYPE_NONE, 2, G_TYPE_INT, G_TYPE_INT);
	g_signal_new ("line_removed", TYPE_INPUT_VIEW, G_SIGNAL_RUN_LAST, 0, NULL, NULL, g_cclosure_user_marshal_VOID__INT_INT, G_TYPE_NONE, 2, G_TYPE_INT, G_TYPE_INT);
	g_signal_new ("changed_line", TYPE_INPUT_VIEW, G_SIGNAL_RUN_LAST, 0, NULL, NULL, g_cclosure_user_marshal_VOID__INT_INT_STRING, G_TYPE_NONE, 3, G_TYPE_INT, G_TYPE_INT, G_TYPE_STRING);
	g_signal_new ("insert_result", TYPE_INPUT_VIEW, G_SIGNAL_RUN_LAST, 0, NULL, NULL, g_cclosure_marshal_VOID__INT, G_TYPE_NONE, 1, G_TYPE_INT);
	g_signal_new ("open", TYPE_INPUT_VIEW, G_SIGNAL_RUN_LAST, 0, NULL, NULL, g_cclosure_marshal_VOID__VOID, G_TYPE_NONE, 0);
	g_signal_new ("new_trigger", TYPE_INPUT_VIEW, G_SIGNAL_RUN_LAST, 0, NULL, NULL, g_cclosure_marshal_VOID__VOID, G_TYPE_NONE, 0);
	g_signal_new ("escape", TYPE_INPUT_VIEW, G_SIGNAL_RUN_LAST, 0, NULL, NULL, g_cclosure_marshal_VOID__VOID, G_TYPE_NONE, 0);
	g_signal_new ("help", TYPE_INPUT_VIEW, G_SIGNAL_RUN_LAST, 0, NULL, NULL, g_cclosure_marshal_VOID__VOID, G_TYPE_NONE, 0);
	g_signal_new ("cursor_line_change", TYPE_INPUT_VIEW, G_SIGNAL_RUN_LAST, 0, NULL, NULL, g_cclosure_marshal_VOID__INT, G_TYPE_NONE, 1, G_TYPE_INT);
}


static void input_view_instance_init (InputView * self) {
	gchar* _tmp0_ = NULL;
	gchar* _tmp1_ = NULL;
	gchar* _tmp2_ = NULL;
	gchar* _tmp3_ = NULL;
	gchar* _tmp4_ = NULL;
	gchar** _tmp5_ = NULL;
	GeeArrayList* _tmp6_ = NULL;
	gchar* _tmp7_ = NULL;
	GdkDisplay* _tmp8_ = NULL;
	GdkCursor* _tmp9_ = NULL;
	GdkDisplay* _tmp10_ = NULL;
	GdkCursor* _tmp11_ = NULL;
	self->priv = INPUT_VIEW_GET_PRIVATE (self);
	_tmp0_ = g_strdup ("+");
	_tmp1_ = g_strdup ("-");
	_tmp2_ = g_strdup ("*");
	_tmp3_ = g_strdup ("/");
	_tmp4_ = g_strdup ("=");
	_tmp5_ = g_new0 (gchar*, 5 + 1);
	_tmp5_[0] = _tmp0_;
	_tmp5_[1] = _tmp1_;
	_tmp5_[2] = _tmp2_;
	_tmp5_[3] = _tmp3_;
	_tmp5_[4] = _tmp4_;
	_tmp6_ = gee_array_list_new_wrap (G_TYPE_STRING, (GBoxedCopyFunc) g_strdup, g_free, _tmp5_, 5, NULL, NULL, NULL);
	self->operators = _tmp6_;
	self->priv->add_space = FALSE;
	self->skip_change = FALSE;
	_tmp7_ = g_strdup ("(?=[A-Za-z])line(\\d)+");
	self->priv->line_regex = _tmp7_;
	self->priv->total_lines = 0;
	self->priv->backspace_button = FALSE;
	self->priv->actual_line = 0;
	_tmp8_ = gdk_display_get_default ();
	_tmp9_ = gdk_cursor_new_for_display (_tmp8_, GDK_XTERM);
	self->priv->x_term = _tmp9_;
	_tmp10_ = gdk_display_get_default ();
	_tmp11_ = gdk_cursor_new_for_display (_tmp10_, GDK_SB_H_DOUBLE_ARROW);
	self->priv->d_arrow = _tmp11_;
	self->priv->scrubb_hover = FALSE;
	self->priv->scrubb_press_x = -1;
}


static void input_view_finalize (GObject* obj) {
	InputView * self;
	self = G_TYPE_CHECK_INSTANCE_CAST (obj, TYPE_INPUT_VIEW, InputView);
	_g_object_unref0 (self->buffer);
	_g_object_unref0 (self->source_view);
	_g_object_unref0 (self->priv->search);
	_g_object_unref0 (self->priv->result_widgets);
	_g_object_unref0 (self->operators);
	_g_regex_unref0 (self->priv->digit_regex);
	_g_regex_unref0 (self->priv->non_digit_regex);
	_g_free0 (self->priv->line_regex);
	_g_object_unref0 (self->priv->x_term);
	_g_object_unref0 (self->priv->d_arrow);
	_g_object_unref0 (self->priv->scrub_tag);
	G_OBJECT_CLASS (input_view_parent_class)->finalize (obj);
}


GType input_view_get_type (void) {
	static volatile gsize input_view_type_id__volatile = 0;
	if (g_once_init_enter (&input_view_type_id__volatile)) {
		static const GTypeInfo g_define_type_info = { sizeof (InputViewClass), (GBaseInitFunc) NULL, (GBaseFinalizeFunc) NULL, (GClassInitFunc) input_view_class_init, (GClassFinalizeFunc) NULL, NULL, sizeof (InputView), 0, (GInstanceInitFunc) input_view_instance_init, NULL };
		GType input_view_type_id;
		input_view_type_id = g_type_register_static (gtk_box_get_type (), "InputView", &g_define_type_info, 0);
		g_once_init_leave (&input_view_type_id__volatile, input_view_type_id);
	}
	return input_view_type_id__volatile;
}


static void _vala_array_destroy (gpointer array, gint array_length, GDestroyNotify destroy_func) {
	if ((array != NULL) && (destroy_func != NULL)) {
		int i;
		for (i = 0; i < array_length; i = i + 1) {
			if (((gpointer*) array)[i] != NULL) {
				destroy_func (((gpointer*) array)[i]);
			}
		}
	}
}


static void _vala_array_free (gpointer array, gint array_length, GDestroyNotify destroy_func) {
	_vala_array_destroy (array, array_length, destroy_func);
	g_free (array);
}


static gint _vala_array_length (gpointer array) {
	int length;
	length = 0;
	if (array) {
		while (((gpointer*) array)[length]) {
			length++;
		}
	}
	return length;
}



